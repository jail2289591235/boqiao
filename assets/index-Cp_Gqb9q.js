(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const f of r)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function o(r){const f={};return r.integrity&&(f.integrity=r.integrity),r.referrerPolicy&&(f.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?f.credentials="include":r.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(r){if(r.ep)return;r.ep=!0;const f=o(r);fetch(r.href,f)}})();function hg(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Qu={exports:{}},ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tp;function C0(){if(Tp)return ql;Tp=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function o(s,r,f){var m=null;if(f!==void 0&&(m=""+f),r.key!==void 0&&(m=""+r.key),"key"in r){f={};for(var g in r)g!=="key"&&(f[g]=r[g])}else f=r;return r=f.ref,{$$typeof:i,type:s,key:m,ref:r!==void 0?r:null,props:f}}return ql.Fragment=t,ql.jsx=o,ql.jsxs=o,ql}var Ep;function x0(){return Ep||(Ep=1,Qu.exports=C0()),Qu.exports}var T=x0(),$u={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _p;function A0(){if(_p)return ye;_p=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),m=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),_=Symbol.iterator;function x(R){return R===null||typeof R!="object"?null:(R=_&&R[_]||R["@@iterator"],typeof R=="function"?R:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,D={};function V(R,z,j){this.props=R,this.context=z,this.refs=D,this.updater=j||I}V.prototype.isReactComponent={},V.prototype.setState=function(R,z){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,z,"setState")},V.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function $(){}$.prototype=V.prototype;function J(R,z,j){this.props=R,this.context=z,this.refs=D,this.updater=j||I}var Z=J.prototype=new $;Z.constructor=J,w(Z,V.prototype),Z.isPureReactComponent=!0;var le=Array.isArray;function ae(){}var Q={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function X(R,z,j){var ie=j.ref;return{$$typeof:i,type:R,key:z,ref:ie!==void 0?ie:null,props:j}}function oe(R,z){return X(R.type,z,R.props)}function te(R){return typeof R=="object"&&R!==null&&R.$$typeof===i}function pe(R){var z={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(j){return z[j]})}var se=/\/+/g;function Ee(R,z){return typeof R=="object"&&R!==null&&R.key!=null?pe(""+R.key):z.toString(36)}function Ye(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(ae,ae):(R.status="pending",R.then(function(z){R.status==="pending"&&(R.status="fulfilled",R.value=z)},function(z){R.status==="pending"&&(R.status="rejected",R.reason=z)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function P(R,z,j,ie,he){var _e=typeof R;(_e==="undefined"||_e==="boolean")&&(R=null);var De=!1;if(R===null)De=!0;else switch(_e){case"bigint":case"string":case"number":De=!0;break;case"object":switch(R.$$typeof){case i:case t:De=!0;break;case y:return De=R._init,P(De(R._payload),z,j,ie,he)}}if(De)return he=he(R),De=ie===""?"."+Ee(R,0):ie,le(he)?(j="",De!=null&&(j=De.replace(se,"$&/")+"/"),P(he,z,j,"",function(Mt){return Mt})):he!=null&&(te(he)&&(he=oe(he,j+(he.key==null||R&&R.key===he.key?"":(""+he.key).replace(se,"$&/")+"/")+De)),z.push(he)),1;De=0;var je=ie===""?".":ie+":";if(le(R))for(var Fe=0;Fe<R.length;Fe++)ie=R[Fe],_e=je+Ee(ie,Fe),De+=P(ie,z,j,_e,he);else if(Fe=x(R),typeof Fe=="function")for(R=Fe.call(R),Fe=0;!(ie=R.next()).done;)ie=ie.value,_e=je+Ee(ie,Fe++),De+=P(ie,z,j,_e,he);else if(_e==="object"){if(typeof R.then=="function")return P(Ye(R),z,j,ie,he);throw z=String(R),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return De}function K(R,z,j){if(R==null)return R;var ie=[],he=0;return P(R,ie,"","",function(_e){return z.call(j,_e,he++)}),ie}function q(R){if(R._status===-1){var z=R._result;z=z(),z.then(function(j){(R._status===0||R._status===-1)&&(R._status=1,R._result=j)},function(j){(R._status===0||R._status===-1)&&(R._status=2,R._result=j)}),R._status===-1&&(R._status=0,R._result=z)}if(R._status===1)return R._result.default;throw R._result}var me=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},ve={map:K,forEach:function(R,z,j){K(R,function(){z.apply(this,arguments)},j)},count:function(R){var z=0;return K(R,function(){z++}),z},toArray:function(R){return K(R,function(z){return z})||[]},only:function(R){if(!te(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return ye.Activity=E,ye.Children=ve,ye.Component=V,ye.Fragment=o,ye.Profiler=r,ye.PureComponent=J,ye.StrictMode=s,ye.Suspense=v,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,ye.__COMPILER_RUNTIME={__proto__:null,c:function(R){return Q.H.useMemoCache(R)}},ye.cache=function(R){return function(){return R.apply(null,arguments)}},ye.cacheSignal=function(){return null},ye.cloneElement=function(R,z,j){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var ie=w({},R.props),he=R.key;if(z!=null)for(_e in z.key!==void 0&&(he=""+z.key),z)!Y.call(z,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&z.ref===void 0||(ie[_e]=z[_e]);var _e=arguments.length-2;if(_e===1)ie.children=j;else if(1<_e){for(var De=Array(_e),je=0;je<_e;je++)De[je]=arguments[je+2];ie.children=De}return X(R.type,he,ie)},ye.createContext=function(R){return R={$$typeof:m,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:f,_context:R},R},ye.createElement=function(R,z,j){var ie,he={},_e=null;if(z!=null)for(ie in z.key!==void 0&&(_e=""+z.key),z)Y.call(z,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(he[ie]=z[ie]);var De=arguments.length-2;if(De===1)he.children=j;else if(1<De){for(var je=Array(De),Fe=0;Fe<De;Fe++)je[Fe]=arguments[Fe+2];he.children=je}if(R&&R.defaultProps)for(ie in De=R.defaultProps,De)he[ie]===void 0&&(he[ie]=De[ie]);return X(R,_e,he)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(R){return{$$typeof:g,render:R}},ye.isValidElement=te,ye.lazy=function(R){return{$$typeof:y,_payload:{_status:-1,_result:R},_init:q}},ye.memo=function(R,z){return{$$typeof:h,type:R,compare:z===void 0?null:z}},ye.startTransition=function(R){var z=Q.T,j={};Q.T=j;try{var ie=R(),he=Q.S;he!==null&&he(j,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(ae,me)}catch(_e){me(_e)}finally{z!==null&&j.types!==null&&(z.types=j.types),Q.T=z}},ye.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},ye.use=function(R){return Q.H.use(R)},ye.useActionState=function(R,z,j){return Q.H.useActionState(R,z,j)},ye.useCallback=function(R,z){return Q.H.useCallback(R,z)},ye.useContext=function(R){return Q.H.useContext(R)},ye.useDebugValue=function(){},ye.useDeferredValue=function(R,z){return Q.H.useDeferredValue(R,z)},ye.useEffect=function(R,z){return Q.H.useEffect(R,z)},ye.useEffectEvent=function(R){return Q.H.useEffectEvent(R)},ye.useId=function(){return Q.H.useId()},ye.useImperativeHandle=function(R,z,j){return Q.H.useImperativeHandle(R,z,j)},ye.useInsertionEffect=function(R,z){return Q.H.useInsertionEffect(R,z)},ye.useLayoutEffect=function(R,z){return Q.H.useLayoutEffect(R,z)},ye.useMemo=function(R,z){return Q.H.useMemo(R,z)},ye.useOptimistic=function(R,z){return Q.H.useOptimistic(R,z)},ye.useReducer=function(R,z,j){return Q.H.useReducer(R,z,j)},ye.useRef=function(R){return Q.H.useRef(R)},ye.useState=function(R){return Q.H.useState(R)},ye.useSyncExternalStore=function(R,z,j){return Q.H.useSyncExternalStore(R,z,j)},ye.useTransition=function(){return Q.H.useTransition()},ye.version="19.2.4",ye}var Cp;function _c(){return Cp||(Cp=1,$u.exports=A0()),$u.exports}var W=_c();const N0=hg(W);var Zu={exports:{}},kl={},Wu={exports:{}},ju={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xp;function R0(){return xp||(xp=1,(function(i){function t(P,K){var q=P.length;P.push(K);e:for(;0<q;){var me=q-1>>>1,ve=P[me];if(0<r(ve,K))P[me]=K,P[q]=ve,q=me;else break e}}function o(P){return P.length===0?null:P[0]}function s(P){if(P.length===0)return null;var K=P[0],q=P.pop();if(q!==K){P[0]=q;e:for(var me=0,ve=P.length,R=ve>>>1;me<R;){var z=2*(me+1)-1,j=P[z],ie=z+1,he=P[ie];if(0>r(j,q))ie<ve&&0>r(he,j)?(P[me]=he,P[ie]=q,me=ie):(P[me]=j,P[z]=q,me=z);else if(ie<ve&&0>r(he,q))P[me]=he,P[ie]=q,me=ie;else break e}}return K}function r(P,K){var q=P.sortIndex-K.sortIndex;return q!==0?q:P.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;i.unstable_now=function(){return f.now()}}else{var m=Date,g=m.now();i.unstable_now=function(){return m.now()-g}}var v=[],h=[],y=1,E=null,_=3,x=!1,I=!1,w=!1,D=!1,V=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function Z(P){for(var K=o(h);K!==null;){if(K.callback===null)s(h);else if(K.startTime<=P)s(h),K.sortIndex=K.expirationTime,t(v,K);else break;K=o(h)}}function le(P){if(w=!1,Z(P),!I)if(o(v)!==null)I=!0,ae||(ae=!0,pe());else{var K=o(h);K!==null&&Ye(le,K.startTime-P)}}var ae=!1,Q=-1,Y=5,X=-1;function oe(){return D?!0:!(i.unstable_now()-X<Y)}function te(){if(D=!1,ae){var P=i.unstable_now();X=P;var K=!0;try{e:{I=!1,w&&(w=!1,$(Q),Q=-1),x=!0;var q=_;try{t:{for(Z(P),E=o(v);E!==null&&!(E.expirationTime>P&&oe());){var me=E.callback;if(typeof me=="function"){E.callback=null,_=E.priorityLevel;var ve=me(E.expirationTime<=P);if(P=i.unstable_now(),typeof ve=="function"){E.callback=ve,Z(P),K=!0;break t}E===o(v)&&s(v),Z(P)}else s(v);E=o(v)}if(E!==null)K=!0;else{var R=o(h);R!==null&&Ye(le,R.startTime-P),K=!1}}break e}finally{E=null,_=q,x=!1}K=void 0}}finally{K?pe():ae=!1}}}var pe;if(typeof J=="function")pe=function(){J(te)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,Ee=se.port2;se.port1.onmessage=te,pe=function(){Ee.postMessage(null)}}else pe=function(){V(te,0)};function Ye(P,K){Q=V(function(){P(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(P){P.callback=null},i.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<P?Math.floor(1e3/P):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_next=function(P){switch(_){case 1:case 2:case 3:var K=3;break;default:K=_}var q=_;_=K;try{return P()}finally{_=q}},i.unstable_requestPaint=function(){D=!0},i.unstable_runWithPriority=function(P,K){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var q=_;_=P;try{return K()}finally{_=q}},i.unstable_scheduleCallback=function(P,K,q){var me=i.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?me+q:me):q=me,P){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=q+ve,P={id:y++,callback:K,priorityLevel:P,startTime:q,expirationTime:ve,sortIndex:-1},q>me?(P.sortIndex=q,t(h,P),o(v)===null&&P===o(h)&&(w?($(Q),Q=-1):w=!0,Ye(le,q-me))):(P.sortIndex=ve,t(v,P),I||x||(I=!0,ae||(ae=!0,pe()))),P},i.unstable_shouldYield=oe,i.unstable_wrapCallback=function(P){var K=_;return function(){var q=_;_=K;try{return P.apply(this,arguments)}finally{_=q}}}})(ju)),ju}var Ap;function M0(){return Ap||(Ap=1,Wu.exports=R0()),Wu.exports}var ec={exports:{}},_t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np;function b0(){if(Np)return _t;Np=1;var i=_c();function t(v){var h="https://react.dev/errors/"+v;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+v+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(t(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},r=Symbol.for("react.portal");function f(v,h,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:v,containerInfo:h,implementation:y}}var m=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,h){if(v==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return _t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,_t.createPortal=function(v,h){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return f(v,h,null,y)},_t.flushSync=function(v){var h=m.T,y=s.p;try{if(m.T=null,s.p=2,v)return v()}finally{m.T=h,s.p=y,s.d.f()}},_t.preconnect=function(v,h){typeof v=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(v,h))},_t.prefetchDNS=function(v){typeof v=="string"&&s.d.D(v)},_t.preinit=function(v,h){if(typeof v=="string"&&h&&typeof h.as=="string"){var y=h.as,E=g(y,h.crossOrigin),_=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;y==="style"?s.d.S(v,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:_,fetchPriority:x}):y==="script"&&s.d.X(v,{crossOrigin:E,integrity:_,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},_t.preinitModule=function(v,h){if(typeof v=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var y=g(h.as,h.crossOrigin);s.d.M(v,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(v)},_t.preload=function(v,h){if(typeof v=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var y=h.as,E=g(y,h.crossOrigin);s.d.L(v,y,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},_t.preloadModule=function(v,h){if(typeof v=="string")if(h){var y=g(h.as,h.crossOrigin);s.d.m(v,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(v)},_t.requestFormReset=function(v){s.d.r(v)},_t.unstable_batchedUpdates=function(v,h){return v(h)},_t.useFormState=function(v,h,y){return m.H.useFormState(v,h,y)},_t.useFormStatus=function(){return m.H.useHostTransitionStatus()},_t.version="19.2.4",_t}var Rp;function I0(){if(Rp)return ec.exports;Rp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),ec.exports=b0(),ec.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mp;function w0(){if(Mp)return kl;Mp=1;var i=M0(),t=_c(),o=I0();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)n+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var n=e,l=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(l=n.return),e=n.return;while(e)}return n.tag===3?l:null}function m(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function v(e){if(f(e)!==e)throw Error(s(188))}function h(e){var n=e.alternate;if(!n){if(n=f(e),n===null)throw Error(s(188));return n!==e?null:e}for(var l=e,a=n;;){var d=l.return;if(d===null)break;var p=d.alternate;if(p===null){if(a=d.return,a!==null){l=a;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===l)return v(d),e;if(p===a)return v(d),n;p=p.sibling}throw Error(s(188))}if(l.return!==a.return)l=d,a=p;else{for(var S=!1,C=d.child;C;){if(C===l){S=!0,l=d,a=p;break}if(C===a){S=!0,a=d,l=p;break}C=C.sibling}if(!S){for(C=p.child;C;){if(C===l){S=!0,l=p,a=d;break}if(C===a){S=!0,a=p,l=d;break}C=C.sibling}if(!S)throw Error(s(189))}}if(l.alternate!==a)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?e:n}function y(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=y(e),n!==null)return n;e=e.sibling}return null}var E=Object.assign,_=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),J=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),te=Symbol.iterator;function pe(e){return e===null||typeof e!="object"?null:(e=te&&e[te]||e["@@iterator"],typeof e=="function"?e:null)}var se=Symbol.for("react.client.reference");function Ee(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===se?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case w:return"Fragment";case V:return"Profiler";case D:return"StrictMode";case le:return"Suspense";case ae:return"SuspenseList";case X:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case I:return"Portal";case J:return e.displayName||"Context";case $:return(e._context.displayName||"Context")+".Consumer";case Z:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Q:return n=e.displayName||null,n!==null?n:Ee(e.type)||"Memo";case Y:n=e._payload,e=e._init;try{return Ee(e(n))}catch{}}return null}var Ye=Array.isArray,P=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},me=[],ve=-1;function R(e){return{current:e}}function z(e){0>ve||(e.current=me[ve],me[ve]=null,ve--)}function j(e,n){ve++,me[ve]=e.current,e.current=n}var ie=R(null),he=R(null),_e=R(null),De=R(null);function je(e,n){switch(j(_e,n),j(he,e),j(ie,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Om(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Om(n),e=Fm(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(ie),j(ie,e)}function Fe(){z(ie),z(he),z(_e)}function Mt(e){e.memoizedState!==null&&j(De,e);var n=ie.current,l=Fm(n,e.type);n!==l&&(j(he,e),j(ie,l))}function Yn(e){he.current===e&&(z(ie),z(he)),De.current===e&&(z(De),Gl._currentValue=q)}var Ht,Kn;function ht(e){if(Ht===void 0)try{throw Error()}catch(l){var n=l.stack.trim().match(/\n( *(at )?)/);Ht=n&&n[1]||"",Kn=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ht+e+Kn}var xi=!1;function mn(e,n){if(!e||xi)return"";xi=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(n){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(H){var G=H}Reflect.construct(e,[],F)}else{try{F.call()}catch(H){G=H}e.call(F.prototype)}}else{try{throw Error()}catch(H){G=H}(F=e())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(H){if(H&&G&&typeof H.stack=="string")return[H.stack,G.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=a.DetermineComponentFrameRoot(),S=p[0],C=p[1];if(S&&C){var N=S.split(`
`),L=C.split(`
`);for(d=a=0;a<N.length&&!N[a].includes("DetermineComponentFrameRoot");)a++;for(;d<L.length&&!L[d].includes("DetermineComponentFrameRoot");)d++;if(a===N.length||d===L.length)for(a=N.length-1,d=L.length-1;1<=a&&0<=d&&N[a]!==L[d];)d--;for(;1<=a&&0<=d;a--,d--)if(N[a]!==L[d]){if(a!==1||d!==1)do if(a--,d--,0>d||N[a]!==L[d]){var B=`
`+N[a].replace(" at new "," at ");return e.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",e.displayName)),B}while(1<=a&&0<=d);break}}}finally{xi=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?ht(l):""}function Ai(e,n){switch(e.tag){case 26:case 27:case 5:return ht(e.type);case 16:return ht("Lazy");case 13:return e.child!==n&&n!==null?ht("Suspense Fallback"):ht("Suspense");case 19:return ht("SuspenseList");case 0:case 15:return mn(e.type,!1);case 11:return mn(e.type.render,!1);case 1:return mn(e.type,!0);case 31:return ht("Activity");default:return""}}function ee(e){try{var n="",l=null;do n+=Ai(e,l),l=e,e=e.return;while(e);return n}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var Ke=Object.prototype.hasOwnProperty,xe=i.unstable_scheduleCallback,gt=i.unstable_cancelCallback,pn=i.unstable_shouldYield,Ni=i.unstable_requestPaint,ft=i.unstable_now,on=i.unstable_getCurrentPriorityLevel,Xn=i.unstable_ImmediatePriority,Xl=i.unstable_UserBlockingPriority,$i=i.unstable_NormalPriority,Pa=i.unstable_LowPriority,Ql=i.unstable_IdlePriority,$l=i.log,Ha=i.unstable_setDisableYieldValue,Ri=null,We=null;function hn(e){if(typeof $l=="function"&&Ha(e),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(Ri,e)}catch{}}var xt=Math.clz32?Math.clz32:Zi,Va=Math.log,Zl=Math.LN2;function Zi(e){return e>>>=0,e===0?32:31-(Va(e)/Zl|0)|0}var Wi=256,ji=262144,eo=4194304;function _n(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function to(e,n,l){var a=e.pendingLanes;if(a===0)return 0;var d=0,p=e.suspendedLanes,S=e.pingedLanes;e=e.warmLanes;var C=a&134217727;return C!==0?(a=C&~p,a!==0?d=_n(a):(S&=C,S!==0?d=_n(S):l||(l=C&~e,l!==0&&(d=_n(l))))):(C=a&~p,C!==0?d=_n(C):S!==0?d=_n(S):l||(l=a&~e,l!==0&&(d=_n(l)))),d===0?0:n!==0&&n!==d&&(n&p)===0&&(p=d&-d,l=n&-n,p>=l||p===32&&(l&4194048)!==0)?n:d}function Mi(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function qa(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wl(){var e=eo;return eo<<=1,(eo&62914560)===0&&(eo=4194304),e}function Xo(e){for(var n=[],l=0;31>l;l++)n.push(e);return n}function bi(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ka(e,n,l,a,d,p){var S=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var C=e.entanglements,N=e.expirationTimes,L=e.hiddenUpdates;for(l=S&~l;0<l;){var B=31-xt(l),F=1<<B;C[B]=0,N[B]=-1;var G=L[B];if(G!==null)for(L[B]=null,B=0;B<G.length;B++){var H=G[B];H!==null&&(H.lane&=-536870913)}l&=~F}a!==0&&jl(e,a,0),p!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=p&~(S&~n))}function jl(e,n,l){e.pendingLanes|=n,e.suspendedLanes&=~n;var a=31-xt(n);e.entangledLanes|=n,e.entanglements[a]=e.entanglements[a]|1073741824|l&261930}function es(e,n){var l=e.entangledLanes|=n;for(e=e.entanglements;l;){var a=31-xt(l),d=1<<a;d&n|e[a]&n&&(e[a]|=n),l&=~d}}function bt(e,n){var l=n&-n;return l=(l&42)!==0?1:Ii(l),(l&(e.suspendedLanes|n))!==0?0:l}function Ii(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Qo(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ts(){var e=K.p;return e!==0?e:(e=window.event,e===void 0?32:mp(e.type))}function ns(e,n){var l=K.p;try{return K.p=e,n()}finally{K.p=l}}var ln=Math.random().toString(36).slice(2),A="__reactFiber$"+ln,k="__reactProps$"+ln,ue="__reactContainer$"+ln,Ae="__reactEvents$"+ln,Ie="__reactListeners$"+ln,Ue="__reactHandles$"+ln,It="__reactResources$"+ln,Xe="__reactMarker$"+ln;function Cn(e){delete e[A],delete e[k],delete e[Ae],delete e[Ie],delete e[Ue]}function Ce(e){var n=e[A];if(n)return n;for(var l=e.parentNode;l;){if(n=l[ue]||l[A]){if(l=n.alternate,n.child!==null||l!==null&&l.child!==null)for(e=Zm(e);e!==null;){if(l=e[A])return l;e=Zm(e)}return n}e=l,l=e.parentNode}return null}function Et(e){if(e=e[A]||e[ue]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Qn(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function xn(e){var n=e[It];return n||(n=e[It]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function et(e){e[Xe]=!0}var is=new Set,$o={};function gn(e,n){$n(e,n),$n(e+"Capture",n)}function $n(e,n){for($o[e]=n,e=0;e<n.length;e++)is.add(n[e])}var Zo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ot={},sn={};function Ba(e){return Ke.call(sn,e)?!0:Ke.call(ot,e)?!1:Zo.test(e)?sn[e]=!0:(ot[e]=!0,!1)}function Zn(e,n,l){if(Ba(n))if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var a=n.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+l)}}function no(e,n,l){if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+l)}}function An(e,n,l,a){if(a===null)e.removeAttribute(l);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(n,l,""+a)}}function Jt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Lc(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function gv(e,n,l){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return d.call(this)},set:function(S){l=""+S,p.call(this,S)}}),Object.defineProperty(e,n,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function za(e){if(!e._valueTracker){var n=Lc(e)?"checked":"value";e._valueTracker=gv(e,n,""+e[n])}}function Gc(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var l=n.getValue(),a="";return e&&(a=Lc(e)?e.checked?"true":"false":e.value),e=a,e!==l?(n.setValue(e),!0):!1}function os(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var vv=/[\n"\\]/g;function Yt(e){return e.replace(vv,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Oa(e,n,l,a,d,p,S,C){e.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.type=S:e.removeAttribute("type"),n!=null?S==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Jt(n)):e.value!==""+Jt(n)&&(e.value=""+Jt(n)):S!=="submit"&&S!=="reset"||e.removeAttribute("value"),n!=null?Fa(e,S,Jt(n)):l!=null?Fa(e,S,Jt(l)):a!=null&&e.removeAttribute("value"),d==null&&p!=null&&(e.defaultChecked=!!p),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?e.name=""+Jt(C):e.removeAttribute("name")}function Pc(e,n,l,a,d,p,S,C){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.type=p),n!=null||l!=null){if(!(p!=="submit"&&p!=="reset"||n!=null)){za(e);return}l=l!=null?""+Jt(l):"",n=n!=null?""+Jt(n):l,C||n===e.value||(e.value=n),e.defaultValue=n}a=a??d,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=C?e.checked:!!a,e.defaultChecked=!!a,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(e.name=S),za(e)}function Fa(e,n,l){n==="number"&&os(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function io(e,n,l,a){if(e=e.options,n){n={};for(var d=0;d<l.length;d++)n["$"+l[d]]=!0;for(l=0;l<e.length;l++)d=n.hasOwnProperty("$"+e[l].value),e[l].selected!==d&&(e[l].selected=d),d&&a&&(e[l].defaultSelected=!0)}else{for(l=""+Jt(l),n=null,d=0;d<e.length;d++){if(e[d].value===l){e[d].selected=!0,a&&(e[d].defaultSelected=!0);return}n!==null||e[d].disabled||(n=e[d])}n!==null&&(n.selected=!0)}}function Hc(e,n,l){if(n!=null&&(n=""+Jt(n),n!==e.value&&(e.value=n),l==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=l!=null?""+Jt(l):""}function Vc(e,n,l,a){if(n==null){if(a!=null){if(l!=null)throw Error(s(92));if(Ye(a)){if(1<a.length)throw Error(s(93));a=a[0]}l=a}l==null&&(l=""),n=l}l=Jt(n),e.defaultValue=l,a=e.textContent,a===l&&a!==""&&a!==null&&(e.value=a),za(e)}function oo(e,n){if(n){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=n;return}}e.textContent=n}var yv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qc(e,n,l){var a=n.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?a?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":a?e.setProperty(n,l):typeof l!="number"||l===0||yv.has(n)?n==="float"?e.cssFloat=l:e[n]=(""+l).trim():e[n]=l+"px"}function kc(e,n,l){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,l!=null){for(var a in l)!l.hasOwnProperty(a)||n!=null&&n.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var d in n)a=n[d],n.hasOwnProperty(d)&&l[d]!==a&&qc(e,d,a)}else for(var p in n)n.hasOwnProperty(p)&&qc(e,p,n[p])}function Ja(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ls(e){return Tv.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Nn(){}var Ya=null;function Ka(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var lo=null,so=null;function Bc(e){var n=Et(e);if(n&&(e=n.stateNode)){var l=e[k]||null;e:switch(e=n.stateNode,n.type){case"input":if(Oa(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),n=l.name,l.type==="radio"&&n!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Yt(""+n)+'"][type="radio"]'),n=0;n<l.length;n++){var a=l[n];if(a!==e&&a.form===e.form){var d=a[k]||null;if(!d)throw Error(s(90));Oa(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(n=0;n<l.length;n++)a=l[n],a.form===e.form&&Gc(a)}break e;case"textarea":Hc(e,l.value,l.defaultValue);break e;case"select":n=l.value,n!=null&&io(e,!!l.multiple,n,!1)}}}var Xa=!1;function zc(e,n,l){if(Xa)return e(n,l);Xa=!0;try{var a=e(n);return a}finally{if(Xa=!1,(lo!==null||so!==null)&&(Ys(),lo&&(n=lo,e=so,so=lo=null,Bc(n),e)))for(n=0;n<e.length;n++)Bc(e[n])}}function Wo(e,n){var l=e.stateNode;if(l===null)return null;var a=l[k]||null;if(a===null)return null;l=a[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(s(231,n,typeof l));return l}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qa=!1;if(Rn)try{var jo={};Object.defineProperty(jo,"passive",{get:function(){Qa=!0}}),window.addEventListener("test",jo,jo),window.removeEventListener("test",jo,jo)}catch{Qa=!1}var Wn=null,$a=null,ss=null;function Oc(){if(ss)return ss;var e,n=$a,l=n.length,a,d="value"in Wn?Wn.value:Wn.textContent,p=d.length;for(e=0;e<l&&n[e]===d[e];e++);var S=l-e;for(a=1;a<=S&&n[l-a]===d[p-a];a++);return ss=d.slice(e,1<a?1-a:void 0)}function as(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function rs(){return!0}function Fc(){return!1}function wt(e){function n(l,a,d,p,S){this._reactName=l,this._targetInst=d,this.type=a,this.nativeEvent=p,this.target=S,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(l=e[C],this[C]=l?l(p):p[C]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?rs:Fc,this.isPropagationStopped=Fc,this}return E(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=rs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=rs)},persist:function(){},isPersistent:rs}),n}var wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},us=wt(wi),el=E({},wi,{view:0,detail:0}),Ev=wt(el),Za,Wa,tl,cs=E({},el,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:er,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tl&&(tl&&e.type==="mousemove"?(Za=e.screenX-tl.screenX,Wa=e.screenY-tl.screenY):Wa=Za=0,tl=e),Za)},movementY:function(e){return"movementY"in e?e.movementY:Wa}}),Jc=wt(cs),_v=E({},cs,{dataTransfer:0}),Cv=wt(_v),xv=E({},el,{relatedTarget:0}),ja=wt(xv),Av=E({},wi,{animationName:0,elapsedTime:0,pseudoElement:0}),Nv=wt(Av),Rv=E({},wi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Mv=wt(Rv),bv=E({},wi,{data:0}),Yc=wt(bv),Iv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uv(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Dv[e])?!!n[e]:!1}function er(){return Uv}var Lv=E({},el,{key:function(e){if(e.key){var n=Iv[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=as(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:er,charCode:function(e){return e.type==="keypress"?as(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?as(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Gv=wt(Lv),Pv=E({},cs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kc=wt(Pv),Hv=E({},el,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:er}),Vv=wt(Hv),qv=E({},wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),kv=wt(qv),Bv=E({},cs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zv=wt(Bv),Ov=E({},wi,{newState:0,oldState:0}),Fv=wt(Ov),Jv=[9,13,27,32],tr=Rn&&"CompositionEvent"in window,nl=null;Rn&&"documentMode"in document&&(nl=document.documentMode);var Yv=Rn&&"TextEvent"in window&&!nl,Xc=Rn&&(!tr||nl&&8<nl&&11>=nl),Qc=" ",$c=!1;function Zc(e,n){switch(e){case"keyup":return Jv.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ao=!1;function Kv(e,n){switch(e){case"compositionend":return Wc(n);case"keypress":return n.which!==32?null:($c=!0,Qc);case"textInput":return e=n.data,e===Qc&&$c?null:e;default:return null}}function Xv(e,n){if(ao)return e==="compositionend"||!tr&&Zc(e,n)?(e=Oc(),ss=$a=Wn=null,ao=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Xc&&n.locale!=="ko"?null:n.data;default:return null}}var Qv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Qv[e.type]:n==="textarea"}function ef(e,n,l,a){lo?so?so.push(a):so=[a]:lo=a,n=js(n,"onChange"),0<n.length&&(l=new us("onChange","change",null,l,a),e.push({event:l,listeners:n}))}var il=null,ol=null;function $v(e){Hm(e,0)}function fs(e){var n=Qn(e);if(Gc(n))return e}function tf(e,n){if(e==="change")return n}var nf=!1;if(Rn){var nr;if(Rn){var ir="oninput"in document;if(!ir){var of=document.createElement("div");of.setAttribute("oninput","return;"),ir=typeof of.oninput=="function"}nr=ir}else nr=!1;nf=nr&&(!document.documentMode||9<document.documentMode)}function lf(){il&&(il.detachEvent("onpropertychange",sf),ol=il=null)}function sf(e){if(e.propertyName==="value"&&fs(ol)){var n=[];ef(n,ol,e,Ka(e)),zc($v,n)}}function Zv(e,n,l){e==="focusin"?(lf(),il=n,ol=l,il.attachEvent("onpropertychange",sf)):e==="focusout"&&lf()}function Wv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fs(ol)}function jv(e,n){if(e==="click")return fs(n)}function ey(e,n){if(e==="input"||e==="change")return fs(n)}function ty(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Vt=typeof Object.is=="function"?Object.is:ty;function ll(e,n){if(Vt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var l=Object.keys(e),a=Object.keys(n);if(l.length!==a.length)return!1;for(a=0;a<l.length;a++){var d=l[a];if(!Ke.call(n,d)||!Vt(e[d],n[d]))return!1}return!0}function af(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rf(e,n){var l=af(e);e=0;for(var a;l;){if(l.nodeType===3){if(a=e+l.textContent.length,e<=n&&a>=n)return{node:l,offset:n-e};e=a}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=af(l)}}function uf(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?uf(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function cf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=os(e.document);n instanceof e.HTMLIFrameElement;){try{var l=typeof n.contentWindow.location.href=="string"}catch{l=!1}if(l)e=n.contentWindow;else break;n=os(e.document)}return n}function or(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var ny=Rn&&"documentMode"in document&&11>=document.documentMode,ro=null,lr=null,sl=null,sr=!1;function ff(e,n,l){var a=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;sr||ro==null||ro!==os(a)||(a=ro,"selectionStart"in a&&or(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),sl&&ll(sl,a)||(sl=a,a=js(lr,"onSelect"),0<a.length&&(n=new us("onSelect","select",null,n,l),e.push({event:n,listeners:a}),n.target=ro)))}function Di(e,n){var l={};return l[e.toLowerCase()]=n.toLowerCase(),l["Webkit"+e]="webkit"+n,l["Moz"+e]="moz"+n,l}var uo={animationend:Di("Animation","AnimationEnd"),animationiteration:Di("Animation","AnimationIteration"),animationstart:Di("Animation","AnimationStart"),transitionrun:Di("Transition","TransitionRun"),transitionstart:Di("Transition","TransitionStart"),transitioncancel:Di("Transition","TransitionCancel"),transitionend:Di("Transition","TransitionEnd")},ar={},df={};Rn&&(df=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function Ui(e){if(ar[e])return ar[e];if(!uo[e])return e;var n=uo[e],l;for(l in n)if(n.hasOwnProperty(l)&&l in df)return ar[e]=n[l];return e}var mf=Ui("animationend"),pf=Ui("animationiteration"),hf=Ui("animationstart"),iy=Ui("transitionrun"),oy=Ui("transitionstart"),ly=Ui("transitioncancel"),gf=Ui("transitionend"),vf=new Map,rr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rr.push("scrollEnd");function an(e,n){vf.set(e,n),gn(n,[e])}var ds=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Kt=[],co=0,ur=0;function ms(){for(var e=co,n=ur=co=0;n<e;){var l=Kt[n];Kt[n++]=null;var a=Kt[n];Kt[n++]=null;var d=Kt[n];Kt[n++]=null;var p=Kt[n];if(Kt[n++]=null,a!==null&&d!==null){var S=a.pending;S===null?d.next=d:(d.next=S.next,S.next=d),a.pending=d}p!==0&&yf(l,d,p)}}function ps(e,n,l,a){Kt[co++]=e,Kt[co++]=n,Kt[co++]=l,Kt[co++]=a,ur|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function cr(e,n,l,a){return ps(e,n,l,a),hs(e)}function Li(e,n){return ps(e,null,null,n),hs(e)}function yf(e,n,l){e.lanes|=l;var a=e.alternate;a!==null&&(a.lanes|=l);for(var d=!1,p=e.return;p!==null;)p.childLanes|=l,a=p.alternate,a!==null&&(a.childLanes|=l),p.tag===22&&(e=p.stateNode,e===null||e._visibility&1||(d=!0)),e=p,p=p.return;return e.tag===3?(p=e.stateNode,d&&n!==null&&(d=31-xt(l),e=p.hiddenUpdates,a=e[d],a===null?e[d]=[n]:a.push(n),n.lane=l|536870912),p):null}function hs(e){if(50<Ml)throw Ml=0,Su=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var fo={};function sy(e,n,l,a){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(e,n,l,a){return new sy(e,n,l,a)}function fr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Mn(e,n){var l=e.alternate;return l===null?(l=qt(e.tag,n,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=n,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,n=e.dependencies,l.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function Sf(e,n){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,n=l.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function gs(e,n,l,a,d,p){var S=0;if(a=e,typeof e=="function")fr(e)&&(S=1);else if(typeof e=="string")S=f0(e,l,ie.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case X:return e=qt(31,l,n,d),e.elementType=X,e.lanes=p,e;case w:return Gi(l.children,d,p,n);case D:S=8,d|=24;break;case V:return e=qt(12,l,n,d|2),e.elementType=V,e.lanes=p,e;case le:return e=qt(13,l,n,d),e.elementType=le,e.lanes=p,e;case ae:return e=qt(19,l,n,d),e.elementType=ae,e.lanes=p,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case J:S=10;break e;case $:S=9;break e;case Z:S=11;break e;case Q:S=14;break e;case Y:S=16,a=null;break e}S=29,l=Error(s(130,e===null?"null":typeof e,"")),a=null}return n=qt(S,l,n,d),n.elementType=e,n.type=a,n.lanes=p,n}function Gi(e,n,l,a){return e=qt(7,e,a,n),e.lanes=l,e}function dr(e,n,l){return e=qt(6,e,null,n),e.lanes=l,e}function Tf(e){var n=qt(18,null,null,0);return n.stateNode=e,n}function mr(e,n,l){return n=qt(4,e.children!==null?e.children:[],e.key,n),n.lanes=l,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Ef=new WeakMap;function Xt(e,n){if(typeof e=="object"&&e!==null){var l=Ef.get(e);return l!==void 0?l:(n={value:e,source:n,stack:ee(n)},Ef.set(e,n),n)}return{value:e,source:n,stack:ee(n)}}var mo=[],po=0,vs=null,al=0,Qt=[],$t=0,jn=null,vn=1,yn="";function bn(e,n){mo[po++]=al,mo[po++]=vs,vs=e,al=n}function _f(e,n,l){Qt[$t++]=vn,Qt[$t++]=yn,Qt[$t++]=jn,jn=e;var a=vn;e=yn;var d=32-xt(a)-1;a&=~(1<<d),l+=1;var p=32-xt(n)+d;if(30<p){var S=d-d%5;p=(a&(1<<S)-1).toString(32),a>>=S,d-=S,vn=1<<32-xt(n)+d|l<<d|a,yn=p+e}else vn=1<<p|l<<d|a,yn=e}function pr(e){e.return!==null&&(bn(e,1),_f(e,1,0))}function hr(e){for(;e===vs;)vs=mo[--po],mo[po]=null,al=mo[--po],mo[po]=null;for(;e===jn;)jn=Qt[--$t],Qt[$t]=null,yn=Qt[--$t],Qt[$t]=null,vn=Qt[--$t],Qt[$t]=null}function Cf(e,n){Qt[$t++]=vn,Qt[$t++]=yn,Qt[$t++]=jn,vn=n.id,yn=n.overflow,jn=e}var vt=null,Qe=null,we=!1,ei=null,Zt=!1,gr=Error(s(519));function ti(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw rl(Xt(n,e)),gr}function xf(e){var n=e.stateNode,l=e.type,a=e.memoizedProps;switch(n[A]=e,n[k]=a,l){case"dialog":Re("cancel",n),Re("close",n);break;case"iframe":case"object":case"embed":Re("load",n);break;case"video":case"audio":for(l=0;l<Il.length;l++)Re(Il[l],n);break;case"source":Re("error",n);break;case"img":case"image":case"link":Re("error",n),Re("load",n);break;case"details":Re("toggle",n);break;case"input":Re("invalid",n),Pc(n,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":Re("invalid",n);break;case"textarea":Re("invalid",n),Vc(n,a.value,a.defaultValue,a.children)}l=a.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||n.textContent===""+l||a.suppressHydrationWarning===!0||Bm(n.textContent,l)?(a.popover!=null&&(Re("beforetoggle",n),Re("toggle",n)),a.onScroll!=null&&Re("scroll",n),a.onScrollEnd!=null&&Re("scrollend",n),a.onClick!=null&&(n.onclick=Nn),n=!0):n=!1,n||ti(e,!0)}function Af(e){for(vt=e.return;vt;)switch(vt.tag){case 5:case 31:case 13:Zt=!1;return;case 27:case 3:Zt=!0;return;default:vt=vt.return}}function ho(e){if(e!==vt)return!1;if(!we)return Af(e),we=!0,!1;var n=e.tag,l;if((l=n!==3&&n!==27)&&((l=n===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||Lu(e.type,e.memoizedProps)),l=!l),l&&Qe&&ti(e),Af(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Qe=$m(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Qe=$m(e)}else n===27?(n=Qe,hi(e.type)?(e=qu,qu=null,Qe=e):Qe=n):Qe=vt?jt(e.stateNode.nextSibling):null;return!0}function Pi(){Qe=vt=null,we=!1}function vr(){var e=ei;return e!==null&&(Gt===null?Gt=e:Gt.push.apply(Gt,e),ei=null),e}function rl(e){ei===null?ei=[e]:ei.push(e)}var yr=R(null),Hi=null,In=null;function ni(e,n,l){j(yr,n._currentValue),n._currentValue=l}function wn(e){e._currentValue=yr.current,z(yr)}function Sr(e,n,l){for(;e!==null;){var a=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,a!==null&&(a.childLanes|=n)):a!==null&&(a.childLanes&n)!==n&&(a.childLanes|=n),e===l)break;e=e.return}}function Tr(e,n,l,a){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var p=d.dependencies;if(p!==null){var S=d.child;p=p.firstContext;e:for(;p!==null;){var C=p;p=d;for(var N=0;N<n.length;N++)if(C.context===n[N]){p.lanes|=l,C=p.alternate,C!==null&&(C.lanes|=l),Sr(p.return,l,e),a||(S=null);break e}p=C.next}}else if(d.tag===18){if(S=d.return,S===null)throw Error(s(341));S.lanes|=l,p=S.alternate,p!==null&&(p.lanes|=l),Sr(S,l,e),S=null}else S=d.child;if(S!==null)S.return=d;else for(S=d;S!==null;){if(S===e){S=null;break}if(d=S.sibling,d!==null){d.return=S.return,S=d;break}S=S.return}d=S}}function go(e,n,l,a){e=null;for(var d=n,p=!1;d!==null;){if(!p){if((d.flags&524288)!==0)p=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var S=d.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var C=d.type;Vt(d.pendingProps.value,S.value)||(e!==null?e.push(C):e=[C])}}else if(d===De.current){if(S=d.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Gl):e=[Gl])}d=d.return}e!==null&&Tr(n,e,l,a),n.flags|=262144}function ys(e){for(e=e.firstContext;e!==null;){if(!Vt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Vi(e){Hi=e,In=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function yt(e){return Nf(Hi,e)}function Ss(e,n){return Hi===null&&Vi(e),Nf(e,n)}function Nf(e,n){var l=n._currentValue;if(n={context:n,memoizedValue:l,next:null},In===null){if(e===null)throw Error(s(308));In=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else In=In.next=n;return l}var ay=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(l,a){e.push(a)}};this.abort=function(){n.aborted=!0,e.forEach(function(l){return l()})}},ry=i.unstable_scheduleCallback,uy=i.unstable_NormalPriority,at={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Er(){return{controller:new ay,data:new Map,refCount:0}}function ul(e){e.refCount--,e.refCount===0&&ry(uy,function(){e.controller.abort()})}var cl=null,_r=0,vo=0,yo=null;function cy(e,n){if(cl===null){var l=cl=[];_r=0,vo=Au(),yo={status:"pending",value:void 0,then:function(a){l.push(a)}}}return _r++,n.then(Rf,Rf),n}function Rf(){if(--_r===0&&cl!==null){yo!==null&&(yo.status="fulfilled");var e=cl;cl=null,vo=0,yo=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function fy(e,n){var l=[],a={status:"pending",value:null,reason:null,then:function(d){l.push(d)}};return e.then(function(){a.status="fulfilled",a.value=n;for(var d=0;d<l.length;d++)(0,l[d])(n)},function(d){for(a.status="rejected",a.reason=d,d=0;d<l.length;d++)(0,l[d])(void 0)}),a}var Mf=P.S;P.S=function(e,n){fm=ft(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&cy(e,n),Mf!==null&&Mf(e,n)};var qi=R(null);function Cr(){var e=qi.current;return e!==null?e:Je.pooledCache}function Ts(e,n){n===null?j(qi,qi.current):j(qi,n.pool)}function bf(){var e=Cr();return e===null?null:{parent:at._currentValue,pool:e}}var So=Error(s(460)),xr=Error(s(474)),Es=Error(s(542)),_s={then:function(){}};function If(e){return e=e.status,e==="fulfilled"||e==="rejected"}function wf(e,n,l){switch(l=e[l],l===void 0?e.push(n):l!==n&&(n.then(Nn,Nn),n=l),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Uf(e),e;default:if(typeof n.status=="string")n.then(Nn,Nn);else{if(e=Je,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(a){if(n.status==="pending"){var d=n;d.status="fulfilled",d.value=a}},function(a){if(n.status==="pending"){var d=n;d.status="rejected",d.reason=a}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Uf(e),e}throw Bi=n,So}}function ki(e){try{var n=e._init;return n(e._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Bi=l,So):l}}var Bi=null;function Df(){if(Bi===null)throw Error(s(459));var e=Bi;return Bi=null,e}function Uf(e){if(e===So||e===Es)throw Error(s(483))}var To=null,fl=0;function Cs(e){var n=fl;return fl+=1,To===null&&(To=[]),wf(To,e,n)}function dl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function xs(e,n){throw n.$$typeof===_?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Lf(e){function n(b,M){if(e){var U=b.deletions;U===null?(b.deletions=[M],b.flags|=16):U.push(M)}}function l(b,M){if(!e)return null;for(;M!==null;)n(b,M),M=M.sibling;return null}function a(b){for(var M=new Map;b!==null;)b.key!==null?M.set(b.key,b):M.set(b.index,b),b=b.sibling;return M}function d(b,M){return b=Mn(b,M),b.index=0,b.sibling=null,b}function p(b,M,U){return b.index=U,e?(U=b.alternate,U!==null?(U=U.index,U<M?(b.flags|=67108866,M):U):(b.flags|=67108866,M)):(b.flags|=1048576,M)}function S(b){return e&&b.alternate===null&&(b.flags|=67108866),b}function C(b,M,U,O){return M===null||M.tag!==6?(M=dr(U,b.mode,O),M.return=b,M):(M=d(M,U),M.return=b,M)}function N(b,M,U,O){var fe=U.type;return fe===w?B(b,M,U.props.children,O,U.key):M!==null&&(M.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===Y&&ki(fe)===M.type)?(M=d(M,U.props),dl(M,U),M.return=b,M):(M=gs(U.type,U.key,U.props,null,b.mode,O),dl(M,U),M.return=b,M)}function L(b,M,U,O){return M===null||M.tag!==4||M.stateNode.containerInfo!==U.containerInfo||M.stateNode.implementation!==U.implementation?(M=mr(U,b.mode,O),M.return=b,M):(M=d(M,U.children||[]),M.return=b,M)}function B(b,M,U,O,fe){return M===null||M.tag!==7?(M=Gi(U,b.mode,O,fe),M.return=b,M):(M=d(M,U),M.return=b,M)}function F(b,M,U){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=dr(""+M,b.mode,U),M.return=b,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case x:return U=gs(M.type,M.key,M.props,null,b.mode,U),dl(U,M),U.return=b,U;case I:return M=mr(M,b.mode,U),M.return=b,M;case Y:return M=ki(M),F(b,M,U)}if(Ye(M)||pe(M))return M=Gi(M,b.mode,U,null),M.return=b,M;if(typeof M.then=="function")return F(b,Cs(M),U);if(M.$$typeof===J)return F(b,Ss(b,M),U);xs(b,M)}return null}function G(b,M,U,O){var fe=M!==null?M.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return fe!==null?null:C(b,M,""+U,O);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case x:return U.key===fe?N(b,M,U,O):null;case I:return U.key===fe?L(b,M,U,O):null;case Y:return U=ki(U),G(b,M,U,O)}if(Ye(U)||pe(U))return fe!==null?null:B(b,M,U,O,null);if(typeof U.then=="function")return G(b,M,Cs(U),O);if(U.$$typeof===J)return G(b,M,Ss(b,U),O);xs(b,U)}return null}function H(b,M,U,O,fe){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return b=b.get(U)||null,C(M,b,""+O,fe);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case x:return b=b.get(O.key===null?U:O.key)||null,N(M,b,O,fe);case I:return b=b.get(O.key===null?U:O.key)||null,L(M,b,O,fe);case Y:return O=ki(O),H(b,M,U,O,fe)}if(Ye(O)||pe(O))return b=b.get(U)||null,B(M,b,O,fe,null);if(typeof O.then=="function")return H(b,M,U,Cs(O),fe);if(O.$$typeof===J)return H(b,M,U,Ss(M,O),fe);xs(M,O)}return null}function re(b,M,U,O){for(var fe=null,Le=null,ce=M,Te=M=0,be=null;ce!==null&&Te<U.length;Te++){ce.index>Te?(be=ce,ce=null):be=ce.sibling;var Ge=G(b,ce,U[Te],O);if(Ge===null){ce===null&&(ce=be);break}e&&ce&&Ge.alternate===null&&n(b,ce),M=p(Ge,M,Te),Le===null?fe=Ge:Le.sibling=Ge,Le=Ge,ce=be}if(Te===U.length)return l(b,ce),we&&bn(b,Te),fe;if(ce===null){for(;Te<U.length;Te++)ce=F(b,U[Te],O),ce!==null&&(M=p(ce,M,Te),Le===null?fe=ce:Le.sibling=ce,Le=ce);return we&&bn(b,Te),fe}for(ce=a(ce);Te<U.length;Te++)be=H(ce,b,Te,U[Te],O),be!==null&&(e&&be.alternate!==null&&ce.delete(be.key===null?Te:be.key),M=p(be,M,Te),Le===null?fe=be:Le.sibling=be,Le=be);return e&&ce.forEach(function(Ti){return n(b,Ti)}),we&&bn(b,Te),fe}function de(b,M,U,O){if(U==null)throw Error(s(151));for(var fe=null,Le=null,ce=M,Te=M=0,be=null,Ge=U.next();ce!==null&&!Ge.done;Te++,Ge=U.next()){ce.index>Te?(be=ce,ce=null):be=ce.sibling;var Ti=G(b,ce,Ge.value,O);if(Ti===null){ce===null&&(ce=be);break}e&&ce&&Ti.alternate===null&&n(b,ce),M=p(Ti,M,Te),Le===null?fe=Ti:Le.sibling=Ti,Le=Ti,ce=be}if(Ge.done)return l(b,ce),we&&bn(b,Te),fe;if(ce===null){for(;!Ge.done;Te++,Ge=U.next())Ge=F(b,Ge.value,O),Ge!==null&&(M=p(Ge,M,Te),Le===null?fe=Ge:Le.sibling=Ge,Le=Ge);return we&&bn(b,Te),fe}for(ce=a(ce);!Ge.done;Te++,Ge=U.next())Ge=H(ce,b,Te,Ge.value,O),Ge!==null&&(e&&Ge.alternate!==null&&ce.delete(Ge.key===null?Te:Ge.key),M=p(Ge,M,Te),Le===null?fe=Ge:Le.sibling=Ge,Le=Ge);return e&&ce.forEach(function(_0){return n(b,_0)}),we&&bn(b,Te),fe}function ze(b,M,U,O){if(typeof U=="object"&&U!==null&&U.type===w&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case x:e:{for(var fe=U.key;M!==null;){if(M.key===fe){if(fe=U.type,fe===w){if(M.tag===7){l(b,M.sibling),O=d(M,U.props.children),O.return=b,b=O;break e}}else if(M.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===Y&&ki(fe)===M.type){l(b,M.sibling),O=d(M,U.props),dl(O,U),O.return=b,b=O;break e}l(b,M);break}else n(b,M);M=M.sibling}U.type===w?(O=Gi(U.props.children,b.mode,O,U.key),O.return=b,b=O):(O=gs(U.type,U.key,U.props,null,b.mode,O),dl(O,U),O.return=b,b=O)}return S(b);case I:e:{for(fe=U.key;M!==null;){if(M.key===fe)if(M.tag===4&&M.stateNode.containerInfo===U.containerInfo&&M.stateNode.implementation===U.implementation){l(b,M.sibling),O=d(M,U.children||[]),O.return=b,b=O;break e}else{l(b,M);break}else n(b,M);M=M.sibling}O=mr(U,b.mode,O),O.return=b,b=O}return S(b);case Y:return U=ki(U),ze(b,M,U,O)}if(Ye(U))return re(b,M,U,O);if(pe(U)){if(fe=pe(U),typeof fe!="function")throw Error(s(150));return U=fe.call(U),de(b,M,U,O)}if(typeof U.then=="function")return ze(b,M,Cs(U),O);if(U.$$typeof===J)return ze(b,M,Ss(b,U),O);xs(b,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,M!==null&&M.tag===6?(l(b,M.sibling),O=d(M,U),O.return=b,b=O):(l(b,M),O=dr(U,b.mode,O),O.return=b,b=O),S(b)):l(b,M)}return function(b,M,U,O){try{fl=0;var fe=ze(b,M,U,O);return To=null,fe}catch(ce){if(ce===So||ce===Es)throw ce;var Le=qt(29,ce,null,b.mode);return Le.lanes=O,Le.return=b,Le}finally{}}}var zi=Lf(!0),Gf=Lf(!1),ii=!1;function Ar(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nr(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function oi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function li(e,n,l){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(He&2)!==0){var d=a.pending;return d===null?n.next=n:(n.next=d.next,d.next=n),a.pending=n,n=hs(e),yf(e,null,l),n}return ps(e,a,n,l),hs(e)}function ml(e,n,l){if(n=n.updateQueue,n!==null&&(n=n.shared,(l&4194048)!==0)){var a=n.lanes;a&=e.pendingLanes,l|=a,n.lanes=l,es(e,l)}}function Rr(e,n){var l=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,l===a)){var d=null,p=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};p===null?d=p=S:p=p.next=S,l=l.next}while(l!==null);p===null?d=p=n:p=p.next=n}else d=p=n;l={baseState:a.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:a.shared,callbacks:a.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=n:e.next=n,l.lastBaseUpdate=n}var Mr=!1;function pl(){if(Mr){var e=yo;if(e!==null)throw e}}function hl(e,n,l,a){Mr=!1;var d=e.updateQueue;ii=!1;var p=d.firstBaseUpdate,S=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var N=C,L=N.next;N.next=null,S===null?p=L:S.next=L,S=N;var B=e.alternate;B!==null&&(B=B.updateQueue,C=B.lastBaseUpdate,C!==S&&(C===null?B.firstBaseUpdate=L:C.next=L,B.lastBaseUpdate=N))}if(p!==null){var F=d.baseState;S=0,B=L=N=null,C=p;do{var G=C.lane&-536870913,H=G!==C.lane;if(H?(Me&G)===G:(a&G)===G){G!==0&&G===vo&&(Mr=!0),B!==null&&(B=B.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var re=e,de=C;G=n;var ze=l;switch(de.tag){case 1:if(re=de.payload,typeof re=="function"){F=re.call(ze,F,G);break e}F=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=de.payload,G=typeof re=="function"?re.call(ze,F,G):re,G==null)break e;F=E({},F,G);break e;case 2:ii=!0}}G=C.callback,G!==null&&(e.flags|=64,H&&(e.flags|=8192),H=d.callbacks,H===null?d.callbacks=[G]:H.push(G))}else H={lane:G,tag:C.tag,payload:C.payload,callback:C.callback,next:null},B===null?(L=B=H,N=F):B=B.next=H,S|=G;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;H=C,C=H.next,H.next=null,d.lastBaseUpdate=H,d.shared.pending=null}}while(!0);B===null&&(N=F),d.baseState=N,d.firstBaseUpdate=L,d.lastBaseUpdate=B,p===null&&(d.shared.lanes=0),ci|=S,e.lanes=S,e.memoizedState=F}}function Pf(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function Hf(e,n){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)Pf(l[e],n)}var Eo=R(null),As=R(0);function Vf(e,n){e=kn,j(As,e),j(Eo,n),kn=e|n.baseLanes}function br(){j(As,kn),j(Eo,Eo.current)}function Ir(){kn=As.current,z(Eo),z(As)}var kt=R(null),Wt=null;function si(e){var n=e.alternate;j(lt,lt.current&1),j(kt,e),Wt===null&&(n===null||Eo.current!==null||n.memoizedState!==null)&&(Wt=e)}function wr(e){j(lt,lt.current),j(kt,e),Wt===null&&(Wt=e)}function qf(e){e.tag===22?(j(lt,lt.current),j(kt,e),Wt===null&&(Wt=e)):ai()}function ai(){j(lt,lt.current),j(kt,kt.current)}function Bt(e){z(kt),Wt===e&&(Wt=null),z(lt)}var lt=R(0);function Ns(e){for(var n=e;n!==null;){if(n.tag===13){var l=n.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Hu(l)||Vu(l)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Dn=0,Se=null,ke=null,rt=null,Rs=!1,_o=!1,Oi=!1,Ms=0,gl=0,Co=null,dy=0;function tt(){throw Error(s(321))}function Dr(e,n){if(n===null)return!1;for(var l=0;l<n.length&&l<e.length;l++)if(!Vt(e[l],n[l]))return!1;return!0}function Ur(e,n,l,a,d,p){return Dn=p,Se=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,P.H=e===null||e.memoizedState===null?_d:Xr,Oi=!1,p=l(a,d),Oi=!1,_o&&(p=Bf(n,l,a,d)),kf(e),p}function kf(e){P.H=Sl;var n=ke!==null&&ke.next!==null;if(Dn=0,rt=ke=Se=null,Rs=!1,gl=0,Co=null,n)throw Error(s(300));e===null||ut||(e=e.dependencies,e!==null&&ys(e)&&(ut=!0))}function Bf(e,n,l,a){Se=e;var d=0;do{if(_o&&(Co=null),gl=0,_o=!1,25<=d)throw Error(s(301));if(d+=1,rt=ke=null,e.updateQueue!=null){var p=e.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}P.H=Cd,p=n(l,a)}while(_o);return p}function my(){var e=P.H,n=e.useState()[0];return n=typeof n.then=="function"?vl(n):n,e=e.useState()[0],(ke!==null?ke.memoizedState:null)!==e&&(Se.flags|=1024),n}function Lr(){var e=Ms!==0;return Ms=0,e}function Gr(e,n,l){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~l}function Pr(e){if(Rs){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Rs=!1}Dn=0,rt=ke=Se=null,_o=!1,gl=Ms=0,Co=null}function At(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Se.memoizedState=rt=e:rt=rt.next=e,rt}function st(){if(ke===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=ke.next;var n=rt===null?Se.memoizedState:rt.next;if(n!==null)rt=n,ke=e;else{if(e===null)throw Se.alternate===null?Error(s(467)):Error(s(310));ke=e,e={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},rt===null?Se.memoizedState=rt=e:rt=rt.next=e}return rt}function bs(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vl(e){var n=gl;return gl+=1,Co===null&&(Co=[]),e=wf(Co,e,n),n=Se,(rt===null?n.memoizedState:rt.next)===null&&(n=n.alternate,P.H=n===null||n.memoizedState===null?_d:Xr),e}function Is(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return vl(e);if(e.$$typeof===J)return yt(e)}throw Error(s(438,String(e)))}function Hr(e){var n=null,l=Se.updateQueue;if(l!==null&&(n=l.memoCache),n==null){var a=Se.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(n={data:a.data.map(function(d){return d.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),l===null&&(l=bs(),Se.updateQueue=l),l.memoCache=n,l=n.data[n.index],l===void 0)for(l=n.data[n.index]=Array(e),a=0;a<e;a++)l[a]=oe;return n.index++,l}function Un(e,n){return typeof n=="function"?n(e):n}function ws(e){var n=st();return Vr(n,ke,e)}function Vr(e,n,l){var a=e.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=l;var d=e.baseQueue,p=a.pending;if(p!==null){if(d!==null){var S=d.next;d.next=p.next,p.next=S}n.baseQueue=d=p,a.pending=null}if(p=e.baseState,d===null)e.memoizedState=p;else{n=d.next;var C=S=null,N=null,L=n,B=!1;do{var F=L.lane&-536870913;if(F!==L.lane?(Me&F)===F:(Dn&F)===F){var G=L.revertLane;if(G===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),F===vo&&(B=!0);else if((Dn&G)===G){L=L.next,G===vo&&(B=!0);continue}else F={lane:0,revertLane:L.revertLane,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},N===null?(C=N=F,S=p):N=N.next=F,Se.lanes|=G,ci|=G;F=L.action,Oi&&l(p,F),p=L.hasEagerState?L.eagerState:l(p,F)}else G={lane:F,revertLane:L.revertLane,gesture:L.gesture,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},N===null?(C=N=G,S=p):N=N.next=G,Se.lanes|=F,ci|=F;L=L.next}while(L!==null&&L!==n);if(N===null?S=p:N.next=C,!Vt(p,e.memoizedState)&&(ut=!0,B&&(l=yo,l!==null)))throw l;e.memoizedState=p,e.baseState=S,e.baseQueue=N,a.lastRenderedState=p}return d===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function qr(e){var n=st(),l=n.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=e;var a=l.dispatch,d=l.pending,p=n.memoizedState;if(d!==null){l.pending=null;var S=d=d.next;do p=e(p,S.action),S=S.next;while(S!==d);Vt(p,n.memoizedState)||(ut=!0),n.memoizedState=p,n.baseQueue===null&&(n.baseState=p),l.lastRenderedState=p}return[p,a]}function zf(e,n,l){var a=Se,d=st(),p=we;if(p){if(l===void 0)throw Error(s(407));l=l()}else l=n();var S=!Vt((ke||d).memoizedState,l);if(S&&(d.memoizedState=l,ut=!0),d=d.queue,zr(Jf.bind(null,a,d,e),[e]),d.getSnapshot!==n||S||rt!==null&&rt.memoizedState.tag&1){if(a.flags|=2048,xo(9,{destroy:void 0},Ff.bind(null,a,d,l,n),null),Je===null)throw Error(s(349));p||(Dn&127)!==0||Of(a,n,l)}return l}function Of(e,n,l){e.flags|=16384,e={getSnapshot:n,value:l},n=Se.updateQueue,n===null?(n=bs(),Se.updateQueue=n,n.stores=[e]):(l=n.stores,l===null?n.stores=[e]:l.push(e))}function Ff(e,n,l,a){n.value=l,n.getSnapshot=a,Yf(n)&&Kf(e)}function Jf(e,n,l){return l(function(){Yf(n)&&Kf(e)})}function Yf(e){var n=e.getSnapshot;e=e.value;try{var l=n();return!Vt(e,l)}catch{return!0}}function Kf(e){var n=Li(e,2);n!==null&&Pt(n,e,2)}function kr(e){var n=At();if(typeof e=="function"){var l=e;if(e=l(),Oi){hn(!0);try{l()}finally{hn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Un,lastRenderedState:e},n}function Xf(e,n,l,a){return e.baseState=l,Vr(e,ke,typeof a=="function"?a:Un)}function py(e,n,l,a,d){if(Ls(e))throw Error(s(485));if(e=n.action,e!==null){var p={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){p.listeners.push(S)}};P.T!==null?l(!0):p.isTransition=!1,a(p),l=n.pending,l===null?(p.next=n.pending=p,Qf(n,p)):(p.next=l.next,n.pending=l.next=p)}}function Qf(e,n){var l=n.action,a=n.payload,d=e.state;if(n.isTransition){var p=P.T,S={};P.T=S;try{var C=l(d,a),N=P.S;N!==null&&N(S,C),$f(e,n,C)}catch(L){Br(e,n,L)}finally{p!==null&&S.types!==null&&(p.types=S.types),P.T=p}}else try{p=l(d,a),$f(e,n,p)}catch(L){Br(e,n,L)}}function $f(e,n,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(a){Zf(e,n,a)},function(a){return Br(e,n,a)}):Zf(e,n,l)}function Zf(e,n,l){n.status="fulfilled",n.value=l,Wf(n),e.state=l,n=e.pending,n!==null&&(l=n.next,l===n?e.pending=null:(l=l.next,n.next=l,Qf(e,l)))}function Br(e,n,l){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do n.status="rejected",n.reason=l,Wf(n),n=n.next;while(n!==a)}e.action=null}function Wf(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function jf(e,n){return n}function ed(e,n){if(we){var l=Je.formState;if(l!==null){e:{var a=Se;if(we){if(Qe){t:{for(var d=Qe,p=Zt;d.nodeType!==8;){if(!p){d=null;break t}if(d=jt(d.nextSibling),d===null){d=null;break t}}p=d.data,d=p==="F!"||p==="F"?d:null}if(d){Qe=jt(d.nextSibling),a=d.data==="F!";break e}}ti(a)}a=!1}a&&(n=l[0])}}return l=At(),l.memoizedState=l.baseState=n,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jf,lastRenderedState:n},l.queue=a,l=Sd.bind(null,Se,a),a.dispatch=l,a=kr(!1),p=Kr.bind(null,Se,!1,a.queue),a=At(),d={state:n,dispatch:null,action:e,pending:null},a.queue=d,l=py.bind(null,Se,d,p,l),d.dispatch=l,a.memoizedState=e,[n,l,!1]}function td(e){var n=st();return nd(n,ke,e)}function nd(e,n,l){if(n=Vr(e,n,jf)[0],e=ws(Un)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var a=vl(n)}catch(S){throw S===So?Es:S}else a=n;n=st();var d=n.queue,p=d.dispatch;return l!==n.memoizedState&&(Se.flags|=2048,xo(9,{destroy:void 0},hy.bind(null,d,l),null)),[a,p,e]}function hy(e,n){e.action=n}function id(e){var n=st(),l=ke;if(l!==null)return nd(n,l,e);st(),n=n.memoizedState,l=st();var a=l.queue.dispatch;return l.memoizedState=e,[n,a,!1]}function xo(e,n,l,a){return e={tag:e,create:l,deps:a,inst:n,next:null},n=Se.updateQueue,n===null&&(n=bs(),Se.updateQueue=n),l=n.lastEffect,l===null?n.lastEffect=e.next=e:(a=l.next,l.next=e,e.next=a,n.lastEffect=e),e}function od(){return st().memoizedState}function Ds(e,n,l,a){var d=At();Se.flags|=e,d.memoizedState=xo(1|n,{destroy:void 0},l,a===void 0?null:a)}function Us(e,n,l,a){var d=st();a=a===void 0?null:a;var p=d.memoizedState.inst;ke!==null&&a!==null&&Dr(a,ke.memoizedState.deps)?d.memoizedState=xo(n,p,l,a):(Se.flags|=e,d.memoizedState=xo(1|n,p,l,a))}function ld(e,n){Ds(8390656,8,e,n)}function zr(e,n){Us(2048,8,e,n)}function gy(e){Se.flags|=4;var n=Se.updateQueue;if(n===null)n=bs(),Se.updateQueue=n,n.events=[e];else{var l=n.events;l===null?n.events=[e]:l.push(e)}}function sd(e){var n=st().memoizedState;return gy({ref:n,nextImpl:e}),function(){if((He&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function ad(e,n){return Us(4,2,e,n)}function rd(e,n){return Us(4,4,e,n)}function ud(e,n){if(typeof n=="function"){e=e();var l=n(e);return function(){typeof l=="function"?l():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function cd(e,n,l){l=l!=null?l.concat([e]):null,Us(4,4,ud.bind(null,n,e),l)}function Or(){}function fd(e,n){var l=st();n=n===void 0?null:n;var a=l.memoizedState;return n!==null&&Dr(n,a[1])?a[0]:(l.memoizedState=[e,n],e)}function dd(e,n){var l=st();n=n===void 0?null:n;var a=l.memoizedState;if(n!==null&&Dr(n,a[1]))return a[0];if(a=e(),Oi){hn(!0);try{e()}finally{hn(!1)}}return l.memoizedState=[a,n],a}function Fr(e,n,l){return l===void 0||(Dn&1073741824)!==0&&(Me&261930)===0?e.memoizedState=n:(e.memoizedState=l,e=mm(),Se.lanes|=e,ci|=e,l)}function md(e,n,l,a){return Vt(l,n)?l:Eo.current!==null?(e=Fr(e,l,a),Vt(e,n)||(ut=!0),e):(Dn&42)===0||(Dn&1073741824)!==0&&(Me&261930)===0?(ut=!0,e.memoizedState=l):(e=mm(),Se.lanes|=e,ci|=e,n)}function pd(e,n,l,a,d){var p=K.p;K.p=p!==0&&8>p?p:8;var S=P.T,C={};P.T=C,Kr(e,!1,n,l);try{var N=d(),L=P.S;if(L!==null&&L(C,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var B=fy(N,a);yl(e,n,B,Ft(e))}else yl(e,n,a,Ft(e))}catch(F){yl(e,n,{then:function(){},status:"rejected",reason:F},Ft())}finally{K.p=p,S!==null&&C.types!==null&&(S.types=C.types),P.T=S}}function vy(){}function Jr(e,n,l,a){if(e.tag!==5)throw Error(s(476));var d=hd(e).queue;pd(e,d,n,q,l===null?vy:function(){return gd(e),l(a)})}function hd(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Un,lastRenderedState:q},next:null};var l={};return n.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Un,lastRenderedState:l},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function gd(e){var n=hd(e);n.next===null&&(n=e.alternate.memoizedState),yl(e,n.next.queue,{},Ft())}function Yr(){return yt(Gl)}function vd(){return st().memoizedState}function yd(){return st().memoizedState}function yy(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var l=Ft();e=oi(l);var a=li(n,e,l);a!==null&&(Pt(a,n,l),ml(a,n,l)),n={cache:Er()},e.payload=n;return}n=n.return}}function Sy(e,n,l){var a=Ft();l={lane:a,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ls(e)?Td(n,l):(l=cr(e,n,l,a),l!==null&&(Pt(l,e,a),Ed(l,n,a)))}function Sd(e,n,l){var a=Ft();yl(e,n,l,a)}function yl(e,n,l,a){var d={lane:a,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ls(e))Td(n,d);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=n.lastRenderedReducer,p!==null))try{var S=n.lastRenderedState,C=p(S,l);if(d.hasEagerState=!0,d.eagerState=C,Vt(C,S))return ps(e,n,d,0),Je===null&&ms(),!1}catch{}finally{}if(l=cr(e,n,d,a),l!==null)return Pt(l,e,a),Ed(l,n,a),!0}return!1}function Kr(e,n,l,a){if(a={lane:2,revertLane:Au(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ls(e)){if(n)throw Error(s(479))}else n=cr(e,l,a,2),n!==null&&Pt(n,e,2)}function Ls(e){var n=e.alternate;return e===Se||n!==null&&n===Se}function Td(e,n){_o=Rs=!0;var l=e.pending;l===null?n.next=n:(n.next=l.next,l.next=n),e.pending=n}function Ed(e,n,l){if((l&4194048)!==0){var a=n.lanes;a&=e.pendingLanes,l|=a,n.lanes=l,es(e,l)}}var Sl={readContext:yt,use:Is,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useLayoutEffect:tt,useInsertionEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useSyncExternalStore:tt,useId:tt,useHostTransitionStatus:tt,useFormState:tt,useActionState:tt,useOptimistic:tt,useMemoCache:tt,useCacheRefresh:tt};Sl.useEffectEvent=tt;var _d={readContext:yt,use:Is,useCallback:function(e,n){return At().memoizedState=[e,n===void 0?null:n],e},useContext:yt,useEffect:ld,useImperativeHandle:function(e,n,l){l=l!=null?l.concat([e]):null,Ds(4194308,4,ud.bind(null,n,e),l)},useLayoutEffect:function(e,n){return Ds(4194308,4,e,n)},useInsertionEffect:function(e,n){Ds(4,2,e,n)},useMemo:function(e,n){var l=At();n=n===void 0?null:n;var a=e();if(Oi){hn(!0);try{e()}finally{hn(!1)}}return l.memoizedState=[a,n],a},useReducer:function(e,n,l){var a=At();if(l!==void 0){var d=l(n);if(Oi){hn(!0);try{l(n)}finally{hn(!1)}}}else d=n;return a.memoizedState=a.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},a.queue=e,e=e.dispatch=Sy.bind(null,Se,e),[a.memoizedState,e]},useRef:function(e){var n=At();return e={current:e},n.memoizedState=e},useState:function(e){e=kr(e);var n=e.queue,l=Sd.bind(null,Se,n);return n.dispatch=l,[e.memoizedState,l]},useDebugValue:Or,useDeferredValue:function(e,n){var l=At();return Fr(l,e,n)},useTransition:function(){var e=kr(!1);return e=pd.bind(null,Se,e.queue,!0,!1),At().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,l){var a=Se,d=At();if(we){if(l===void 0)throw Error(s(407));l=l()}else{if(l=n(),Je===null)throw Error(s(349));(Me&127)!==0||Of(a,n,l)}d.memoizedState=l;var p={value:l,getSnapshot:n};return d.queue=p,ld(Jf.bind(null,a,p,e),[e]),a.flags|=2048,xo(9,{destroy:void 0},Ff.bind(null,a,p,l,n),null),l},useId:function(){var e=At(),n=Je.identifierPrefix;if(we){var l=yn,a=vn;l=(a&~(1<<32-xt(a)-1)).toString(32)+l,n="_"+n+"R_"+l,l=Ms++,0<l&&(n+="H"+l.toString(32)),n+="_"}else l=dy++,n="_"+n+"r_"+l.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Yr,useFormState:ed,useActionState:ed,useOptimistic:function(e){var n=At();n.memoizedState=n.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=l,n=Kr.bind(null,Se,!0,l),l.dispatch=n,[e,n]},useMemoCache:Hr,useCacheRefresh:function(){return At().memoizedState=yy.bind(null,Se)},useEffectEvent:function(e){var n=At(),l={impl:e};return n.memoizedState=l,function(){if((He&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},Xr={readContext:yt,use:Is,useCallback:fd,useContext:yt,useEffect:zr,useImperativeHandle:cd,useInsertionEffect:ad,useLayoutEffect:rd,useMemo:dd,useReducer:ws,useRef:od,useState:function(){return ws(Un)},useDebugValue:Or,useDeferredValue:function(e,n){var l=st();return md(l,ke.memoizedState,e,n)},useTransition:function(){var e=ws(Un)[0],n=st().memoizedState;return[typeof e=="boolean"?e:vl(e),n]},useSyncExternalStore:zf,useId:vd,useHostTransitionStatus:Yr,useFormState:td,useActionState:td,useOptimistic:function(e,n){var l=st();return Xf(l,ke,e,n)},useMemoCache:Hr,useCacheRefresh:yd};Xr.useEffectEvent=sd;var Cd={readContext:yt,use:Is,useCallback:fd,useContext:yt,useEffect:zr,useImperativeHandle:cd,useInsertionEffect:ad,useLayoutEffect:rd,useMemo:dd,useReducer:qr,useRef:od,useState:function(){return qr(Un)},useDebugValue:Or,useDeferredValue:function(e,n){var l=st();return ke===null?Fr(l,e,n):md(l,ke.memoizedState,e,n)},useTransition:function(){var e=qr(Un)[0],n=st().memoizedState;return[typeof e=="boolean"?e:vl(e),n]},useSyncExternalStore:zf,useId:vd,useHostTransitionStatus:Yr,useFormState:id,useActionState:id,useOptimistic:function(e,n){var l=st();return ke!==null?Xf(l,ke,e,n):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:Hr,useCacheRefresh:yd};Cd.useEffectEvent=sd;function Qr(e,n,l,a){n=e.memoizedState,l=l(a,n),l=l==null?n:E({},n,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var $r={enqueueSetState:function(e,n,l){e=e._reactInternals;var a=Ft(),d=oi(a);d.payload=n,l!=null&&(d.callback=l),n=li(e,d,a),n!==null&&(Pt(n,e,a),ml(n,e,a))},enqueueReplaceState:function(e,n,l){e=e._reactInternals;var a=Ft(),d=oi(a);d.tag=1,d.payload=n,l!=null&&(d.callback=l),n=li(e,d,a),n!==null&&(Pt(n,e,a),ml(n,e,a))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var l=Ft(),a=oi(l);a.tag=2,n!=null&&(a.callback=n),n=li(e,a,l),n!==null&&(Pt(n,e,l),ml(n,e,l))}};function xd(e,n,l,a,d,p,S){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,p,S):n.prototype&&n.prototype.isPureReactComponent?!ll(l,a)||!ll(d,p):!0}function Ad(e,n,l,a){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(l,a),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(l,a),n.state!==e&&$r.enqueueReplaceState(n,n.state,null)}function Fi(e,n){var l=n;if("ref"in n){l={};for(var a in n)a!=="ref"&&(l[a]=n[a])}if(e=e.defaultProps){l===n&&(l=E({},l));for(var d in e)l[d]===void 0&&(l[d]=e[d])}return l}function Nd(e){ds(e)}function Rd(e){console.error(e)}function Md(e){ds(e)}function Gs(e,n){try{var l=e.onUncaughtError;l(n.value,{componentStack:n.stack})}catch(a){setTimeout(function(){throw a})}}function bd(e,n,l){try{var a=e.onCaughtError;a(l.value,{componentStack:l.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Zr(e,n,l){return l=oi(l),l.tag=3,l.payload={element:null},l.callback=function(){Gs(e,n)},l}function Id(e){return e=oi(e),e.tag=3,e}function wd(e,n,l,a){var d=l.type.getDerivedStateFromError;if(typeof d=="function"){var p=a.value;e.payload=function(){return d(p)},e.callback=function(){bd(n,l,a)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(e.callback=function(){bd(n,l,a),typeof d!="function"&&(fi===null?fi=new Set([this]):fi.add(this));var C=a.stack;this.componentDidCatch(a.value,{componentStack:C!==null?C:""})})}function Ty(e,n,l,a,d){if(l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(n=l.alternate,n!==null&&go(n,l,d,!0),l=kt.current,l!==null){switch(l.tag){case 31:case 13:return Wt===null?Ks():l.alternate===null&&nt===0&&(nt=3),l.flags&=-257,l.flags|=65536,l.lanes=d,a===_s?l.flags|=16384:(n=l.updateQueue,n===null?l.updateQueue=new Set([a]):n.add(a),_u(e,a,d)),!1;case 22:return l.flags|=65536,a===_s?l.flags|=16384:(n=l.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([a])},l.updateQueue=n):(l=n.retryQueue,l===null?n.retryQueue=new Set([a]):l.add(a)),_u(e,a,d)),!1}throw Error(s(435,l.tag))}return _u(e,a,d),Ks(),!1}if(we)return n=kt.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=d,a!==gr&&(e=Error(s(422),{cause:a}),rl(Xt(e,l)))):(a!==gr&&(n=Error(s(423),{cause:a}),rl(Xt(n,l))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,a=Xt(a,l),d=Zr(e.stateNode,a,d),Rr(e,d),nt!==4&&(nt=2)),!1;var p=Error(s(520),{cause:a});if(p=Xt(p,l),Rl===null?Rl=[p]:Rl.push(p),nt!==4&&(nt=2),n===null)return!0;a=Xt(a,l),l=n;do{switch(l.tag){case 3:return l.flags|=65536,e=d&-d,l.lanes|=e,e=Zr(l.stateNode,a,e),Rr(l,e),!1;case 1:if(n=l.type,p=l.stateNode,(l.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(fi===null||!fi.has(p))))return l.flags|=65536,d&=-d,l.lanes|=d,d=Id(d),wd(d,e,l,a),Rr(l,d),!1}l=l.return}while(l!==null);return!1}var Wr=Error(s(461)),ut=!1;function St(e,n,l,a){n.child=e===null?Gf(n,null,l,a):zi(n,e.child,l,a)}function Dd(e,n,l,a,d){l=l.render;var p=n.ref;if("ref"in a){var S={};for(var C in a)C!=="ref"&&(S[C]=a[C])}else S=a;return Vi(n),a=Ur(e,n,l,S,p,d),C=Lr(),e!==null&&!ut?(Gr(e,n,d),Ln(e,n,d)):(we&&C&&pr(n),n.flags|=1,St(e,n,a,d),n.child)}function Ud(e,n,l,a,d){if(e===null){var p=l.type;return typeof p=="function"&&!fr(p)&&p.defaultProps===void 0&&l.compare===null?(n.tag=15,n.type=p,Ld(e,n,p,a,d)):(e=gs(l.type,null,a,n,n.mode,d),e.ref=n.ref,e.return=n,n.child=e)}if(p=e.child,!su(e,d)){var S=p.memoizedProps;if(l=l.compare,l=l!==null?l:ll,l(S,a)&&e.ref===n.ref)return Ln(e,n,d)}return n.flags|=1,e=Mn(p,a),e.ref=n.ref,e.return=n,n.child=e}function Ld(e,n,l,a,d){if(e!==null){var p=e.memoizedProps;if(ll(p,a)&&e.ref===n.ref)if(ut=!1,n.pendingProps=a=p,su(e,d))(e.flags&131072)!==0&&(ut=!0);else return n.lanes=e.lanes,Ln(e,n,d)}return jr(e,n,l,a,d)}function Gd(e,n,l,a){var d=a.children,p=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((n.flags&128)!==0){if(p=p!==null?p.baseLanes|l:l,e!==null){for(a=n.child=e.child,d=0;a!==null;)d=d|a.lanes|a.childLanes,a=a.sibling;a=d&~p}else a=0,n.child=null;return Pd(e,n,p,l,a)}if((l&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ts(n,p!==null?p.cachePool:null),p!==null?Vf(n,p):br(),qf(n);else return a=n.lanes=536870912,Pd(e,n,p!==null?p.baseLanes|l:l,l,a)}else p!==null?(Ts(n,p.cachePool),Vf(n,p),ai(),n.memoizedState=null):(e!==null&&Ts(n,null),br(),ai());return St(e,n,d,l),n.child}function Tl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Pd(e,n,l,a,d){var p=Cr();return p=p===null?null:{parent:at._currentValue,pool:p},n.memoizedState={baseLanes:l,cachePool:p},e!==null&&Ts(n,null),br(),qf(n),e!==null&&go(e,n,a,!0),n.childLanes=d,null}function Ps(e,n){return n=Vs({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Hd(e,n,l){return zi(n,e.child,null,l),e=Ps(n,n.pendingProps),e.flags|=2,Bt(n),n.memoizedState=null,e}function Ey(e,n,l){var a=n.pendingProps,d=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(we){if(a.mode==="hidden")return e=Ps(n,a),n.lanes=536870912,Tl(null,e);if(wr(n),(e=Qe)?(e=Qm(e,Zt),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:jn!==null?{id:vn,overflow:yn}:null,retryLane:536870912,hydrationErrors:null},l=Tf(e),l.return=n,n.child=l,vt=n,Qe=null)):e=null,e===null)throw ti(n);return n.lanes=536870912,null}return Ps(n,a)}var p=e.memoizedState;if(p!==null){var S=p.dehydrated;if(wr(n),d)if(n.flags&256)n.flags&=-257,n=Hd(e,n,l);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(ut||go(e,n,l,!1),d=(l&e.childLanes)!==0,ut||d){if(a=Je,a!==null&&(S=bt(a,l),S!==0&&S!==p.retryLane))throw p.retryLane=S,Li(e,S),Pt(a,e,S),Wr;Ks(),n=Hd(e,n,l)}else e=p.treeContext,Qe=jt(S.nextSibling),vt=n,we=!0,ei=null,Zt=!1,e!==null&&Cf(n,e),n=Ps(n,a),n.flags|=4096;return n}return e=Mn(e.child,{mode:a.mode,children:a.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Hs(e,n){var l=n.ref;if(l===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(e===null||e.ref!==l)&&(n.flags|=4194816)}}function jr(e,n,l,a,d){return Vi(n),l=Ur(e,n,l,a,void 0,d),a=Lr(),e!==null&&!ut?(Gr(e,n,d),Ln(e,n,d)):(we&&a&&pr(n),n.flags|=1,St(e,n,l,d),n.child)}function Vd(e,n,l,a,d,p){return Vi(n),n.updateQueue=null,l=Bf(n,a,l,d),kf(e),a=Lr(),e!==null&&!ut?(Gr(e,n,p),Ln(e,n,p)):(we&&a&&pr(n),n.flags|=1,St(e,n,l,p),n.child)}function qd(e,n,l,a,d){if(Vi(n),n.stateNode===null){var p=fo,S=l.contextType;typeof S=="object"&&S!==null&&(p=yt(S)),p=new l(a,p),n.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=$r,n.stateNode=p,p._reactInternals=n,p=n.stateNode,p.props=a,p.state=n.memoizedState,p.refs={},Ar(n),S=l.contextType,p.context=typeof S=="object"&&S!==null?yt(S):fo,p.state=n.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(Qr(n,l,S,a),p.state=n.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(S=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),S!==p.state&&$r.enqueueReplaceState(p,p.state,null),hl(n,a,p,d),pl(),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308),a=!0}else if(e===null){p=n.stateNode;var C=n.memoizedProps,N=Fi(l,C);p.props=N;var L=p.context,B=l.contextType;S=fo,typeof B=="object"&&B!==null&&(S=yt(B));var F=l.getDerivedStateFromProps;B=typeof F=="function"||typeof p.getSnapshotBeforeUpdate=="function",C=n.pendingProps!==C,B||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(C||L!==S)&&Ad(n,p,a,S),ii=!1;var G=n.memoizedState;p.state=G,hl(n,a,p,d),pl(),L=n.memoizedState,C||G!==L||ii?(typeof F=="function"&&(Qr(n,l,F,a),L=n.memoizedState),(N=ii||xd(n,l,N,a,G,L,S))?(B||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(n.flags|=4194308)):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=a,n.memoizedState=L),p.props=a,p.state=L,p.context=S,a=N):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),a=!1)}else{p=n.stateNode,Nr(e,n),S=n.memoizedProps,B=Fi(l,S),p.props=B,F=n.pendingProps,G=p.context,L=l.contextType,N=fo,typeof L=="object"&&L!==null&&(N=yt(L)),C=l.getDerivedStateFromProps,(L=typeof C=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(S!==F||G!==N)&&Ad(n,p,a,N),ii=!1,G=n.memoizedState,p.state=G,hl(n,a,p,d),pl();var H=n.memoizedState;S!==F||G!==H||ii||e!==null&&e.dependencies!==null&&ys(e.dependencies)?(typeof C=="function"&&(Qr(n,l,C,a),H=n.memoizedState),(B=ii||xd(n,l,B,a,G,H,N)||e!==null&&e.dependencies!==null&&ys(e.dependencies))?(L||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(a,H,N),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(a,H,N)),typeof p.componentDidUpdate=="function"&&(n.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof p.componentDidUpdate!="function"||S===e.memoizedProps&&G===e.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&G===e.memoizedState||(n.flags|=1024),n.memoizedProps=a,n.memoizedState=H),p.props=a,p.state=H,p.context=N,a=B):(typeof p.componentDidUpdate!="function"||S===e.memoizedProps&&G===e.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&G===e.memoizedState||(n.flags|=1024),a=!1)}return p=a,Hs(e,n),a=(n.flags&128)!==0,p||a?(p=n.stateNode,l=a&&typeof l.getDerivedStateFromError!="function"?null:p.render(),n.flags|=1,e!==null&&a?(n.child=zi(n,e.child,null,d),n.child=zi(n,null,l,d)):St(e,n,l,d),n.memoizedState=p.state,e=n.child):e=Ln(e,n,d),e}function kd(e,n,l,a){return Pi(),n.flags|=256,St(e,n,l,a),n.child}var eu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tu(e){return{baseLanes:e,cachePool:bf()}}function nu(e,n,l){return e=e!==null?e.childLanes&~l:0,n&&(e|=Ot),e}function Bd(e,n,l){var a=n.pendingProps,d=!1,p=(n.flags&128)!==0,S;if((S=p)||(S=e!==null&&e.memoizedState===null?!1:(lt.current&2)!==0),S&&(d=!0,n.flags&=-129),S=(n.flags&32)!==0,n.flags&=-33,e===null){if(we){if(d?si(n):ai(),(e=Qe)?(e=Qm(e,Zt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:jn!==null?{id:vn,overflow:yn}:null,retryLane:536870912,hydrationErrors:null},l=Tf(e),l.return=n,n.child=l,vt=n,Qe=null)):e=null,e===null)throw ti(n);return Vu(e)?n.lanes=32:n.lanes=536870912,null}var C=a.children;return a=a.fallback,d?(ai(),d=n.mode,C=Vs({mode:"hidden",children:C},d),a=Gi(a,d,l,null),C.return=n,a.return=n,C.sibling=a,n.child=C,a=n.child,a.memoizedState=tu(l),a.childLanes=nu(e,S,l),n.memoizedState=eu,Tl(null,a)):(si(n),iu(n,C))}var N=e.memoizedState;if(N!==null&&(C=N.dehydrated,C!==null)){if(p)n.flags&256?(si(n),n.flags&=-257,n=ou(e,n,l)):n.memoizedState!==null?(ai(),n.child=e.child,n.flags|=128,n=null):(ai(),C=a.fallback,d=n.mode,a=Vs({mode:"visible",children:a.children},d),C=Gi(C,d,l,null),C.flags|=2,a.return=n,C.return=n,a.sibling=C,n.child=a,zi(n,e.child,null,l),a=n.child,a.memoizedState=tu(l),a.childLanes=nu(e,S,l),n.memoizedState=eu,n=Tl(null,a));else if(si(n),Vu(C)){if(S=C.nextSibling&&C.nextSibling.dataset,S)var L=S.dgst;S=L,a=Error(s(419)),a.stack="",a.digest=S,rl({value:a,source:null,stack:null}),n=ou(e,n,l)}else if(ut||go(e,n,l,!1),S=(l&e.childLanes)!==0,ut||S){if(S=Je,S!==null&&(a=bt(S,l),a!==0&&a!==N.retryLane))throw N.retryLane=a,Li(e,a),Pt(S,e,a),Wr;Hu(C)||Ks(),n=ou(e,n,l)}else Hu(C)?(n.flags|=192,n.child=e.child,n=null):(e=N.treeContext,Qe=jt(C.nextSibling),vt=n,we=!0,ei=null,Zt=!1,e!==null&&Cf(n,e),n=iu(n,a.children),n.flags|=4096);return n}return d?(ai(),C=a.fallback,d=n.mode,N=e.child,L=N.sibling,a=Mn(N,{mode:"hidden",children:a.children}),a.subtreeFlags=N.subtreeFlags&65011712,L!==null?C=Mn(L,C):(C=Gi(C,d,l,null),C.flags|=2),C.return=n,a.return=n,a.sibling=C,n.child=a,Tl(null,a),a=n.child,C=e.child.memoizedState,C===null?C=tu(l):(d=C.cachePool,d!==null?(N=at._currentValue,d=d.parent!==N?{parent:N,pool:N}:d):d=bf(),C={baseLanes:C.baseLanes|l,cachePool:d}),a.memoizedState=C,a.childLanes=nu(e,S,l),n.memoizedState=eu,Tl(e.child,a)):(si(n),l=e.child,e=l.sibling,l=Mn(l,{mode:"visible",children:a.children}),l.return=n,l.sibling=null,e!==null&&(S=n.deletions,S===null?(n.deletions=[e],n.flags|=16):S.push(e)),n.child=l,n.memoizedState=null,l)}function iu(e,n){return n=Vs({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Vs(e,n){return e=qt(22,e,null,n),e.lanes=0,e}function ou(e,n,l){return zi(n,e.child,null,l),e=iu(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function zd(e,n,l){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n),Sr(e.return,n,l)}function lu(e,n,l,a,d,p){var S=e.memoizedState;S===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:a,tail:l,tailMode:d,treeForkCount:p}:(S.isBackwards=n,S.rendering=null,S.renderingStartTime=0,S.last=a,S.tail=l,S.tailMode=d,S.treeForkCount=p)}function Od(e,n,l){var a=n.pendingProps,d=a.revealOrder,p=a.tail;a=a.children;var S=lt.current,C=(S&2)!==0;if(C?(S=S&1|2,n.flags|=128):S&=1,j(lt,S),St(e,n,a,l),a=we?al:0,!C&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zd(e,l,n);else if(e.tag===19)zd(e,l,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(l=n.child,d=null;l!==null;)e=l.alternate,e!==null&&Ns(e)===null&&(d=l),l=l.sibling;l=d,l===null?(d=n.child,n.child=null):(d=l.sibling,l.sibling=null),lu(n,!1,d,l,p,a);break;case"backwards":case"unstable_legacy-backwards":for(l=null,d=n.child,n.child=null;d!==null;){if(e=d.alternate,e!==null&&Ns(e)===null){n.child=d;break}e=d.sibling,d.sibling=l,l=d,d=e}lu(n,!0,l,null,p,a);break;case"together":lu(n,!1,null,null,void 0,a);break;default:n.memoizedState=null}return n.child}function Ln(e,n,l){if(e!==null&&(n.dependencies=e.dependencies),ci|=n.lanes,(l&n.childLanes)===0)if(e!==null){if(go(e,n,l,!1),(l&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,l=Mn(e,e.pendingProps),n.child=l,l.return=n;e.sibling!==null;)e=e.sibling,l=l.sibling=Mn(e,e.pendingProps),l.return=n;l.sibling=null}return n.child}function su(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&ys(e)))}function _y(e,n,l){switch(n.tag){case 3:je(n,n.stateNode.containerInfo),ni(n,at,e.memoizedState.cache),Pi();break;case 27:case 5:Mt(n);break;case 4:je(n,n.stateNode.containerInfo);break;case 10:ni(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,wr(n),null;break;case 13:var a=n.memoizedState;if(a!==null)return a.dehydrated!==null?(si(n),n.flags|=128,null):(l&n.child.childLanes)!==0?Bd(e,n,l):(si(n),e=Ln(e,n,l),e!==null?e.sibling:null);si(n);break;case 19:var d=(e.flags&128)!==0;if(a=(l&n.childLanes)!==0,a||(go(e,n,l,!1),a=(l&n.childLanes)!==0),d){if(a)return Od(e,n,l);n.flags|=128}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),j(lt,lt.current),a)break;return null;case 22:return n.lanes=0,Gd(e,n,l,n.pendingProps);case 24:ni(n,at,e.memoizedState.cache)}return Ln(e,n,l)}function Fd(e,n,l){if(e!==null)if(e.memoizedProps!==n.pendingProps)ut=!0;else{if(!su(e,l)&&(n.flags&128)===0)return ut=!1,_y(e,n,l);ut=(e.flags&131072)!==0}else ut=!1,we&&(n.flags&1048576)!==0&&_f(n,al,n.index);switch(n.lanes=0,n.tag){case 16:e:{var a=n.pendingProps;if(e=ki(n.elementType),n.type=e,typeof e=="function")fr(e)?(a=Fi(e,a),n.tag=1,n=qd(null,n,e,a,l)):(n.tag=0,n=jr(null,n,e,a,l));else{if(e!=null){var d=e.$$typeof;if(d===Z){n.tag=11,n=Dd(null,n,e,a,l);break e}else if(d===Q){n.tag=14,n=Ud(null,n,e,a,l);break e}}throw n=Ee(e)||e,Error(s(306,n,""))}}return n;case 0:return jr(e,n,n.type,n.pendingProps,l);case 1:return a=n.type,d=Fi(a,n.pendingProps),qd(e,n,a,d,l);case 3:e:{if(je(n,n.stateNode.containerInfo),e===null)throw Error(s(387));a=n.pendingProps;var p=n.memoizedState;d=p.element,Nr(e,n),hl(n,a,null,l);var S=n.memoizedState;if(a=S.cache,ni(n,at,a),a!==p.cache&&Tr(n,[at],l,!0),pl(),a=S.element,p.isDehydrated)if(p={element:a,isDehydrated:!1,cache:S.cache},n.updateQueue.baseState=p,n.memoizedState=p,n.flags&256){n=kd(e,n,a,l);break e}else if(a!==d){d=Xt(Error(s(424)),n),rl(d),n=kd(e,n,a,l);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Qe=jt(e.firstChild),vt=n,we=!0,ei=null,Zt=!0,l=Gf(n,null,a,l),n.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Pi(),a===d){n=Ln(e,n,l);break e}St(e,n,a,l)}n=n.child}return n;case 26:return Hs(e,n),e===null?(l=tp(n.type,null,n.pendingProps,null))?n.memoizedState=l:we||(l=n.type,e=n.pendingProps,a=ea(_e.current).createElement(l),a[A]=n,a[k]=e,Tt(a,l,e),et(a),n.stateNode=a):n.memoizedState=tp(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Mt(n),e===null&&we&&(a=n.stateNode=Wm(n.type,n.pendingProps,_e.current),vt=n,Zt=!0,d=Qe,hi(n.type)?(qu=d,Qe=jt(a.firstChild)):Qe=d),St(e,n,n.pendingProps.children,l),Hs(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&we&&((d=a=Qe)&&(a=Wy(a,n.type,n.pendingProps,Zt),a!==null?(n.stateNode=a,vt=n,Qe=jt(a.firstChild),Zt=!1,d=!0):d=!1),d||ti(n)),Mt(n),d=n.type,p=n.pendingProps,S=e!==null?e.memoizedProps:null,a=p.children,Lu(d,p)?a=null:S!==null&&Lu(d,S)&&(n.flags|=32),n.memoizedState!==null&&(d=Ur(e,n,my,null,null,l),Gl._currentValue=d),Hs(e,n),St(e,n,a,l),n.child;case 6:return e===null&&we&&((e=l=Qe)&&(l=jy(l,n.pendingProps,Zt),l!==null?(n.stateNode=l,vt=n,Qe=null,e=!0):e=!1),e||ti(n)),null;case 13:return Bd(e,n,l);case 4:return je(n,n.stateNode.containerInfo),a=n.pendingProps,e===null?n.child=zi(n,null,a,l):St(e,n,a,l),n.child;case 11:return Dd(e,n,n.type,n.pendingProps,l);case 7:return St(e,n,n.pendingProps,l),n.child;case 8:return St(e,n,n.pendingProps.children,l),n.child;case 12:return St(e,n,n.pendingProps.children,l),n.child;case 10:return a=n.pendingProps,ni(n,n.type,a.value),St(e,n,a.children,l),n.child;case 9:return d=n.type._context,a=n.pendingProps.children,Vi(n),d=yt(d),a=a(d),n.flags|=1,St(e,n,a,l),n.child;case 14:return Ud(e,n,n.type,n.pendingProps,l);case 15:return Ld(e,n,n.type,n.pendingProps,l);case 19:return Od(e,n,l);case 31:return Ey(e,n,l);case 22:return Gd(e,n,l,n.pendingProps);case 24:return Vi(n),a=yt(at),e===null?(d=Cr(),d===null&&(d=Je,p=Er(),d.pooledCache=p,p.refCount++,p!==null&&(d.pooledCacheLanes|=l),d=p),n.memoizedState={parent:a,cache:d},Ar(n),ni(n,at,d)):((e.lanes&l)!==0&&(Nr(e,n),hl(n,null,null,l),pl()),d=e.memoizedState,p=n.memoizedState,d.parent!==a?(d={parent:a,cache:a},n.memoizedState=d,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=d),ni(n,at,a)):(a=p.cache,ni(n,at,a),a!==d.cache&&Tr(n,[at],l,!0))),St(e,n,n.pendingProps.children,l),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Gn(e){e.flags|=4}function au(e,n,l,a,d){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(vm())e.flags|=8192;else throw Bi=_s,xr}else e.flags&=-16777217}function Jd(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!sp(n))if(vm())e.flags|=8192;else throw Bi=_s,xr}function qs(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Wl():536870912,e.lanes|=n,Mo|=n)}function El(e,n){if(!we)switch(e.tailMode){case"hidden":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var a=null;l!==null;)l.alternate!==null&&(a=l),l=l.sibling;a===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function $e(e){var n=e.alternate!==null&&e.alternate.child===e.child,l=0,a=0;if(n)for(var d=e.child;d!==null;)l|=d.lanes|d.childLanes,a|=d.subtreeFlags&65011712,a|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)l|=d.lanes|d.childLanes,a|=d.subtreeFlags,a|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=a,e.childLanes=l,n}function Cy(e,n,l){var a=n.pendingProps;switch(hr(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(n),null;case 1:return $e(n),null;case 3:return l=n.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),wn(at),Fe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(ho(n)?Gn(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,vr())),$e(n),null;case 26:var d=n.type,p=n.memoizedState;return e===null?(Gn(n),p!==null?($e(n),Jd(n,p)):($e(n),au(n,d,null,a,l))):p?p!==e.memoizedState?(Gn(n),$e(n),Jd(n,p)):($e(n),n.flags&=-16777217):(e=e.memoizedProps,e!==a&&Gn(n),$e(n),au(n,d,e,a,l)),null;case 27:if(Yn(n),l=_e.current,d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==a&&Gn(n);else{if(!a){if(n.stateNode===null)throw Error(s(166));return $e(n),null}e=ie.current,ho(n)?xf(n):(e=Wm(d,a,l),n.stateNode=e,Gn(n))}return $e(n),null;case 5:if(Yn(n),d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==a&&Gn(n);else{if(!a){if(n.stateNode===null)throw Error(s(166));return $e(n),null}if(p=ie.current,ho(n))xf(n);else{var S=ea(_e.current);switch(p){case 1:p=S.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:p=S.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":p=S.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":p=S.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":p=S.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof a.is=="string"?S.createElement("select",{is:a.is}):S.createElement("select"),a.multiple?p.multiple=!0:a.size&&(p.size=a.size);break;default:p=typeof a.is=="string"?S.createElement(d,{is:a.is}):S.createElement(d)}}p[A]=n,p[k]=a;e:for(S=n.child;S!==null;){if(S.tag===5||S.tag===6)p.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===n)break e;for(;S.sibling===null;){if(S.return===null||S.return===n)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}n.stateNode=p;e:switch(Tt(p,d,a),d){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Gn(n)}}return $e(n),au(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,l),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==a&&Gn(n);else{if(typeof a!="string"&&n.stateNode===null)throw Error(s(166));if(e=_e.current,ho(n)){if(e=n.stateNode,l=n.memoizedProps,a=null,d=vt,d!==null)switch(d.tag){case 27:case 5:a=d.memoizedProps}e[A]=n,e=!!(e.nodeValue===l||a!==null&&a.suppressHydrationWarning===!0||Bm(e.nodeValue,l)),e||ti(n,!0)}else e=ea(e).createTextNode(a),e[A]=n,n.stateNode=e}return $e(n),null;case 31:if(l=n.memoizedState,e===null||e.memoizedState!==null){if(a=ho(n),l!==null){if(e===null){if(!a)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[A]=n}else Pi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;$e(n),e=!1}else l=vr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),e=!0;if(!e)return n.flags&256?(Bt(n),n):(Bt(n),null);if((n.flags&128)!==0)throw Error(s(558))}return $e(n),null;case 13:if(a=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=ho(n),a!==null&&a.dehydrated!==null){if(e===null){if(!d)throw Error(s(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[A]=n}else Pi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;$e(n),d=!1}else d=vr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return n.flags&256?(Bt(n),n):(Bt(n),null)}return Bt(n),(n.flags&128)!==0?(n.lanes=l,n):(l=a!==null,e=e!==null&&e.memoizedState!==null,l&&(a=n.child,d=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(d=a.alternate.memoizedState.cachePool.pool),p=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),p!==d&&(a.flags|=2048)),l!==e&&l&&(n.child.flags|=8192),qs(n,n.updateQueue),$e(n),null);case 4:return Fe(),e===null&&bu(n.stateNode.containerInfo),$e(n),null;case 10:return wn(n.type),$e(n),null;case 19:if(z(lt),a=n.memoizedState,a===null)return $e(n),null;if(d=(n.flags&128)!==0,p=a.rendering,p===null)if(d)El(a,!1);else{if(nt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(p=Ns(e),p!==null){for(n.flags|=128,El(a,!1),e=p.updateQueue,n.updateQueue=e,qs(n,e),n.subtreeFlags=0,e=l,l=n.child;l!==null;)Sf(l,e),l=l.sibling;return j(lt,lt.current&1|2),we&&bn(n,a.treeForkCount),n.child}e=e.sibling}a.tail!==null&&ft()>Fs&&(n.flags|=128,d=!0,El(a,!1),n.lanes=4194304)}else{if(!d)if(e=Ns(p),e!==null){if(n.flags|=128,d=!0,e=e.updateQueue,n.updateQueue=e,qs(n,e),El(a,!0),a.tail===null&&a.tailMode==="hidden"&&!p.alternate&&!we)return $e(n),null}else 2*ft()-a.renderingStartTime>Fs&&l!==536870912&&(n.flags|=128,d=!0,El(a,!1),n.lanes=4194304);a.isBackwards?(p.sibling=n.child,n.child=p):(e=a.last,e!==null?e.sibling=p:n.child=p,a.last=p)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=ft(),e.sibling=null,l=lt.current,j(lt,d?l&1|2:l&1),we&&bn(n,a.treeForkCount),e):($e(n),null);case 22:case 23:return Bt(n),Ir(),a=n.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(n.flags|=8192):a&&(n.flags|=8192),a?(l&536870912)!==0&&(n.flags&128)===0&&($e(n),n.subtreeFlags&6&&(n.flags|=8192)):$e(n),l=n.updateQueue,l!==null&&qs(n,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),a=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),a!==l&&(n.flags|=2048),e!==null&&z(qi),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),wn(at),$e(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function xy(e,n){switch(hr(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return wn(at),Fe(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Yn(n),null;case 31:if(n.memoizedState!==null){if(Bt(n),n.alternate===null)throw Error(s(340));Pi()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Bt(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Pi()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return z(lt),null;case 4:return Fe(),null;case 10:return wn(n.type),null;case 22:case 23:return Bt(n),Ir(),e!==null&&z(qi),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return wn(at),null;case 25:return null;default:return null}}function Yd(e,n){switch(hr(n),n.tag){case 3:wn(at),Fe();break;case 26:case 27:case 5:Yn(n);break;case 4:Fe();break;case 31:n.memoizedState!==null&&Bt(n);break;case 13:Bt(n);break;case 19:z(lt);break;case 10:wn(n.type);break;case 22:case 23:Bt(n),Ir(),e!==null&&z(qi);break;case 24:wn(at)}}function _l(e,n){try{var l=n.updateQueue,a=l!==null?l.lastEffect:null;if(a!==null){var d=a.next;l=d;do{if((l.tag&e)===e){a=void 0;var p=l.create,S=l.inst;a=p(),S.destroy=a}l=l.next}while(l!==d)}}catch(C){qe(n,n.return,C)}}function ri(e,n,l){try{var a=n.updateQueue,d=a!==null?a.lastEffect:null;if(d!==null){var p=d.next;a=p;do{if((a.tag&e)===e){var S=a.inst,C=S.destroy;if(C!==void 0){S.destroy=void 0,d=n;var N=l,L=C;try{L()}catch(B){qe(d,N,B)}}}a=a.next}while(a!==p)}}catch(B){qe(n,n.return,B)}}function Kd(e){var n=e.updateQueue;if(n!==null){var l=e.stateNode;try{Hf(n,l)}catch(a){qe(e,e.return,a)}}}function Xd(e,n,l){l.props=Fi(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(a){qe(e,n,a)}}function Cl(e,n){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof l=="function"?e.refCleanup=l(a):l.current=a}}catch(d){qe(e,n,d)}}function Sn(e,n){var l=e.ref,a=e.refCleanup;if(l!==null)if(typeof a=="function")try{a()}catch(d){qe(e,n,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(d){qe(e,n,d)}else l.current=null}function Qd(e){var n=e.type,l=e.memoizedProps,a=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":l.autoFocus&&a.focus();break e;case"img":l.src?a.src=l.src:l.srcSet&&(a.srcset=l.srcSet)}}catch(d){qe(e,e.return,d)}}function ru(e,n,l){try{var a=e.stateNode;Yy(a,e.type,l,n),a[k]=n}catch(d){qe(e,e.return,d)}}function $d(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&hi(e.type)||e.tag===4}function uu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$d(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&hi(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cu(e,n,l){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,n):(n=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,n.appendChild(e),l=l._reactRootContainer,l!=null||n.onclick!==null||(n.onclick=Nn));else if(a!==4&&(a===27&&hi(e.type)&&(l=e.stateNode,n=null),e=e.child,e!==null))for(cu(e,n,l),e=e.sibling;e!==null;)cu(e,n,l),e=e.sibling}function ks(e,n,l){var a=e.tag;if(a===5||a===6)e=e.stateNode,n?l.insertBefore(e,n):l.appendChild(e);else if(a!==4&&(a===27&&hi(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(ks(e,n,l),e=e.sibling;e!==null;)ks(e,n,l),e=e.sibling}function Zd(e){var n=e.stateNode,l=e.memoizedProps;try{for(var a=e.type,d=n.attributes;d.length;)n.removeAttributeNode(d[0]);Tt(n,a,l),n[A]=e,n[k]=l}catch(p){qe(e,e.return,p)}}var Pn=!1,ct=!1,fu=!1,Wd=typeof WeakSet=="function"?WeakSet:Set,mt=null;function Ay(e,n){if(e=e.containerInfo,Du=aa,e=cf(e),or(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var a=l.getSelection&&l.getSelection();if(a&&a.rangeCount!==0){l=a.anchorNode;var d=a.anchorOffset,p=a.focusNode;a=a.focusOffset;try{l.nodeType,p.nodeType}catch{l=null;break e}var S=0,C=-1,N=-1,L=0,B=0,F=e,G=null;t:for(;;){for(var H;F!==l||d!==0&&F.nodeType!==3||(C=S+d),F!==p||a!==0&&F.nodeType!==3||(N=S+a),F.nodeType===3&&(S+=F.nodeValue.length),(H=F.firstChild)!==null;)G=F,F=H;for(;;){if(F===e)break t;if(G===l&&++L===d&&(C=S),G===p&&++B===a&&(N=S),(H=F.nextSibling)!==null)break;F=G,G=F.parentNode}F=H}l=C===-1||N===-1?null:{start:C,end:N}}else l=null}l=l||{start:0,end:0}}else l=null;for(Uu={focusedElem:e,selectionRange:l},aa=!1,mt=n;mt!==null;)if(n=mt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,mt=e;else for(;mt!==null;){switch(n=mt,p=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(l=0;l<e.length;l++)d=e[l],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&p!==null){e=void 0,l=n,d=p.memoizedProps,p=p.memoizedState,a=l.stateNode;try{var re=Fi(l.type,d);e=a.getSnapshotBeforeUpdate(re,p),a.__reactInternalSnapshotBeforeUpdate=e}catch(de){qe(l,l.return,de)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,l=e.nodeType,l===9)Pu(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Pu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,mt=e;break}mt=n.return}}function jd(e,n,l){var a=l.flags;switch(l.tag){case 0:case 11:case 15:Vn(e,l),a&4&&_l(5,l);break;case 1:if(Vn(e,l),a&4)if(e=l.stateNode,n===null)try{e.componentDidMount()}catch(S){qe(l,l.return,S)}else{var d=Fi(l.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(d,n,e.__reactInternalSnapshotBeforeUpdate)}catch(S){qe(l,l.return,S)}}a&64&&Kd(l),a&512&&Cl(l,l.return);break;case 3:if(Vn(e,l),a&64&&(e=l.updateQueue,e!==null)){if(n=null,l.child!==null)switch(l.child.tag){case 27:case 5:n=l.child.stateNode;break;case 1:n=l.child.stateNode}try{Hf(e,n)}catch(S){qe(l,l.return,S)}}break;case 27:n===null&&a&4&&Zd(l);case 26:case 5:Vn(e,l),n===null&&a&4&&Qd(l),a&512&&Cl(l,l.return);break;case 12:Vn(e,l);break;case 31:Vn(e,l),a&4&&nm(e,l);break;case 13:Vn(e,l),a&4&&im(e,l),a&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=Ly.bind(null,l),e0(e,l))));break;case 22:if(a=l.memoizedState!==null||Pn,!a){n=n!==null&&n.memoizedState!==null||ct,d=Pn;var p=ct;Pn=a,(ct=n)&&!p?qn(e,l,(l.subtreeFlags&8772)!==0):Vn(e,l),Pn=d,ct=p}break;case 30:break;default:Vn(e,l)}}function em(e){var n=e.alternate;n!==null&&(e.alternate=null,em(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Cn(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ze=null,Dt=!1;function Hn(e,n,l){for(l=l.child;l!==null;)tm(e,n,l),l=l.sibling}function tm(e,n,l){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(Ri,l)}catch{}switch(l.tag){case 26:ct||Sn(l,n),Hn(e,n,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ct||Sn(l,n);var a=Ze,d=Dt;hi(l.type)&&(Ze=l.stateNode,Dt=!1),Hn(e,n,l),Dl(l.stateNode),Ze=a,Dt=d;break;case 5:ct||Sn(l,n);case 6:if(a=Ze,d=Dt,Ze=null,Hn(e,n,l),Ze=a,Dt=d,Ze!==null)if(Dt)try{(Ze.nodeType===9?Ze.body:Ze.nodeName==="HTML"?Ze.ownerDocument.body:Ze).removeChild(l.stateNode)}catch(p){qe(l,n,p)}else try{Ze.removeChild(l.stateNode)}catch(p){qe(l,n,p)}break;case 18:Ze!==null&&(Dt?(e=Ze,Km(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),Po(e)):Km(Ze,l.stateNode));break;case 4:a=Ze,d=Dt,Ze=l.stateNode.containerInfo,Dt=!0,Hn(e,n,l),Ze=a,Dt=d;break;case 0:case 11:case 14:case 15:ri(2,l,n),ct||ri(4,l,n),Hn(e,n,l);break;case 1:ct||(Sn(l,n),a=l.stateNode,typeof a.componentWillUnmount=="function"&&Xd(l,n,a)),Hn(e,n,l);break;case 21:Hn(e,n,l);break;case 22:ct=(a=ct)||l.memoizedState!==null,Hn(e,n,l),ct=a;break;default:Hn(e,n,l)}}function nm(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Po(e)}catch(l){qe(n,n.return,l)}}}function im(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Po(e)}catch(l){qe(n,n.return,l)}}function Ny(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Wd),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Wd),n;default:throw Error(s(435,e.tag))}}function Bs(e,n){var l=Ny(e);n.forEach(function(a){if(!l.has(a)){l.add(a);var d=Gy.bind(null,e,a);a.then(d,d)}})}function Ut(e,n){var l=n.deletions;if(l!==null)for(var a=0;a<l.length;a++){var d=l[a],p=e,S=n,C=S;e:for(;C!==null;){switch(C.tag){case 27:if(hi(C.type)){Ze=C.stateNode,Dt=!1;break e}break;case 5:Ze=C.stateNode,Dt=!1;break e;case 3:case 4:Ze=C.stateNode.containerInfo,Dt=!0;break e}C=C.return}if(Ze===null)throw Error(s(160));tm(p,S,d),Ze=null,Dt=!1,p=d.alternate,p!==null&&(p.return=null),d.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)om(n,e),n=n.sibling}var rn=null;function om(e,n){var l=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ut(n,e),Lt(e),a&4&&(ri(3,e,e.return),_l(3,e),ri(5,e,e.return));break;case 1:Ut(n,e),Lt(e),a&512&&(ct||l===null||Sn(l,l.return)),a&64&&Pn&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?a:l.concat(a))));break;case 26:var d=rn;if(Ut(n,e),Lt(e),a&512&&(ct||l===null||Sn(l,l.return)),a&4){var p=l!==null?l.memoizedState:null;if(a=e.memoizedState,l===null)if(a===null)if(e.stateNode===null){e:{a=e.type,l=e.memoizedProps,d=d.ownerDocument||d;t:switch(a){case"title":p=d.getElementsByTagName("title")[0],(!p||p[Xe]||p[A]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=d.createElement(a),d.head.insertBefore(p,d.querySelector("head > title"))),Tt(p,a,l),p[A]=e,et(p),a=p;break e;case"link":var S=op("link","href",d).get(a+(l.href||""));if(S){for(var C=0;C<S.length;C++)if(p=S[C],p.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&p.getAttribute("rel")===(l.rel==null?null:l.rel)&&p.getAttribute("title")===(l.title==null?null:l.title)&&p.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(C,1);break t}}p=d.createElement(a),Tt(p,a,l),d.head.appendChild(p);break;case"meta":if(S=op("meta","content",d).get(a+(l.content||""))){for(C=0;C<S.length;C++)if(p=S[C],p.getAttribute("content")===(l.content==null?null:""+l.content)&&p.getAttribute("name")===(l.name==null?null:l.name)&&p.getAttribute("property")===(l.property==null?null:l.property)&&p.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&p.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(C,1);break t}}p=d.createElement(a),Tt(p,a,l),d.head.appendChild(p);break;default:throw Error(s(468,a))}p[A]=e,et(p),a=p}e.stateNode=a}else lp(d,e.type,e.stateNode);else e.stateNode=ip(d,a,e.memoizedProps);else p!==a?(p===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):p.count--,a===null?lp(d,e.type,e.stateNode):ip(d,a,e.memoizedProps)):a===null&&e.stateNode!==null&&ru(e,e.memoizedProps,l.memoizedProps)}break;case 27:Ut(n,e),Lt(e),a&512&&(ct||l===null||Sn(l,l.return)),l!==null&&a&4&&ru(e,e.memoizedProps,l.memoizedProps);break;case 5:if(Ut(n,e),Lt(e),a&512&&(ct||l===null||Sn(l,l.return)),e.flags&32){d=e.stateNode;try{oo(d,"")}catch(re){qe(e,e.return,re)}}a&4&&e.stateNode!=null&&(d=e.memoizedProps,ru(e,d,l!==null?l.memoizedProps:d)),a&1024&&(fu=!0);break;case 6:if(Ut(n,e),Lt(e),a&4){if(e.stateNode===null)throw Error(s(162));a=e.memoizedProps,l=e.stateNode;try{l.nodeValue=a}catch(re){qe(e,e.return,re)}}break;case 3:if(ia=null,d=rn,rn=ta(n.containerInfo),Ut(n,e),rn=d,Lt(e),a&4&&l!==null&&l.memoizedState.isDehydrated)try{Po(n.containerInfo)}catch(re){qe(e,e.return,re)}fu&&(fu=!1,lm(e));break;case 4:a=rn,rn=ta(e.stateNode.containerInfo),Ut(n,e),Lt(e),rn=a;break;case 12:Ut(n,e),Lt(e);break;case 31:Ut(n,e),Lt(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Bs(e,a)));break;case 13:Ut(n,e),Lt(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Os=ft()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Bs(e,a)));break;case 22:d=e.memoizedState!==null;var N=l!==null&&l.memoizedState!==null,L=Pn,B=ct;if(Pn=L||d,ct=B||N,Ut(n,e),ct=B,Pn=L,Lt(e),a&8192)e:for(n=e.stateNode,n._visibility=d?n._visibility&-2:n._visibility|1,d&&(l===null||N||Pn||ct||Ji(e)),l=null,n=e;;){if(n.tag===5||n.tag===26){if(l===null){N=l=n;try{if(p=N.stateNode,d)S=p.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{C=N.stateNode;var F=N.memoizedProps.style,G=F!=null&&F.hasOwnProperty("display")?F.display:null;C.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(re){qe(N,N.return,re)}}}else if(n.tag===6){if(l===null){N=n;try{N.stateNode.nodeValue=d?"":N.memoizedProps}catch(re){qe(N,N.return,re)}}}else if(n.tag===18){if(l===null){N=n;try{var H=N.stateNode;d?Xm(H,!0):Xm(N.stateNode,!1)}catch(re){qe(N,N.return,re)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;l===n&&(l=null),n=n.return}l===n&&(l=null),n.sibling.return=n.return,n=n.sibling}a&4&&(a=e.updateQueue,a!==null&&(l=a.retryQueue,l!==null&&(a.retryQueue=null,Bs(e,l))));break;case 19:Ut(n,e),Lt(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Bs(e,a)));break;case 30:break;case 21:break;default:Ut(n,e),Lt(e)}}function Lt(e){var n=e.flags;if(n&2){try{for(var l,a=e.return;a!==null;){if($d(a)){l=a;break}a=a.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var d=l.stateNode,p=uu(e);ks(e,p,d);break;case 5:var S=l.stateNode;l.flags&32&&(oo(S,""),l.flags&=-33);var C=uu(e);ks(e,C,S);break;case 3:case 4:var N=l.stateNode.containerInfo,L=uu(e);cu(e,L,N);break;default:throw Error(s(161))}}catch(B){qe(e,e.return,B)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function lm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;lm(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Vn(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)jd(e,n.alternate,n),n=n.sibling}function Ji(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:ri(4,n,n.return),Ji(n);break;case 1:Sn(n,n.return);var l=n.stateNode;typeof l.componentWillUnmount=="function"&&Xd(n,n.return,l),Ji(n);break;case 27:Dl(n.stateNode);case 26:case 5:Sn(n,n.return),Ji(n);break;case 22:n.memoizedState===null&&Ji(n);break;case 30:Ji(n);break;default:Ji(n)}e=e.sibling}}function qn(e,n,l){for(l=l&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var a=n.alternate,d=e,p=n,S=p.flags;switch(p.tag){case 0:case 11:case 15:qn(d,p,l),_l(4,p);break;case 1:if(qn(d,p,l),a=p,d=a.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(L){qe(a,a.return,L)}if(a=p,d=a.updateQueue,d!==null){var C=a.stateNode;try{var N=d.shared.hiddenCallbacks;if(N!==null)for(d.shared.hiddenCallbacks=null,d=0;d<N.length;d++)Pf(N[d],C)}catch(L){qe(a,a.return,L)}}l&&S&64&&Kd(p),Cl(p,p.return);break;case 27:Zd(p);case 26:case 5:qn(d,p,l),l&&a===null&&S&4&&Qd(p),Cl(p,p.return);break;case 12:qn(d,p,l);break;case 31:qn(d,p,l),l&&S&4&&nm(d,p);break;case 13:qn(d,p,l),l&&S&4&&im(d,p);break;case 22:p.memoizedState===null&&qn(d,p,l),Cl(p,p.return);break;case 30:break;default:qn(d,p,l)}n=n.sibling}}function du(e,n){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&ul(l))}function mu(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ul(e))}function un(e,n,l,a){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)sm(e,n,l,a),n=n.sibling}function sm(e,n,l,a){var d=n.flags;switch(n.tag){case 0:case 11:case 15:un(e,n,l,a),d&2048&&_l(9,n);break;case 1:un(e,n,l,a);break;case 3:un(e,n,l,a),d&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ul(e)));break;case 12:if(d&2048){un(e,n,l,a),e=n.stateNode;try{var p=n.memoizedProps,S=p.id,C=p.onPostCommit;typeof C=="function"&&C(S,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){qe(n,n.return,N)}}else un(e,n,l,a);break;case 31:un(e,n,l,a);break;case 13:un(e,n,l,a);break;case 23:break;case 22:p=n.stateNode,S=n.alternate,n.memoizedState!==null?p._visibility&2?un(e,n,l,a):xl(e,n):p._visibility&2?un(e,n,l,a):(p._visibility|=2,Ao(e,n,l,a,(n.subtreeFlags&10256)!==0||!1)),d&2048&&du(S,n);break;case 24:un(e,n,l,a),d&2048&&mu(n.alternate,n);break;default:un(e,n,l,a)}}function Ao(e,n,l,a,d){for(d=d&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var p=e,S=n,C=l,N=a,L=S.flags;switch(S.tag){case 0:case 11:case 15:Ao(p,S,C,N,d),_l(8,S);break;case 23:break;case 22:var B=S.stateNode;S.memoizedState!==null?B._visibility&2?Ao(p,S,C,N,d):xl(p,S):(B._visibility|=2,Ao(p,S,C,N,d)),d&&L&2048&&du(S.alternate,S);break;case 24:Ao(p,S,C,N,d),d&&L&2048&&mu(S.alternate,S);break;default:Ao(p,S,C,N,d)}n=n.sibling}}function xl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var l=e,a=n,d=a.flags;switch(a.tag){case 22:xl(l,a),d&2048&&du(a.alternate,a);break;case 24:xl(l,a),d&2048&&mu(a.alternate,a);break;default:xl(l,a)}n=n.sibling}}var Al=8192;function No(e,n,l){if(e.subtreeFlags&Al)for(e=e.child;e!==null;)am(e,n,l),e=e.sibling}function am(e,n,l){switch(e.tag){case 26:No(e,n,l),e.flags&Al&&e.memoizedState!==null&&d0(l,rn,e.memoizedState,e.memoizedProps);break;case 5:No(e,n,l);break;case 3:case 4:var a=rn;rn=ta(e.stateNode.containerInfo),No(e,n,l),rn=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=Al,Al=16777216,No(e,n,l),Al=a):No(e,n,l));break;default:No(e,n,l)}}function rm(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Nl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var l=0;l<n.length;l++){var a=n[l];mt=a,cm(a,e)}rm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)um(e),e=e.sibling}function um(e){switch(e.tag){case 0:case 11:case 15:Nl(e),e.flags&2048&&ri(9,e,e.return);break;case 3:Nl(e);break;case 12:Nl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,zs(e)):Nl(e);break;default:Nl(e)}}function zs(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var l=0;l<n.length;l++){var a=n[l];mt=a,cm(a,e)}rm(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:ri(8,n,n.return),zs(n);break;case 22:l=n.stateNode,l._visibility&2&&(l._visibility&=-3,zs(n));break;default:zs(n)}e=e.sibling}}function cm(e,n){for(;mt!==null;){var l=mt;switch(l.tag){case 0:case 11:case 15:ri(8,l,n);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var a=l.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:ul(l.memoizedState.cache)}if(a=l.child,a!==null)a.return=l,mt=a;else e:for(l=e;mt!==null;){a=mt;var d=a.sibling,p=a.return;if(em(a),a===l){mt=null;break e}if(d!==null){d.return=p,mt=d;break e}mt=p}}}var Ry={getCacheForType:function(e){var n=yt(at),l=n.data.get(e);return l===void 0&&(l=e(),n.data.set(e,l)),l},cacheSignal:function(){return yt(at).controller.signal}},My=typeof WeakMap=="function"?WeakMap:Map,He=0,Je=null,Ne=null,Me=0,Ve=0,zt=null,ui=!1,Ro=!1,pu=!1,kn=0,nt=0,ci=0,Yi=0,hu=0,Ot=0,Mo=0,Rl=null,Gt=null,gu=!1,Os=0,fm=0,Fs=1/0,Js=null,fi=null,dt=0,di=null,bo=null,Bn=0,vu=0,yu=null,dm=null,Ml=0,Su=null;function Ft(){return(He&2)!==0&&Me!==0?Me&-Me:P.T!==null?Au():ts()}function mm(){if(Ot===0)if((Me&536870912)===0||we){var e=ji;ji<<=1,(ji&3932160)===0&&(ji=262144),Ot=e}else Ot=536870912;return e=kt.current,e!==null&&(e.flags|=32),Ot}function Pt(e,n,l){(e===Je&&(Ve===2||Ve===9)||e.cancelPendingCommit!==null)&&(Io(e,0),mi(e,Me,Ot,!1)),bi(e,l),((He&2)===0||e!==Je)&&(e===Je&&((He&2)===0&&(Yi|=l),nt===4&&mi(e,Me,Ot,!1)),Tn(e))}function pm(e,n,l){if((He&6)!==0)throw Error(s(327));var a=!l&&(n&127)===0&&(n&e.expiredLanes)===0||Mi(e,n),d=a?wy(e,n):Eu(e,n,!0),p=a;do{if(d===0){Ro&&!a&&mi(e,n,0,!1);break}else{if(l=e.current.alternate,p&&!by(l)){d=Eu(e,n,!1),p=!1;continue}if(d===2){if(p=n,e.errorRecoveryDisabledLanes&p)var S=0;else S=e.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){n=S;e:{var C=e;d=Rl;var N=C.current.memoizedState.isDehydrated;if(N&&(Io(C,S).flags|=256),S=Eu(C,S,!1),S!==2){if(pu&&!N){C.errorRecoveryDisabledLanes|=p,Yi|=p,d=4;break e}p=Gt,Gt=d,p!==null&&(Gt===null?Gt=p:Gt.push.apply(Gt,p))}d=S}if(p=!1,d!==2)continue}}if(d===1){Io(e,0),mi(e,n,0,!0);break}e:{switch(a=e,p=d,p){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:mi(a,n,Ot,!ui);break e;case 2:Gt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(d=Os+300-ft(),10<d)){if(mi(a,n,Ot,!ui),to(a,0,!0)!==0)break e;Bn=n,a.timeoutHandle=Jm(hm.bind(null,a,l,Gt,Js,gu,n,Ot,Yi,Mo,ui,p,"Throttled",-0,0),d);break e}hm(a,l,Gt,Js,gu,n,Ot,Yi,Mo,ui,p,null,-0,0)}}break}while(!0);Tn(e)}function hm(e,n,l,a,d,p,S,C,N,L,B,F,G,H){if(e.timeoutHandle=-1,F=n.subtreeFlags,F&8192||(F&16785408)===16785408){F={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Nn},am(n,p,F);var re=(p&62914560)===p?Os-ft():(p&4194048)===p?fm-ft():0;if(re=m0(F,re),re!==null){Bn=p,e.cancelPendingCommit=re(Cm.bind(null,e,n,p,l,a,d,S,C,N,B,F,null,G,H)),mi(e,p,S,!L);return}}Cm(e,n,p,l,a,d,S,C,N)}function by(e){for(var n=e;;){var l=n.tag;if((l===0||l===11||l===15)&&n.flags&16384&&(l=n.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var a=0;a<l.length;a++){var d=l[a],p=d.getSnapshot;d=d.value;try{if(!Vt(p(),d))return!1}catch{return!1}}if(l=n.child,n.subtreeFlags&16384&&l!==null)l.return=n,n=l;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function mi(e,n,l,a){n&=~hu,n&=~Yi,e.suspendedLanes|=n,e.pingedLanes&=~n,a&&(e.warmLanes|=n),a=e.expirationTimes;for(var d=n;0<d;){var p=31-xt(d),S=1<<p;a[p]=-1,d&=~S}l!==0&&jl(e,l,n)}function Ys(){return(He&6)===0?(bl(0),!1):!0}function Tu(){if(Ne!==null){if(Ve===0)var e=Ne.return;else e=Ne,In=Hi=null,Pr(e),To=null,fl=0,e=Ne;for(;e!==null;)Yd(e.alternate,e),e=e.return;Ne=null}}function Io(e,n){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,Qy(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),Bn=0,Tu(),Je=e,Ne=l=Mn(e.current,null),Me=n,Ve=0,zt=null,ui=!1,Ro=Mi(e,n),pu=!1,Mo=Ot=hu=Yi=ci=nt=0,Gt=Rl=null,gu=!1,(n&8)!==0&&(n|=n&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=n;0<a;){var d=31-xt(a),p=1<<d;n|=e[d],a&=~p}return kn=n,ms(),l}function gm(e,n){Se=null,P.H=Sl,n===So||n===Es?(n=Df(),Ve=3):n===xr?(n=Df(),Ve=4):Ve=n===Wr?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,zt=n,Ne===null&&(nt=1,Gs(e,Xt(n,e.current)))}function vm(){var e=kt.current;return e===null?!0:(Me&4194048)===Me?Wt===null:(Me&62914560)===Me||(Me&536870912)!==0?e===Wt:!1}function ym(){var e=P.H;return P.H=Sl,e===null?Sl:e}function Sm(){var e=P.A;return P.A=Ry,e}function Ks(){nt=4,ui||(Me&4194048)!==Me&&kt.current!==null||(Ro=!0),(ci&134217727)===0&&(Yi&134217727)===0||Je===null||mi(Je,Me,Ot,!1)}function Eu(e,n,l){var a=He;He|=2;var d=ym(),p=Sm();(Je!==e||Me!==n)&&(Js=null,Io(e,n)),n=!1;var S=nt;e:do try{if(Ve!==0&&Ne!==null){var C=Ne,N=zt;switch(Ve){case 8:Tu(),S=6;break e;case 3:case 2:case 9:case 6:kt.current===null&&(n=!0);var L=Ve;if(Ve=0,zt=null,wo(e,C,N,L),l&&Ro){S=0;break e}break;default:L=Ve,Ve=0,zt=null,wo(e,C,N,L)}}Iy(),S=nt;break}catch(B){gm(e,B)}while(!0);return n&&e.shellSuspendCounter++,In=Hi=null,He=a,P.H=d,P.A=p,Ne===null&&(Je=null,Me=0,ms()),S}function Iy(){for(;Ne!==null;)Tm(Ne)}function wy(e,n){var l=He;He|=2;var a=ym(),d=Sm();Je!==e||Me!==n?(Js=null,Fs=ft()+500,Io(e,n)):Ro=Mi(e,n);e:do try{if(Ve!==0&&Ne!==null){n=Ne;var p=zt;t:switch(Ve){case 1:Ve=0,zt=null,wo(e,n,p,1);break;case 2:case 9:if(If(p)){Ve=0,zt=null,Em(n);break}n=function(){Ve!==2&&Ve!==9||Je!==e||(Ve=7),Tn(e)},p.then(n,n);break e;case 3:Ve=7;break e;case 4:Ve=5;break e;case 7:If(p)?(Ve=0,zt=null,Em(n)):(Ve=0,zt=null,wo(e,n,p,7));break;case 5:var S=null;switch(Ne.tag){case 26:S=Ne.memoizedState;case 5:case 27:var C=Ne;if(S?sp(S):C.stateNode.complete){Ve=0,zt=null;var N=C.sibling;if(N!==null)Ne=N;else{var L=C.return;L!==null?(Ne=L,Xs(L)):Ne=null}break t}}Ve=0,zt=null,wo(e,n,p,5);break;case 6:Ve=0,zt=null,wo(e,n,p,6);break;case 8:Tu(),nt=6;break e;default:throw Error(s(462))}}Dy();break}catch(B){gm(e,B)}while(!0);return In=Hi=null,P.H=a,P.A=d,He=l,Ne!==null?0:(Je=null,Me=0,ms(),nt)}function Dy(){for(;Ne!==null&&!pn();)Tm(Ne)}function Tm(e){var n=Fd(e.alternate,e,kn);e.memoizedProps=e.pendingProps,n===null?Xs(e):Ne=n}function Em(e){var n=e,l=n.alternate;switch(n.tag){case 15:case 0:n=Vd(l,n,n.pendingProps,n.type,void 0,Me);break;case 11:n=Vd(l,n,n.pendingProps,n.type.render,n.ref,Me);break;case 5:Pr(n);default:Yd(l,n),n=Ne=Sf(n,kn),n=Fd(l,n,kn)}e.memoizedProps=e.pendingProps,n===null?Xs(e):Ne=n}function wo(e,n,l,a){In=Hi=null,Pr(n),To=null,fl=0;var d=n.return;try{if(Ty(e,d,n,l,Me)){nt=1,Gs(e,Xt(l,e.current)),Ne=null;return}}catch(p){if(d!==null)throw Ne=d,p;nt=1,Gs(e,Xt(l,e.current)),Ne=null;return}n.flags&32768?(we||a===1?e=!0:Ro||(Me&536870912)!==0?e=!1:(ui=e=!0,(a===2||a===9||a===3||a===6)&&(a=kt.current,a!==null&&a.tag===13&&(a.flags|=16384))),_m(n,e)):Xs(n)}function Xs(e){var n=e;do{if((n.flags&32768)!==0){_m(n,ui);return}e=n.return;var l=Cy(n.alternate,n,kn);if(l!==null){Ne=l;return}if(n=n.sibling,n!==null){Ne=n;return}Ne=n=e}while(n!==null);nt===0&&(nt=5)}function _m(e,n){do{var l=xy(e.alternate,e);if(l!==null){l.flags&=32767,Ne=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!n&&(e=e.sibling,e!==null)){Ne=e;return}Ne=e=l}while(e!==null);nt=6,Ne=null}function Cm(e,n,l,a,d,p,S,C,N){e.cancelPendingCommit=null;do Qs();while(dt!==0);if((He&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(p=n.lanes|n.childLanes,p|=ur,ka(e,l,p,S,C,N),e===Je&&(Ne=Je=null,Me=0),bo=n,di=e,Bn=l,vu=p,yu=d,dm=a,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Py($i,function(){return Mm(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||a){a=P.T,P.T=null,d=K.p,K.p=2,S=He,He|=4;try{Ay(e,n,l)}finally{He=S,K.p=d,P.T=a}}dt=1,xm(),Am(),Nm()}}function xm(){if(dt===1){dt=0;var e=di,n=bo,l=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||l){l=P.T,P.T=null;var a=K.p;K.p=2;var d=He;He|=4;try{om(n,e);var p=Uu,S=cf(e.containerInfo),C=p.focusedElem,N=p.selectionRange;if(S!==C&&C&&C.ownerDocument&&uf(C.ownerDocument.documentElement,C)){if(N!==null&&or(C)){var L=N.start,B=N.end;if(B===void 0&&(B=L),"selectionStart"in C)C.selectionStart=L,C.selectionEnd=Math.min(B,C.value.length);else{var F=C.ownerDocument||document,G=F&&F.defaultView||window;if(G.getSelection){var H=G.getSelection(),re=C.textContent.length,de=Math.min(N.start,re),ze=N.end===void 0?de:Math.min(N.end,re);!H.extend&&de>ze&&(S=ze,ze=de,de=S);var b=rf(C,de),M=rf(C,ze);if(b&&M&&(H.rangeCount!==1||H.anchorNode!==b.node||H.anchorOffset!==b.offset||H.focusNode!==M.node||H.focusOffset!==M.offset)){var U=F.createRange();U.setStart(b.node,b.offset),H.removeAllRanges(),de>ze?(H.addRange(U),H.extend(M.node,M.offset)):(U.setEnd(M.node,M.offset),H.addRange(U))}}}}for(F=[],H=C;H=H.parentNode;)H.nodeType===1&&F.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<F.length;C++){var O=F[C];O.element.scrollLeft=O.left,O.element.scrollTop=O.top}}aa=!!Du,Uu=Du=null}finally{He=d,K.p=a,P.T=l}}e.current=n,dt=2}}function Am(){if(dt===2){dt=0;var e=di,n=bo,l=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||l){l=P.T,P.T=null;var a=K.p;K.p=2;var d=He;He|=4;try{jd(e,n.alternate,n)}finally{He=d,K.p=a,P.T=l}}dt=3}}function Nm(){if(dt===4||dt===3){dt=0,Ni();var e=di,n=bo,l=Bn,a=dm;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?dt=5:(dt=0,bo=di=null,Rm(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(fi=null),Qo(l),n=n.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(Ri,n,void 0,(n.current.flags&128)===128)}catch{}if(a!==null){n=P.T,d=K.p,K.p=2,P.T=null;try{for(var p=e.onRecoverableError,S=0;S<a.length;S++){var C=a[S];p(C.value,{componentStack:C.stack})}}finally{P.T=n,K.p=d}}(Bn&3)!==0&&Qs(),Tn(e),d=e.pendingLanes,(l&261930)!==0&&(d&42)!==0?e===Su?Ml++:(Ml=0,Su=e):Ml=0,bl(0)}}function Rm(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,ul(n)))}function Qs(){return xm(),Am(),Nm(),Mm()}function Mm(){if(dt!==5)return!1;var e=di,n=vu;vu=0;var l=Qo(Bn),a=P.T,d=K.p;try{K.p=32>l?32:l,P.T=null,l=yu,yu=null;var p=di,S=Bn;if(dt=0,bo=di=null,Bn=0,(He&6)!==0)throw Error(s(331));var C=He;if(He|=4,um(p.current),sm(p,p.current,S,l),He=C,bl(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(Ri,p)}catch{}return!0}finally{K.p=d,P.T=a,Rm(e,n)}}function bm(e,n,l){n=Xt(l,n),n=Zr(e.stateNode,n,2),e=li(e,n,2),e!==null&&(bi(e,2),Tn(e))}function qe(e,n,l){if(e.tag===3)bm(e,e,l);else for(;n!==null;){if(n.tag===3){bm(n,e,l);break}else if(n.tag===1){var a=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(fi===null||!fi.has(a))){e=Xt(l,e),l=Id(2),a=li(n,l,2),a!==null&&(wd(l,a,n,e),bi(a,2),Tn(a));break}}n=n.return}}function _u(e,n,l){var a=e.pingCache;if(a===null){a=e.pingCache=new My;var d=new Set;a.set(n,d)}else d=a.get(n),d===void 0&&(d=new Set,a.set(n,d));d.has(l)||(pu=!0,d.add(l),e=Uy.bind(null,e,n,l),n.then(e,e))}function Uy(e,n,l){var a=e.pingCache;a!==null&&a.delete(n),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,Je===e&&(Me&l)===l&&(nt===4||nt===3&&(Me&62914560)===Me&&300>ft()-Os?(He&2)===0&&Io(e,0):hu|=l,Mo===Me&&(Mo=0)),Tn(e)}function Im(e,n){n===0&&(n=Wl()),e=Li(e,n),e!==null&&(bi(e,n),Tn(e))}function Ly(e){var n=e.memoizedState,l=0;n!==null&&(l=n.retryLane),Im(e,l)}function Gy(e,n){var l=0;switch(e.tag){case 31:case 13:var a=e.stateNode,d=e.memoizedState;d!==null&&(l=d.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(s(314))}a!==null&&a.delete(n),Im(e,l)}function Py(e,n){return xe(e,n)}var $s=null,Do=null,Cu=!1,Zs=!1,xu=!1,pi=0;function Tn(e){e!==Do&&e.next===null&&(Do===null?$s=Do=e:Do=Do.next=e),Zs=!0,Cu||(Cu=!0,Vy())}function bl(e,n){if(!xu&&Zs){xu=!0;do for(var l=!1,a=$s;a!==null;){if(e!==0){var d=a.pendingLanes;if(d===0)var p=0;else{var S=a.suspendedLanes,C=a.pingedLanes;p=(1<<31-xt(42|e)+1)-1,p&=d&~(S&~C),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(l=!0,Lm(a,p))}else p=Me,p=to(a,a===Je?p:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(p&3)===0||Mi(a,p)||(l=!0,Lm(a,p));a=a.next}while(l);xu=!1}}function Hy(){wm()}function wm(){Zs=Cu=!1;var e=0;pi!==0&&Xy()&&(e=pi);for(var n=ft(),l=null,a=$s;a!==null;){var d=a.next,p=Dm(a,n);p===0?(a.next=null,l===null?$s=d:l.next=d,d===null&&(Do=l)):(l=a,(e!==0||(p&3)!==0)&&(Zs=!0)),a=d}dt!==0&&dt!==5||bl(e),pi!==0&&(pi=0)}function Dm(e,n){for(var l=e.suspendedLanes,a=e.pingedLanes,d=e.expirationTimes,p=e.pendingLanes&-62914561;0<p;){var S=31-xt(p),C=1<<S,N=d[S];N===-1?((C&l)===0||(C&a)!==0)&&(d[S]=qa(C,n)):N<=n&&(e.expiredLanes|=C),p&=~C}if(n=Je,l=Me,l=to(e,e===n?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,l===0||e===n&&(Ve===2||Ve===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&gt(a),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||Mi(e,l)){if(n=l&-l,n===e.callbackPriority)return n;switch(a!==null&&gt(a),Qo(l)){case 2:case 8:l=Xl;break;case 32:l=$i;break;case 268435456:l=Ql;break;default:l=$i}return a=Um.bind(null,e),l=xe(l,a),e.callbackPriority=n,e.callbackNode=l,n}return a!==null&&a!==null&&gt(a),e.callbackPriority=2,e.callbackNode=null,2}function Um(e,n){if(dt!==0&&dt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(Qs()&&e.callbackNode!==l)return null;var a=Me;return a=to(e,e===Je?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(pm(e,a,n),Dm(e,ft()),e.callbackNode!=null&&e.callbackNode===l?Um.bind(null,e):null)}function Lm(e,n){if(Qs())return null;pm(e,n,!0)}function Vy(){$y(function(){(He&6)!==0?xe(Xn,Hy):wm()})}function Au(){if(pi===0){var e=vo;e===0&&(e=Wi,Wi<<=1,(Wi&261888)===0&&(Wi=256)),pi=e}return pi}function Gm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ls(""+e)}function Pm(e,n){var l=n.ownerDocument.createElement("input");return l.name=n.name,l.value=n.value,e.id&&l.setAttribute("form",e.id),n.parentNode.insertBefore(l,n),e=new FormData(e),l.parentNode.removeChild(l),e}function qy(e,n,l,a,d){if(n==="submit"&&l&&l.stateNode===d){var p=Gm((d[k]||null).action),S=a.submitter;S&&(n=(n=S[k]||null)?Gm(n.formAction):S.getAttribute("formAction"),n!==null&&(p=n,S=null));var C=new us("action","action",null,a,d);e.push({event:C,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(pi!==0){var N=S?Pm(d,S):new FormData(d);Jr(l,{pending:!0,data:N,method:d.method,action:p},null,N)}}else typeof p=="function"&&(C.preventDefault(),N=S?Pm(d,S):new FormData(d),Jr(l,{pending:!0,data:N,method:d.method,action:p},p,N))},currentTarget:d}]})}}for(var Nu=0;Nu<rr.length;Nu++){var Ru=rr[Nu],ky=Ru.toLowerCase(),By=Ru[0].toUpperCase()+Ru.slice(1);an(ky,"on"+By)}an(mf,"onAnimationEnd"),an(pf,"onAnimationIteration"),an(hf,"onAnimationStart"),an("dblclick","onDoubleClick"),an("focusin","onFocus"),an("focusout","onBlur"),an(iy,"onTransitionRun"),an(oy,"onTransitionStart"),an(ly,"onTransitionCancel"),an(gf,"onTransitionEnd"),$n("onMouseEnter",["mouseout","mouseover"]),$n("onMouseLeave",["mouseout","mouseover"]),$n("onPointerEnter",["pointerout","pointerover"]),$n("onPointerLeave",["pointerout","pointerover"]),gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gn("onBeforeInput",["compositionend","keypress","textInput","paste"]),gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Il));function Hm(e,n){n=(n&4)!==0;for(var l=0;l<e.length;l++){var a=e[l],d=a.event;a=a.listeners;e:{var p=void 0;if(n)for(var S=a.length-1;0<=S;S--){var C=a[S],N=C.instance,L=C.currentTarget;if(C=C.listener,N!==p&&d.isPropagationStopped())break e;p=C,d.currentTarget=L;try{p(d)}catch(B){ds(B)}d.currentTarget=null,p=N}else for(S=0;S<a.length;S++){if(C=a[S],N=C.instance,L=C.currentTarget,C=C.listener,N!==p&&d.isPropagationStopped())break e;p=C,d.currentTarget=L;try{p(d)}catch(B){ds(B)}d.currentTarget=null,p=N}}}}function Re(e,n){var l=n[Ae];l===void 0&&(l=n[Ae]=new Set);var a=e+"__bubble";l.has(a)||(Vm(n,e,2,!1),l.add(a))}function Mu(e,n,l){var a=0;n&&(a|=4),Vm(l,e,a,n)}var Ws="_reactListening"+Math.random().toString(36).slice(2);function bu(e){if(!e[Ws]){e[Ws]=!0,is.forEach(function(l){l!=="selectionchange"&&(zy.has(l)||Mu(l,!1,e),Mu(l,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Ws]||(n[Ws]=!0,Mu("selectionchange",!1,n))}}function Vm(e,n,l,a){switch(mp(n)){case 2:var d=g0;break;case 8:d=v0;break;default:d=Fu}l=d.bind(null,n,l,e),d=void 0,!Qa||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),a?d!==void 0?e.addEventListener(n,l,{capture:!0,passive:d}):e.addEventListener(n,l,!0):d!==void 0?e.addEventListener(n,l,{passive:d}):e.addEventListener(n,l,!1)}function Iu(e,n,l,a,d){var p=a;if((n&1)===0&&(n&2)===0&&a!==null)e:for(;;){if(a===null)return;var S=a.tag;if(S===3||S===4){var C=a.stateNode.containerInfo;if(C===d)break;if(S===4)for(S=a.return;S!==null;){var N=S.tag;if((N===3||N===4)&&S.stateNode.containerInfo===d)return;S=S.return}for(;C!==null;){if(S=Ce(C),S===null)return;if(N=S.tag,N===5||N===6||N===26||N===27){a=p=S;continue e}C=C.parentNode}}a=a.return}zc(function(){var L=p,B=Ka(l),F=[];e:{var G=vf.get(e);if(G!==void 0){var H=us,re=e;switch(e){case"keypress":if(as(l)===0)break e;case"keydown":case"keyup":H=Gv;break;case"focusin":re="focus",H=ja;break;case"focusout":re="blur",H=ja;break;case"beforeblur":case"afterblur":H=ja;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Jc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Cv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=Vv;break;case mf:case pf:case hf:H=Nv;break;case gf:H=kv;break;case"scroll":case"scrollend":H=Ev;break;case"wheel":H=zv;break;case"copy":case"cut":case"paste":H=Mv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Kc;break;case"toggle":case"beforetoggle":H=Fv}var de=(n&4)!==0,ze=!de&&(e==="scroll"||e==="scrollend"),b=de?G!==null?G+"Capture":null:G;de=[];for(var M=L,U;M!==null;){var O=M;if(U=O.stateNode,O=O.tag,O!==5&&O!==26&&O!==27||U===null||b===null||(O=Wo(M,b),O!=null&&de.push(wl(M,O,U))),ze)break;M=M.return}0<de.length&&(G=new H(G,re,null,l,B),F.push({event:G,listeners:de}))}}if((n&7)===0){e:{if(G=e==="mouseover"||e==="pointerover",H=e==="mouseout"||e==="pointerout",G&&l!==Ya&&(re=l.relatedTarget||l.fromElement)&&(Ce(re)||re[ue]))break e;if((H||G)&&(G=B.window===B?B:(G=B.ownerDocument)?G.defaultView||G.parentWindow:window,H?(re=l.relatedTarget||l.toElement,H=L,re=re?Ce(re):null,re!==null&&(ze=f(re),de=re.tag,re!==ze||de!==5&&de!==27&&de!==6)&&(re=null)):(H=null,re=L),H!==re)){if(de=Jc,O="onMouseLeave",b="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(de=Kc,O="onPointerLeave",b="onPointerEnter",M="pointer"),ze=H==null?G:Qn(H),U=re==null?G:Qn(re),G=new de(O,M+"leave",H,l,B),G.target=ze,G.relatedTarget=U,O=null,Ce(B)===L&&(de=new de(b,M+"enter",re,l,B),de.target=U,de.relatedTarget=ze,O=de),ze=O,H&&re)t:{for(de=Oy,b=H,M=re,U=0,O=b;O;O=de(O))U++;O=0;for(var fe=M;fe;fe=de(fe))O++;for(;0<U-O;)b=de(b),U--;for(;0<O-U;)M=de(M),O--;for(;U--;){if(b===M||M!==null&&b===M.alternate){de=b;break t}b=de(b),M=de(M)}de=null}else de=null;H!==null&&qm(F,G,H,de,!1),re!==null&&ze!==null&&qm(F,ze,re,de,!0)}}e:{if(G=L?Qn(L):window,H=G.nodeName&&G.nodeName.toLowerCase(),H==="select"||H==="input"&&G.type==="file")var Le=tf;else if(jc(G))if(nf)Le=ey;else{Le=Wv;var ce=Zv}else H=G.nodeName,!H||H.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?L&&Ja(L.elementType)&&(Le=tf):Le=jv;if(Le&&(Le=Le(e,L))){ef(F,Le,l,B);break e}ce&&ce(e,G,L),e==="focusout"&&L&&G.type==="number"&&L.memoizedProps.value!=null&&Fa(G,"number",G.value)}switch(ce=L?Qn(L):window,e){case"focusin":(jc(ce)||ce.contentEditable==="true")&&(ro=ce,lr=L,sl=null);break;case"focusout":sl=lr=ro=null;break;case"mousedown":sr=!0;break;case"contextmenu":case"mouseup":case"dragend":sr=!1,ff(F,l,B);break;case"selectionchange":if(ny)break;case"keydown":case"keyup":ff(F,l,B)}var Te;if(tr)e:{switch(e){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else ao?Zc(e,l)&&(be="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(be="onCompositionStart");be&&(Xc&&l.locale!=="ko"&&(ao||be!=="onCompositionStart"?be==="onCompositionEnd"&&ao&&(Te=Oc()):(Wn=B,$a="value"in Wn?Wn.value:Wn.textContent,ao=!0)),ce=js(L,be),0<ce.length&&(be=new Yc(be,e,null,l,B),F.push({event:be,listeners:ce}),Te?be.data=Te:(Te=Wc(l),Te!==null&&(be.data=Te)))),(Te=Yv?Kv(e,l):Xv(e,l))&&(be=js(L,"onBeforeInput"),0<be.length&&(ce=new Yc("onBeforeInput","beforeinput",null,l,B),F.push({event:ce,listeners:be}),ce.data=Te)),qy(F,e,L,l,B)}Hm(F,n)})}function wl(e,n,l){return{instance:e,listener:n,currentTarget:l}}function js(e,n){for(var l=n+"Capture",a=[];e!==null;){var d=e,p=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||p===null||(d=Wo(e,l),d!=null&&a.unshift(wl(e,d,p)),d=Wo(e,n),d!=null&&a.push(wl(e,d,p))),e.tag===3)return a;e=e.return}return[]}function Oy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function qm(e,n,l,a,d){for(var p=n._reactName,S=[];l!==null&&l!==a;){var C=l,N=C.alternate,L=C.stateNode;if(C=C.tag,N!==null&&N===a)break;C!==5&&C!==26&&C!==27||L===null||(N=L,d?(L=Wo(l,p),L!=null&&S.unshift(wl(l,L,N))):d||(L=Wo(l,p),L!=null&&S.push(wl(l,L,N)))),l=l.return}S.length!==0&&e.push({event:n,listeners:S})}var Fy=/\r\n?/g,Jy=/\u0000|\uFFFD/g;function km(e){return(typeof e=="string"?e:""+e).replace(Fy,`
`).replace(Jy,"")}function Bm(e,n){return n=km(n),km(e)===n}function Be(e,n,l,a,d,p){switch(l){case"children":typeof a=="string"?n==="body"||n==="textarea"&&a===""||oo(e,a):(typeof a=="number"||typeof a=="bigint")&&n!=="body"&&oo(e,""+a);break;case"className":no(e,"class",a);break;case"tabIndex":no(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":no(e,l,a);break;case"style":kc(e,a,p);break;case"data":if(n!=="object"){no(e,"data",a);break}case"src":case"href":if(a===""&&(n!=="a"||l!=="href")){e.removeAttribute(l);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(l);break}a=ls(""+a),e.setAttribute(l,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(l==="formAction"?(n!=="input"&&Be(e,n,"name",d.name,d,null),Be(e,n,"formEncType",d.formEncType,d,null),Be(e,n,"formMethod",d.formMethod,d,null),Be(e,n,"formTarget",d.formTarget,d,null)):(Be(e,n,"encType",d.encType,d,null),Be(e,n,"method",d.method,d,null),Be(e,n,"target",d.target,d,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(l);break}a=ls(""+a),e.setAttribute(l,a);break;case"onClick":a!=null&&(e.onclick=Nn);break;case"onScroll":a!=null&&Re("scroll",e);break;case"onScrollEnd":a!=null&&Re("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(l=a.__html,l!=null){if(d.children!=null)throw Error(s(60));e.innerHTML=l}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}l=ls(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,""+a):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":a===!0?e.setAttribute(l,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,a):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(l,a):e.removeAttribute(l);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(l):e.setAttribute(l,a);break;case"popover":Re("beforetoggle",e),Re("toggle",e),Zn(e,"popover",a);break;case"xlinkActuate":An(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":An(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":An(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":An(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":An(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":An(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":An(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":An(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":An(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Zn(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Sv.get(l)||l,Zn(e,l,a))}}function wu(e,n,l,a,d,p){switch(l){case"style":kc(e,a,p);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(l=a.__html,l!=null){if(d.children!=null)throw Error(s(60));e.innerHTML=l}}break;case"children":typeof a=="string"?oo(e,a):(typeof a=="number"||typeof a=="bigint")&&oo(e,""+a);break;case"onScroll":a!=null&&Re("scroll",e);break;case"onScrollEnd":a!=null&&Re("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Nn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$o.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(d=l.endsWith("Capture"),n=l.slice(2,d?l.length-7:void 0),p=e[k]||null,p=p!=null?p[l]:null,typeof p=="function"&&e.removeEventListener(n,p,d),typeof a=="function")){typeof p!="function"&&p!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(n,a,d);break e}l in e?e[l]=a:a===!0?e.setAttribute(l,""):Zn(e,l,a)}}}function Tt(e,n,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",e),Re("load",e);var a=!1,d=!1,p;for(p in l)if(l.hasOwnProperty(p)){var S=l[p];if(S!=null)switch(p){case"src":a=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Be(e,n,p,S,l,null)}}d&&Be(e,n,"srcSet",l.srcSet,l,null),a&&Be(e,n,"src",l.src,l,null);return;case"input":Re("invalid",e);var C=p=S=d=null,N=null,L=null;for(a in l)if(l.hasOwnProperty(a)){var B=l[a];if(B!=null)switch(a){case"name":d=B;break;case"type":S=B;break;case"checked":N=B;break;case"defaultChecked":L=B;break;case"value":p=B;break;case"defaultValue":C=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,n));break;default:Be(e,n,a,B,l,null)}}Pc(e,p,C,N,L,S,d,!1);return;case"select":Re("invalid",e),a=S=p=null;for(d in l)if(l.hasOwnProperty(d)&&(C=l[d],C!=null))switch(d){case"value":p=C;break;case"defaultValue":S=C;break;case"multiple":a=C;default:Be(e,n,d,C,l,null)}n=p,l=S,e.multiple=!!a,n!=null?io(e,!!a,n,!1):l!=null&&io(e,!!a,l,!0);return;case"textarea":Re("invalid",e),p=d=a=null;for(S in l)if(l.hasOwnProperty(S)&&(C=l[S],C!=null))switch(S){case"value":a=C;break;case"defaultValue":d=C;break;case"children":p=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:Be(e,n,S,C,l,null)}Vc(e,a,d,p);return;case"option":for(N in l)if(l.hasOwnProperty(N)&&(a=l[N],a!=null))switch(N){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:Be(e,n,N,a,l,null)}return;case"dialog":Re("beforetoggle",e),Re("toggle",e),Re("cancel",e),Re("close",e);break;case"iframe":case"object":Re("load",e);break;case"video":case"audio":for(a=0;a<Il.length;a++)Re(Il[a],e);break;case"image":Re("error",e),Re("load",e);break;case"details":Re("toggle",e);break;case"embed":case"source":case"link":Re("error",e),Re("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in l)if(l.hasOwnProperty(L)&&(a=l[L],a!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Be(e,n,L,a,l,null)}return;default:if(Ja(n)){for(B in l)l.hasOwnProperty(B)&&(a=l[B],a!==void 0&&wu(e,n,B,a,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(a=l[C],a!=null&&Be(e,n,C,a,l,null))}function Yy(e,n,l,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,p=null,S=null,C=null,N=null,L=null,B=null;for(H in l){var F=l[H];if(l.hasOwnProperty(H)&&F!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":N=F;default:a.hasOwnProperty(H)||Be(e,n,H,null,a,F)}}for(var G in a){var H=a[G];if(F=l[G],a.hasOwnProperty(G)&&(H!=null||F!=null))switch(G){case"type":p=H;break;case"name":d=H;break;case"checked":L=H;break;case"defaultChecked":B=H;break;case"value":S=H;break;case"defaultValue":C=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,n));break;default:H!==F&&Be(e,n,G,H,a,F)}}Oa(e,S,C,N,L,B,p,d);return;case"select":H=S=C=G=null;for(p in l)if(N=l[p],l.hasOwnProperty(p)&&N!=null)switch(p){case"value":break;case"multiple":H=N;default:a.hasOwnProperty(p)||Be(e,n,p,null,a,N)}for(d in a)if(p=a[d],N=l[d],a.hasOwnProperty(d)&&(p!=null||N!=null))switch(d){case"value":G=p;break;case"defaultValue":C=p;break;case"multiple":S=p;default:p!==N&&Be(e,n,d,p,a,N)}n=C,l=S,a=H,G!=null?io(e,!!l,G,!1):!!a!=!!l&&(n!=null?io(e,!!l,n,!0):io(e,!!l,l?[]:"",!1));return;case"textarea":H=G=null;for(C in l)if(d=l[C],l.hasOwnProperty(C)&&d!=null&&!a.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Be(e,n,C,null,a,d)}for(S in a)if(d=a[S],p=l[S],a.hasOwnProperty(S)&&(d!=null||p!=null))switch(S){case"value":G=d;break;case"defaultValue":H=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==p&&Be(e,n,S,d,a,p)}Hc(e,G,H);return;case"option":for(var re in l)if(G=l[re],l.hasOwnProperty(re)&&G!=null&&!a.hasOwnProperty(re))switch(re){case"selected":e.selected=!1;break;default:Be(e,n,re,null,a,G)}for(N in a)if(G=a[N],H=l[N],a.hasOwnProperty(N)&&G!==H&&(G!=null||H!=null))switch(N){case"selected":e.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Be(e,n,N,G,a,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var de in l)G=l[de],l.hasOwnProperty(de)&&G!=null&&!a.hasOwnProperty(de)&&Be(e,n,de,null,a,G);for(L in a)if(G=a[L],H=l[L],a.hasOwnProperty(L)&&G!==H&&(G!=null||H!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,n));break;default:Be(e,n,L,G,a,H)}return;default:if(Ja(n)){for(var ze in l)G=l[ze],l.hasOwnProperty(ze)&&G!==void 0&&!a.hasOwnProperty(ze)&&wu(e,n,ze,void 0,a,G);for(B in a)G=a[B],H=l[B],!a.hasOwnProperty(B)||G===H||G===void 0&&H===void 0||wu(e,n,B,G,a,H);return}}for(var b in l)G=l[b],l.hasOwnProperty(b)&&G!=null&&!a.hasOwnProperty(b)&&Be(e,n,b,null,a,G);for(F in a)G=a[F],H=l[F],!a.hasOwnProperty(F)||G===H||G==null&&H==null||Be(e,n,F,G,a,H)}function zm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ky(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,l=performance.getEntriesByType("resource"),a=0;a<l.length;a++){var d=l[a],p=d.transferSize,S=d.initiatorType,C=d.duration;if(p&&C&&zm(S)){for(S=0,C=d.responseEnd,a+=1;a<l.length;a++){var N=l[a],L=N.startTime;if(L>C)break;var B=N.transferSize,F=N.initiatorType;B&&zm(F)&&(N=N.responseEnd,S+=B*(N<C?1:(C-L)/(N-L)))}if(--a,n+=8*(p+S)/(d.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Du=null,Uu=null;function ea(e){return e.nodeType===9?e:e.ownerDocument}function Om(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Fm(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Lu(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Gu=null;function Xy(){var e=window.event;return e&&e.type==="popstate"?e===Gu?!1:(Gu=e,!0):(Gu=null,!1)}var Jm=typeof setTimeout=="function"?setTimeout:void 0,Qy=typeof clearTimeout=="function"?clearTimeout:void 0,Ym=typeof Promise=="function"?Promise:void 0,$y=typeof queueMicrotask=="function"?queueMicrotask:typeof Ym<"u"?function(e){return Ym.resolve(null).then(e).catch(Zy)}:Jm;function Zy(e){setTimeout(function(){throw e})}function hi(e){return e==="head"}function Km(e,n){var l=n,a=0;do{var d=l.nextSibling;if(e.removeChild(l),d&&d.nodeType===8)if(l=d.data,l==="/$"||l==="/&"){if(a===0){e.removeChild(d),Po(n);return}a--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")a++;else if(l==="html")Dl(e.ownerDocument.documentElement);else if(l==="head"){l=e.ownerDocument.head,Dl(l);for(var p=l.firstChild;p;){var S=p.nextSibling,C=p.nodeName;p[Xe]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&p.rel.toLowerCase()==="stylesheet"||l.removeChild(p),p=S}}else l==="body"&&Dl(e.ownerDocument.body);l=d}while(l);Po(n)}function Xm(e,n){var l=e;e=0;do{var a=l.nextSibling;if(l.nodeType===1?n?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(n?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),a&&a.nodeType===8)if(l=a.data,l==="/$"){if(e===0)break;e--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||e++;l=a}while(l)}function Pu(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var l=n;switch(n=n.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Pu(l),Cn(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function Wy(e,n,l,a){for(;e.nodeType===1;){var d=l;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[Xe])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(p=e.getAttribute("rel"),p==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(p!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(p=e.getAttribute("src"),(p!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&p&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var p=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===p)return e}else return e;if(e=jt(e.nextSibling),e===null)break}return null}function jy(e,n,l){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=jt(e.nextSibling),e===null))return null;return e}function Qm(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=jt(e.nextSibling),e===null))return null;return e}function Hu(e){return e.data==="$?"||e.data==="$~"}function Vu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function e0(e,n){var l=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||l.readyState!=="loading")n();else{var a=function(){n(),l.removeEventListener("DOMContentLoaded",a)};l.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function jt(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var qu=null;function $m(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"||l==="/&"){if(n===0)return jt(e.nextSibling);n--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||n++}e=e.nextSibling}return null}function Zm(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(n===0)return e;n--}else l!=="/$"&&l!=="/&"||n++}e=e.previousSibling}return null}function Wm(e,n,l){switch(n=ea(l),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Dl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Cn(e)}var en=new Map,jm=new Set;function ta(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var zn=K.d;K.d={f:t0,r:n0,D:i0,C:o0,L:l0,m:s0,X:r0,S:a0,M:u0};function t0(){var e=zn.f(),n=Ys();return e||n}function n0(e){var n=Et(e);n!==null&&n.tag===5&&n.type==="form"?gd(n):zn.r(e)}var Uo=typeof document>"u"?null:document;function ep(e,n,l){var a=Uo;if(a&&typeof n=="string"&&n){var d=Yt(n);d='link[rel="'+e+'"][href="'+d+'"]',typeof l=="string"&&(d+='[crossorigin="'+l+'"]'),jm.has(d)||(jm.add(d),e={rel:e,crossOrigin:l,href:n},a.querySelector(d)===null&&(n=a.createElement("link"),Tt(n,"link",e),et(n),a.head.appendChild(n)))}}function i0(e){zn.D(e),ep("dns-prefetch",e,null)}function o0(e,n){zn.C(e,n),ep("preconnect",e,n)}function l0(e,n,l){zn.L(e,n,l);var a=Uo;if(a&&e&&n){var d='link[rel="preload"][as="'+Yt(n)+'"]';n==="image"&&l&&l.imageSrcSet?(d+='[imagesrcset="'+Yt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(d+='[imagesizes="'+Yt(l.imageSizes)+'"]')):d+='[href="'+Yt(e)+'"]';var p=d;switch(n){case"style":p=Lo(e);break;case"script":p=Go(e)}en.has(p)||(e=E({rel:"preload",href:n==="image"&&l&&l.imageSrcSet?void 0:e,as:n},l),en.set(p,e),a.querySelector(d)!==null||n==="style"&&a.querySelector(Ul(p))||n==="script"&&a.querySelector(Ll(p))||(n=a.createElement("link"),Tt(n,"link",e),et(n),a.head.appendChild(n)))}}function s0(e,n){zn.m(e,n);var l=Uo;if(l&&e){var a=n&&typeof n.as=="string"?n.as:"script",d='link[rel="modulepreload"][as="'+Yt(a)+'"][href="'+Yt(e)+'"]',p=d;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Go(e)}if(!en.has(p)&&(e=E({rel:"modulepreload",href:e},n),en.set(p,e),l.querySelector(d)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ll(p)))return}a=l.createElement("link"),Tt(a,"link",e),et(a),l.head.appendChild(a)}}}function a0(e,n,l){zn.S(e,n,l);var a=Uo;if(a&&e){var d=xn(a).hoistableStyles,p=Lo(e);n=n||"default";var S=d.get(p);if(!S){var C={loading:0,preload:null};if(S=a.querySelector(Ul(p)))C.loading=5;else{e=E({rel:"stylesheet",href:e,"data-precedence":n},l),(l=en.get(p))&&ku(e,l);var N=S=a.createElement("link");et(N),Tt(N,"link",e),N._p=new Promise(function(L,B){N.onload=L,N.onerror=B}),N.addEventListener("load",function(){C.loading|=1}),N.addEventListener("error",function(){C.loading|=2}),C.loading|=4,na(S,n,a)}S={type:"stylesheet",instance:S,count:1,state:C},d.set(p,S)}}}function r0(e,n){zn.X(e,n);var l=Uo;if(l&&e){var a=xn(l).hoistableScripts,d=Go(e),p=a.get(d);p||(p=l.querySelector(Ll(d)),p||(e=E({src:e,async:!0},n),(n=en.get(d))&&Bu(e,n),p=l.createElement("script"),et(p),Tt(p,"link",e),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},a.set(d,p))}}function u0(e,n){zn.M(e,n);var l=Uo;if(l&&e){var a=xn(l).hoistableScripts,d=Go(e),p=a.get(d);p||(p=l.querySelector(Ll(d)),p||(e=E({src:e,async:!0,type:"module"},n),(n=en.get(d))&&Bu(e,n),p=l.createElement("script"),et(p),Tt(p,"link",e),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},a.set(d,p))}}function tp(e,n,l,a){var d=(d=_e.current)?ta(d):null;if(!d)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(n=Lo(l.href),l=xn(d).hoistableStyles,a=l.get(n),a||(a={type:"style",instance:null,count:0,state:null},l.set(n,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=Lo(l.href);var p=xn(d).hoistableStyles,S=p.get(e);if(S||(d=d.ownerDocument||d,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(e,S),(p=d.querySelector(Ul(e)))&&!p._p&&(S.instance=p,S.state.loading=5),en.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},en.set(e,l),p||c0(d,e,l,S.state))),n&&a===null)throw Error(s(528,""));return S}if(n&&a!==null)throw Error(s(529,""));return null;case"script":return n=l.async,l=l.src,typeof l=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Go(l),l=xn(d).hoistableScripts,a=l.get(n),a||(a={type:"script",instance:null,count:0,state:null},l.set(n,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Lo(e){return'href="'+Yt(e)+'"'}function Ul(e){return'link[rel="stylesheet"]['+e+"]"}function np(e){return E({},e,{"data-precedence":e.precedence,precedence:null})}function c0(e,n,l,a){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?a.loading=1:(n=e.createElement("link"),a.preload=n,n.addEventListener("load",function(){return a.loading|=1}),n.addEventListener("error",function(){return a.loading|=2}),Tt(n,"link",l),et(n),e.head.appendChild(n))}function Go(e){return'[src="'+Yt(e)+'"]'}function Ll(e){return"script[async]"+e}function ip(e,n,l){if(n.count++,n.instance===null)switch(n.type){case"style":var a=e.querySelector('style[data-href~="'+Yt(l.href)+'"]');if(a)return n.instance=a,et(a),a;var d=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),et(a),Tt(a,"style",d),na(a,l.precedence,e),n.instance=a;case"stylesheet":d=Lo(l.href);var p=e.querySelector(Ul(d));if(p)return n.state.loading|=4,n.instance=p,et(p),p;a=np(l),(d=en.get(d))&&ku(a,d),p=(e.ownerDocument||e).createElement("link"),et(p);var S=p;return S._p=new Promise(function(C,N){S.onload=C,S.onerror=N}),Tt(p,"link",a),n.state.loading|=4,na(p,l.precedence,e),n.instance=p;case"script":return p=Go(l.src),(d=e.querySelector(Ll(p)))?(n.instance=d,et(d),d):(a=l,(d=en.get(p))&&(a=E({},l),Bu(a,d)),e=e.ownerDocument||e,d=e.createElement("script"),et(d),Tt(d,"link",a),e.head.appendChild(d),n.instance=d);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(a=n.instance,n.state.loading|=4,na(a,l.precedence,e));return n.instance}function na(e,n,l){for(var a=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=a.length?a[a.length-1]:null,p=d,S=0;S<a.length;S++){var C=a[S];if(C.dataset.precedence===n)p=C;else if(p!==d)break}p?p.parentNode.insertBefore(e,p.nextSibling):(n=l.nodeType===9?l.head:l,n.insertBefore(e,n.firstChild))}function ku(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Bu(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var ia=null;function op(e,n,l){if(ia===null){var a=new Map,d=ia=new Map;d.set(l,a)}else d=ia,a=d.get(l),a||(a=new Map,d.set(l,a));if(a.has(e))return a;for(a.set(e,null),l=l.getElementsByTagName(e),d=0;d<l.length;d++){var p=l[d];if(!(p[Xe]||p[A]||e==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var S=p.getAttribute(n)||"";S=e+S;var C=a.get(S);C?C.push(p):a.set(S,[p])}}return a}function lp(e,n,l){e=e.ownerDocument||e,e.head.insertBefore(l,n==="title"?e.querySelector("head > title"):null)}function f0(e,n,l){if(l===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function sp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function d0(e,n,l,a){if(l.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var d=Lo(a.href),p=n.querySelector(Ul(d));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=oa.bind(e),n.then(e,e)),l.state.loading|=4,l.instance=p,et(p);return}p=n.ownerDocument||n,a=np(a),(d=en.get(d))&&ku(a,d),p=p.createElement("link"),et(p);var S=p;S._p=new Promise(function(C,N){S.onload=C,S.onerror=N}),Tt(p,"link",a),l.instance=p}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(l,n),(n=l.state.preload)&&(l.state.loading&3)===0&&(e.count++,l=oa.bind(e),n.addEventListener("load",l),n.addEventListener("error",l))}}var zu=0;function m0(e,n){return e.stylesheets&&e.count===0&&sa(e,e.stylesheets),0<e.count||0<e.imgCount?function(l){var a=setTimeout(function(){if(e.stylesheets&&sa(e,e.stylesheets),e.unsuspend){var p=e.unsuspend;e.unsuspend=null,p()}},6e4+n);0<e.imgBytes&&zu===0&&(zu=62500*Ky());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&sa(e,e.stylesheets),e.unsuspend)){var p=e.unsuspend;e.unsuspend=null,p()}},(e.imgBytes>zu?50:800)+n);return e.unsuspend=l,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(d)}}:null}function oa(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sa(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var la=null;function sa(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,la=new Map,n.forEach(p0,e),la=null,oa.call(e))}function p0(e,n){if(!(n.state.loading&4)){var l=la.get(e);if(l)var a=l.get(null);else{l=new Map,la.set(e,l);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<d.length;p++){var S=d[p];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),a=S)}a&&l.set(null,a)}d=n.instance,S=d.getAttribute("data-precedence"),p=l.get(S)||a,p===a&&l.set(null,d),l.set(S,d),this.count++,a=oa.bind(this),d.addEventListener("load",a),d.addEventListener("error",a),p?p.parentNode.insertBefore(d,p.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),n.state.loading|=4}}var Gl={$$typeof:J,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function h0(e,n,l,a,d,p,S,C,N){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xo(0),this.hiddenUpdates=Xo(null),this.identifierPrefix=a,this.onUncaughtError=d,this.onCaughtError=p,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function ap(e,n,l,a,d,p,S,C,N,L,B,F){return e=new h0(e,n,l,S,N,L,B,F,C),n=1,p===!0&&(n|=24),p=qt(3,null,null,n),e.current=p,p.stateNode=e,n=Er(),n.refCount++,e.pooledCache=n,n.refCount++,p.memoizedState={element:a,isDehydrated:l,cache:n},Ar(p),e}function rp(e){return e?(e=fo,e):fo}function up(e,n,l,a,d,p){d=rp(d),a.context===null?a.context=d:a.pendingContext=d,a=oi(n),a.payload={element:l},p=p===void 0?null:p,p!==null&&(a.callback=p),l=li(e,a,n),l!==null&&(Pt(l,e,n),ml(l,e,n))}function cp(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<n?l:n}}function Ou(e,n){cp(e,n),(e=e.alternate)&&cp(e,n)}function fp(e){if(e.tag===13||e.tag===31){var n=Li(e,67108864);n!==null&&Pt(n,e,67108864),Ou(e,67108864)}}function dp(e){if(e.tag===13||e.tag===31){var n=Ft();n=Ii(n);var l=Li(e,n);l!==null&&Pt(l,e,n),Ou(e,n)}}var aa=!0;function g0(e,n,l,a){var d=P.T;P.T=null;var p=K.p;try{K.p=2,Fu(e,n,l,a)}finally{K.p=p,P.T=d}}function v0(e,n,l,a){var d=P.T;P.T=null;var p=K.p;try{K.p=8,Fu(e,n,l,a)}finally{K.p=p,P.T=d}}function Fu(e,n,l,a){if(aa){var d=Ju(a);if(d===null)Iu(e,n,a,ra,l),pp(e,a);else if(S0(d,e,n,l,a))a.stopPropagation();else if(pp(e,a),n&4&&-1<y0.indexOf(e)){for(;d!==null;){var p=Et(d);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var S=_n(p.pendingLanes);if(S!==0){var C=p;for(C.pendingLanes|=2,C.entangledLanes|=2;S;){var N=1<<31-xt(S);C.entanglements[1]|=N,S&=~N}Tn(p),(He&6)===0&&(Fs=ft()+500,bl(0))}}break;case 31:case 13:C=Li(p,2),C!==null&&Pt(C,p,2),Ys(),Ou(p,2)}if(p=Ju(a),p===null&&Iu(e,n,a,ra,l),p===d)break;d=p}d!==null&&a.stopPropagation()}else Iu(e,n,a,null,l)}}function Ju(e){return e=Ka(e),Yu(e)}var ra=null;function Yu(e){if(ra=null,e=Ce(e),e!==null){var n=f(e);if(n===null)e=null;else{var l=n.tag;if(l===13){if(e=m(n),e!==null)return e;e=null}else if(l===31){if(e=g(n),e!==null)return e;e=null}else if(l===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return ra=e,null}function mp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(on()){case Xn:return 2;case Xl:return 8;case $i:case Pa:return 32;case Ql:return 268435456;default:return 32}default:return 32}}var Ku=!1,gi=null,vi=null,yi=null,Pl=new Map,Hl=new Map,Si=[],y0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pp(e,n){switch(e){case"focusin":case"focusout":gi=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":yi=null;break;case"pointerover":case"pointerout":Pl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hl.delete(n.pointerId)}}function Vl(e,n,l,a,d,p){return e===null||e.nativeEvent!==p?(e={blockedOn:n,domEventName:l,eventSystemFlags:a,nativeEvent:p,targetContainers:[d]},n!==null&&(n=Et(n),n!==null&&fp(n)),e):(e.eventSystemFlags|=a,n=e.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),e)}function S0(e,n,l,a,d){switch(n){case"focusin":return gi=Vl(gi,e,n,l,a,d),!0;case"dragenter":return vi=Vl(vi,e,n,l,a,d),!0;case"mouseover":return yi=Vl(yi,e,n,l,a,d),!0;case"pointerover":var p=d.pointerId;return Pl.set(p,Vl(Pl.get(p)||null,e,n,l,a,d)),!0;case"gotpointercapture":return p=d.pointerId,Hl.set(p,Vl(Hl.get(p)||null,e,n,l,a,d)),!0}return!1}function hp(e){var n=Ce(e.target);if(n!==null){var l=f(n);if(l!==null){if(n=l.tag,n===13){if(n=m(l),n!==null){e.blockedOn=n,ns(e.priority,function(){dp(l)});return}}else if(n===31){if(n=g(l),n!==null){e.blockedOn=n,ns(e.priority,function(){dp(l)});return}}else if(n===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ua(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var l=Ju(e.nativeEvent);if(l===null){l=e.nativeEvent;var a=new l.constructor(l.type,l);Ya=a,l.target.dispatchEvent(a),Ya=null}else return n=Et(l),n!==null&&fp(n),e.blockedOn=l,!1;n.shift()}return!0}function gp(e,n,l){ua(e)&&l.delete(n)}function T0(){Ku=!1,gi!==null&&ua(gi)&&(gi=null),vi!==null&&ua(vi)&&(vi=null),yi!==null&&ua(yi)&&(yi=null),Pl.forEach(gp),Hl.forEach(gp)}function ca(e,n){e.blockedOn===n&&(e.blockedOn=null,Ku||(Ku=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,T0)))}var fa=null;function vp(e){fa!==e&&(fa=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){fa===e&&(fa=null);for(var n=0;n<e.length;n+=3){var l=e[n],a=e[n+1],d=e[n+2];if(typeof a!="function"){if(Yu(a||l)===null)continue;break}var p=Et(l);p!==null&&(e.splice(n,3),n-=3,Jr(p,{pending:!0,data:d,method:l.method,action:a},a,d))}}))}function Po(e){function n(N){return ca(N,e)}gi!==null&&ca(gi,e),vi!==null&&ca(vi,e),yi!==null&&ca(yi,e),Pl.forEach(n),Hl.forEach(n);for(var l=0;l<Si.length;l++){var a=Si[l];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Si.length&&(l=Si[0],l.blockedOn===null);)hp(l),l.blockedOn===null&&Si.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(a=0;a<l.length;a+=3){var d=l[a],p=l[a+1],S=d[k]||null;if(typeof p=="function")S||vp(l);else if(S){var C=null;if(p&&p.hasAttribute("formAction")){if(d=p,S=p[k]||null)C=S.formAction;else if(Yu(d)!==null)continue}else C=S.action;typeof C=="function"?l[a+1]=C:(l.splice(a,3),a-=3),vp(l)}}}function yp(){function e(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(S){return d=S})},focusReset:"manual",scroll:"manual"})}function n(){d!==null&&(d(),d=null),a||setTimeout(l,20)}function l(){if(!a&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(l,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),d!==null&&(d(),d=null)}}}function Xu(e){this._internalRoot=e}da.prototype.render=Xu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var l=n.current,a=Ft();up(l,a,e,n,null,null)},da.prototype.unmount=Xu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;up(e.current,2,null,e,null,null),Ys(),n[ue]=null}};function da(e){this._internalRoot=e}da.prototype.unstable_scheduleHydration=function(e){if(e){var n=ts();e={blockedOn:null,target:e,priority:n};for(var l=0;l<Si.length&&n!==0&&n<Si[l].priority;l++);Si.splice(l,0,e),l===0&&hp(e)}};var Sp=t.version;if(Sp!=="19.2.4")throw Error(s(527,Sp,"19.2.4"));K.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=h(n),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var E0={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ma=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ma.isDisabled&&ma.supportsFiber)try{Ri=ma.inject(E0),We=ma}catch{}}return kl.createRoot=function(e,n){if(!r(e))throw Error(s(299));var l=!1,a="",d=Nd,p=Rd,S=Md;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(d=n.onUncaughtError),n.onCaughtError!==void 0&&(p=n.onCaughtError),n.onRecoverableError!==void 0&&(S=n.onRecoverableError)),n=ap(e,1,!1,null,null,l,a,null,d,p,S,yp),e[ue]=n.current,bu(e),new Xu(n)},kl.hydrateRoot=function(e,n,l){if(!r(e))throw Error(s(299));var a=!1,d="",p=Nd,S=Rd,C=Md,N=null;return l!=null&&(l.unstable_strictMode===!0&&(a=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(p=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.formState!==void 0&&(N=l.formState)),n=ap(e,1,!0,n,l??null,a,d,N,p,S,C,yp),n.context=rp(null),l=n.current,a=Ft(),a=Ii(a),d=oi(a),d.callback=null,li(l,d,a),l=a,n.current.lanes=l,bi(n,l),Tn(n),e[ue]=n.current,bu(e),new da(n)},kl.version="19.2.4",kl}var bp;function D0(){if(bp)return Zu.exports;bp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Zu.exports=w0(),Zu.exports}var U0=D0();const L0=hg(U0),Oe={ROLES:"hqbq_roles",API_CONFIGS:"hqbq_api_configs",POSTS:"hqbq_posts",APP_SETTINGS:"hqbq_app_settings",SESSION_PREFIX:"hqbq_session_",WORLD_BOOKS:"hqbq_world_books",CUSTOM_EMOJIS:"hqbq_custom_emojis",USER_PERSONAS:"hqbq_user_personas",MEMORY_VAULT_PREFIX:"hqbq_memory_"},Ca=()=>{const i=localStorage.getItem(Oe.APP_SETTINGS);return i?JSON.parse(i):{}},Ip=i=>{localStorage.setItem(Oe.APP_SETTINGS,JSON.stringify(i))},_i=()=>{const i=localStorage.getItem(Oe.API_CONFIGS);return i?JSON.parse(i):[]},wp=i=>{const t=_i(),o=t.findIndex(s=>s.id===i.id);o>=0?t[o]=i:t.push(i),localStorage.setItem(Oe.API_CONFIGS,JSON.stringify(t))},Xi=()=>{const i=localStorage.getItem(Oe.ROLES);return i?JSON.parse(i):[]},Cc=i=>{const t=Xi(),o=t.findIndex(s=>s.id===i.id);o>=0?t[o]=i:t.unshift(i),localStorage.setItem(Oe.ROLES,JSON.stringify(t))},gg=i=>{const t=Xi().filter(o=>o.id!==i);localStorage.setItem(Oe.ROLES,JSON.stringify(t)),localStorage.removeItem(`${Oe.SESSION_PREFIX}${i}`),localStorage.removeItem(`${Oe.MEMORY_VAULT_PREFIX}${i}`)},Bl=(i,t,o)=>{const s=Xi(),r=s.findIndex(f=>f.id===i);if(r>=0){s[r].lastMessage=t,s[r].lastTime=o;const f=s.splice(r,1)[0];s.unshift(f),localStorage.setItem(Oe.ROLES,JSON.stringify(s))}},vg=i=>{const t=`${Oe.SESSION_PREFIX}${i}`,o=localStorage.getItem(t);return o?JSON.parse(o):[]},tc=(i,t)=>{const o=`${Oe.SESSION_PREFIX}${i}`,s=vg(i);s.push(t),localStorage.setItem(o,JSON.stringify(s))},Dp=(i,t)=>{const o=`${Oe.SESSION_PREFIX}${i}`;localStorage.setItem(o,JSON.stringify(t))},G0=i=>{const t=`${Oe.SESSION_PREFIX}${i}`;localStorage.removeItem(t)},qo=()=>{const i=localStorage.getItem(Oe.POSTS);return i?JSON.parse(i):[]},Up=i=>{const t=qo();t.unshift(i),localStorage.setItem(Oe.POSTS,JSON.stringify(t))},pa=i=>{const t=qo(),o=t.findIndex(s=>s.id===i.id);o>=0&&(t[o]=i,localStorage.setItem(Oe.POSTS,JSON.stringify(t)))},Jl=()=>{const i=localStorage.getItem(Oe.WORLD_BOOKS);return i?JSON.parse(i):[]},yg=i=>{const t=Jl(),o=t.findIndex(s=>s.id===i.id);o>=0?t[o]=i:t.push(i),localStorage.setItem(Oe.WORLD_BOOKS,JSON.stringify(t))},Sg=i=>{const t=Jl().filter(o=>o.id!==i);localStorage.setItem(Oe.WORLD_BOOKS,JSON.stringify(t))},P0=()=>{const i=localStorage.getItem(Oe.CUSTOM_EMOJIS);return i?JSON.parse(i):[]},Lp=i=>{localStorage.setItem(Oe.CUSTOM_EMOJIS,JSON.stringify(i))},Fo=()=>{const i=localStorage.getItem(Oe.USER_PERSONAS);if(!i){const t={id:"default_user",name:"",avatar:"",nickname:"User",description:""};return Tg(t),[t]}return JSON.parse(i)},Tg=i=>{let t=[];const o=localStorage.getItem(Oe.USER_PERSONAS);o&&(t=JSON.parse(o));const s=t.findIndex(r=>r.id===i.id);s>=0?t[s]=i:t.push(i),localStorage.setItem(Oe.USER_PERSONAS,JSON.stringify(t))},H0=i=>{let t=Fo();t=t.filter(o=>o.id!==i),localStorage.setItem(Oe.USER_PERSONAS,JSON.stringify(t))},V0=i=>{const t=`${Oe.MEMORY_VAULT_PREFIX}${i}`,o=localStorage.getItem(t);return o?JSON.parse(o):{roleId:i,userProfile:[],sharedMemories:[],emotionalArchive:[]}},nc=i=>{const t=`${Oe.MEMORY_VAULT_PREFIX}${i.roleId}`;localStorage.setItem(t,JSON.stringify(i))},it=({children:i,variant:t="primary",className:o="",icon:s,...r})=>{const f="jelly-btn flex items-center justify-center rounded-2xl px-4 py-3 font-bold text-sm shadow-md select-none outline-none",m={primary:"bg-mint text-chocolate",secondary:"bg-cream text-chocolate border-2 border-chocolate",danger:"bg-strawberry text-chocolate",ghost:"bg-transparent shadow-none text-cream"};return T.jsxs("button",{className:`${f} ${m[t]} ${o}`,...r,children:[s&&T.jsx("i",{className:`${s} mr-2 text-lg`}),i]})},En=({isOpen:i,onClose:t,title:o,children:s})=>i?T.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[T.jsx("div",{className:"absolute inset-0 bg-chocolate bg-opacity-80 backdrop-blur-sm transition-opacity",onClick:t}),T.jsxs("div",{className:"relative bg-cream w-full max-w-md rounded-3xl p-6 shadow-xl animate-[fadeIn_0.3s_ease-out]",children:[T.jsxs("div",{className:"flex justify-between items-center mb-4",children:[T.jsx("h3",{className:"text-xl font-bold text-chocolate",children:o}),T.jsx("button",{onClick:t,className:"text-chocolate opacity-60 hover:opacity-100 jelly-btn",children:T.jsx("i",{className:"ri-close-circle-fill text-3xl"})})]}),T.jsx("div",{className:"max-h-[70vh] overflow-y-auto no-scrollbar",children:s})]})]}):null,ic=({onChatStart:i})=>{var P,K;const[t,o]=W.useState([]),[s,r]=W.useState([]),[f,m]=W.useState(""),[g,v]=W.useState(!1),[h,y]=W.useState({}),[E,_]=W.useState(null),x=W.useRef(0),I=W.useRef(0),[w,D]=W.useState(!1),[V,$]=W.useState({}),J=W.useRef(null),Z=()=>{o(Xi());const q=Fo();r(q),q.length>0?m(q[0].avatar):m("")};W.useEffect(()=>{Z()},[]);const le=()=>{const q=Fo();q.length>0?y(q[0]):y({id:"",name:"",avatar:"",nickname:"",description:""}),v(!0)},ae=q=>{y(q)},Q=()=>{y({id:"",name:"",avatar:"",nickname:"",description:""})},Y=()=>{if(!h.name||!h.nickname){alert("");return}const q={id:h.id||Date.now().toString(),name:h.name,avatar:h.avatar||"",nickname:h.nickname,description:h.description||""};Tg(q),y(q),Z(),alert("")},X=q=>{confirm("")&&(H0(q),Z(),Q())},oe=()=>{if(!V.nickname){alert("");return}const q={id:Date.now().toString(),avatar:V.avatar||"",nickname:V.nickname,systemPrompt:V.systemPrompt||"",apiConfigId:"global",lastMessage:"",lastTime:Date.now()};Cc(q),Z(),D(!1),$({})},te=()=>{$({avatar:"",systemPrompt:"ai"}),D(!0)},pe=(q,me,ve)=>{q.stopPropagation(),confirm(`${ve}
`)&&(gg(me),Z(),_(null))},se=q=>{x.current=q.touches[0].clientX,I.current=q.touches[0].clientY},Ee=(q,me)=>{const ve=q.changedTouches[0].clientX,R=q.changedTouches[0].clientY,z=x.current-ve,j=I.current-R;Math.abs(z)>Math.abs(j)&&Math.abs(z)>50&&(z>0?_(me):_(null))},Ye=q=>{const me=new Date(q);return`${me.getHours()}:${me.getMinutes().toString().padStart(2,"0")}`};return T.jsxs("div",{className:"h-full flex flex-col",onClick:()=>_(null),children:[T.jsxs("header",{className:"h-[60px] bg-cream flex justify-between items-center px-4 shadow-none shrink-0 z-20 relative",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("button",{onClick:le,className:"w-9 h-9 rounded-full bg-chocolate text-cream flex items-center justify-center overflow-hidden jelly-btn shadow-sm",title:"",children:f.startsWith("http")||f.startsWith("data:")?T.jsx("img",{src:f,className:"w-full h-full object-cover"}):T.jsx("span",{className:"text-xl",children:f})}),T.jsx("h1",{className:"text-lg font-bold text-chocolate",children:""})]}),T.jsx("div",{className:"flex items-center gap-3",children:T.jsx(it,{onClick:te,variant:"primary",className:"!p-1.5 !rounded-full w-8 h-8 shadow-sm",children:T.jsx("i",{className:"ri-add-line text-lg"})})})]}),T.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-4 pt-4 no-scrollbar space-y-3",children:t.length===0?T.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-cream/60",children:[T.jsx("i",{className:"ri-ghost-smile-line text-6xl mb-4"}),T.jsx("p",{children:""})]}):t.map(q=>T.jsxs("div",{className:"relative h-[88px] w-full rounded-3xl overflow-hidden shadow-md group",children:[T.jsx("div",{className:"absolute inset-0 bg-strawberry flex items-center justify-end pr-6",children:T.jsxs("button",{onClick:me=>pe(me,q.id,q.nickname),className:"flex flex-col items-center text-white",children:[T.jsx("i",{className:"ri-delete-bin-line text-xl mb-1"}),T.jsx("span",{className:"text-xs font-bold",children:""})]})}),T.jsxs("div",{className:"absolute inset-0 bg-cream flex items-center p-4 transition-transform duration-300 ease-out border-2 border-transparent active:scale-[0.98]",style:{transform:E===q.id?"translateX(-80px)":"translateX(0)"},onClick:me=>{me.stopPropagation(),E===q.id?_(null):i(q)},onTouchStart:se,onTouchEnd:me=>Ee(me,q.id),children:[T.jsx("div",{className:"w-14 h-14 bg-mint rounded-full flex items-center justify-center text-3xl shadow-inner mr-4 shrink-0 overflow-hidden pointer-events-none select-none",children:q.avatar.startsWith("http")||q.avatar.startsWith("data:")?T.jsx("img",{src:q.avatar,className:"w-full h-full object-cover",alt:"avatar"}):q.avatar}),T.jsxs("div",{className:"flex-1 min-w-0 pointer-events-none select-none",children:[T.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[T.jsx("h3",{className:"font-bold text-chocolate text-lg truncate",children:q.remark||q.nickname}),T.jsx("span",{className:"text-xs text-chocolate/50",children:Ye(q.lastTime)})]}),T.jsx("p",{className:"text-sm text-chocolate/70 truncate",children:q.lastMessage})]})]})]},q.id))}),T.jsx(En,{isOpen:w,onClose:()=>D(!1),title:"",children:T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"flex gap-4 items-center",children:[T.jsx("div",{className:"w-16 h-16 bg-mint rounded-full flex items-center justify-center text-3xl shadow-sm overflow-hidden",children:V.avatar}),T.jsxs("div",{className:"flex-1",children:[T.jsx("label",{className:"text-xs font-bold text-chocolate/70 mb-1 block",children:" (Emoji)"}),T.jsx("input",{className:"w-full bg-chocolate/5 rounded-lg p-2 text-sm outline-none border border-transparent focus:border-mint",placeholder:"Emoji",value:V.avatar||"",onChange:q=>$({...V,avatar:q.target.value})})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-bold text-chocolate/70 mb-1 block",children:""}),T.jsx("input",{className:"w-full bg-chocolate/5 rounded-lg p-2 text-sm outline-none border border-transparent focus:border-mint",placeholder:"",value:V.nickname||"",onChange:q=>$({...V,nickname:q.target.value})})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-bold text-chocolate/70 mb-1 block",children:" (Prompt)"}),T.jsx("textarea",{className:"w-full bg-chocolate/5 rounded-lg p-2 text-sm outline-none border border-transparent focus:border-mint resize-none h-24",placeholder:"...",value:V.systemPrompt||"",onChange:q=>$({...V,systemPrompt:q.target.value})})]}),T.jsx(it,{onClick:oe,className:"w-full mt-2",children:""})]})}),T.jsx(En,{isOpen:g,onClose:()=>v(!1),title:"",children:T.jsxs("div",{className:"flex h-[60vh] gap-4",children:[T.jsxs("div",{className:"w-1/3 border-r border-chocolate/10 pr-2 overflow-y-auto space-y-2 no-scrollbar",children:[T.jsx("button",{onClick:Q,className:"w-full p-2 bg-mint/20 text-mint rounded-lg text-xs font-bold border border-mint hover:bg-mint hover:text-chocolate transition-colors mb-2",children:"+ "}),s.map(q=>T.jsxs("div",{onClick:()=>ae(q),className:`p-2 rounded-lg cursor-pointer text-left transition-colors ${h.id===q.id?"bg-chocolate text-cream":"bg-chocolate/5 text-chocolate hover:bg-chocolate/10"}`,children:[T.jsx("div",{className:"text-xs font-bold truncate",children:q.name}),T.jsx("div",{className:"text-[10px] opacity-70 truncate",children:q.nickname})]},q.id))]}),T.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar space-y-3 pl-1",children:[T.jsx("h4",{className:"text-xs font-bold text-chocolate opacity-50 border-b border-chocolate/10 pb-1",children:h.id?"":""}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-bold text-chocolate/70",children:" ()"}),T.jsx("input",{className:"w-full bg-chocolate/5 rounded p-1.5 text-sm outline-none",placeholder:": ",value:h.name||"",onChange:q=>y({...h,name:q.target.value})})]}),T.jsxs("div",{className:"flex gap-3 items-center",children:[T.jsx("div",{className:"w-12 h-12 rounded-full bg-chocolate/10 flex items-center justify-center overflow-hidden shrink-0",children:(P=h.avatar)!=null&&P.startsWith("http")||(K=h.avatar)!=null&&K.startsWith("data:")?T.jsx("img",{src:h.avatar,className:"w-full h-full object-cover"}):T.jsx("span",{className:"text-2xl",children:h.avatar||""})}),T.jsxs("div",{className:"flex-1 space-y-1",children:[T.jsx("input",{type:"file",ref:J,className:"hidden",accept:"image/*",onChange:q=>{var ve;const me=(ve=q.target.files)==null?void 0:ve[0];if(me){const R=new FileReader;R.onloadend=()=>y({...h,avatar:R.result}),R.readAsDataURL(me)}}}),T.jsx("button",{onClick:()=>{var q;return(q=J.current)==null?void 0:q.click()},className:"text-xs bg-chocolate/10 px-2 py-1 rounded hover:bg-chocolate/20",children:""}),T.jsx("input",{className:"w-full bg-chocolate/5 rounded p-1.5 text-sm outline-none",placeholder:" (AI)",value:h.nickname||"",onChange:q=>y({...h,nickname:q.target.value})})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-bold text-chocolate/70",children:""}),T.jsx("textarea",{className:"w-full bg-chocolate/5 rounded p-2 text-sm h-32 outline-none resize-none",placeholder:"25...",value:h.description||"",onChange:q=>y({...h,description:q.target.value})})]}),T.jsxs("div",{className:"pt-2 flex gap-2",children:[h.id&&T.jsx(it,{onClick:()=>X(h.id),variant:"danger",className:"!py-2 text-xs w-1/3",children:""}),T.jsx(it,{onClick:Y,className:"!py-2 text-xs flex-1",children:""})]})]})]})})]})};var q0={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let k0,B0;function z0(){return{geminiUrl:k0,vertexUrl:B0}}function O0(i,t,o,s){var r,f;if(!(i!=null&&i.baseUrl)){const m=z0();return t?(r=m.vertexUrl)!==null&&r!==void 0?r:o:(f=m.geminiUrl)!==null&&f!==void 0?f:s}return i.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fn{}function ne(i,t){const o=/\{([^}]+)\}/g;return i.replace(o,(s,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const f=t[r];return f!=null?String(f):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function c(i,t,o){for(let f=0;f<t.length-1;f++){const m=t[f];if(m.endsWith("[]")){const g=m.slice(0,-2);if(!(g in i))if(Array.isArray(o))i[g]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${m}`);if(Array.isArray(i[g])){const v=i[g];if(Array.isArray(o))for(let h=0;h<v.length;h++){const y=v[h];c(y,t.slice(f+1),o[h])}else for(const h of v)c(h,t.slice(f+1),o)}return}else if(m.endsWith("[0]")){const g=m.slice(0,-3);g in i||(i[g]=[{}]);const v=i[g];c(v[0],t.slice(f+1),o);return}(!i[m]||typeof i[m]!="object")&&(i[m]={}),i=i[m]}const s=t[t.length-1],r=i[s];if(r!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===r)return;if(typeof r=="object"&&typeof o=="object"&&r!==null&&o!==null)Object.assign(r,o);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(i,o):i[s]=o}function u(i,t,o=void 0){try{if(t.length===1&&t[0]==="_self")return i;for(let s=0;s<t.length;s++){if(typeof i!="object"||i===null)return o;const r=t[s];if(r.endsWith("[]")){const f=r.slice(0,-2);if(f in i){const m=i[f];return Array.isArray(m)?m.map(g=>u(g,t.slice(s+1),o)):o}else return o}else i=i[r]}return i}catch(s){if(s instanceof TypeError)return o;throw s}}function F0(i,t){for(const[o,s]of Object.entries(t)){const r=o.split("."),f=s.split("."),m=new Set;let g=-1;for(let v=0;v<r.length;v++)if(r[v]==="*"){g=v;break}if(g!==-1&&f.length>g)for(let v=g;v<f.length;v++){const h=f[v];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&m.add(h)}ac(i,r,f,0,m)}}function ac(i,t,o,s,r){if(s>=t.length||typeof i!="object"||i===null)return;const f=t[s];if(f.endsWith("[]")){const m=f.slice(0,-2),g=i;if(m in g&&Array.isArray(g[m]))for(const v of g[m])ac(v,t,o,s+1,r)}else if(f==="*"){if(typeof i=="object"&&i!==null&&!Array.isArray(i)){const m=i,g=Object.keys(m).filter(h=>!h.startsWith("_")&&!r.has(h)),v={};for(const h of g)v[h]=m[h];for(const[h,y]of Object.entries(v)){const E=[];for(const _ of o.slice(s))_==="*"?E.push(h):E.push(_);c(m,E,y)}for(const h of g)delete m[h]}}else{const m=i;f in m&&ac(m[f],t,o,s+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xc(i){if(typeof i!="string")throw new Error("fromImageBytes must be a string");return i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J0(i){const t={},o=u(i,["operationName"]);o!=null&&c(t,["operationName"],o);const s=u(i,["resourceName"]);return s!=null&&c(t,["_url","resourceName"],s),t}function Y0(i){const t={},o=u(i,["name"]);o!=null&&c(t,["name"],o);const s=u(i,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(i,["done"]);r!=null&&c(t,["done"],r);const f=u(i,["error"]);f!=null&&c(t,["error"],f);const m=u(i,["response","generateVideoResponse"]);return m!=null&&c(t,["response"],X0(m)),t}function K0(i){const t={},o=u(i,["name"]);o!=null&&c(t,["name"],o);const s=u(i,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(i,["done"]);r!=null&&c(t,["done"],r);const f=u(i,["error"]);f!=null&&c(t,["error"],f);const m=u(i,["response"]);return m!=null&&c(t,["response"],Q0(m)),t}function X0(i){const t={},o=u(i,["generatedSamples"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(m=>$0(m))),c(t,["generatedVideos"],f)}const s=u(i,["raiMediaFilteredCount"]);s!=null&&c(t,["raiMediaFilteredCount"],s);const r=u(i,["raiMediaFilteredReasons"]);return r!=null&&c(t,["raiMediaFilteredReasons"],r),t}function Q0(i){const t={},o=u(i,["videos"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(m=>Z0(m))),c(t,["generatedVideos"],f)}const s=u(i,["raiMediaFilteredCount"]);s!=null&&c(t,["raiMediaFilteredCount"],s);const r=u(i,["raiMediaFilteredReasons"]);return r!=null&&c(t,["raiMediaFilteredReasons"],r),t}function $0(i){const t={},o=u(i,["video"]);return o!=null&&c(t,["video"],iS(o)),t}function Z0(i){const t={},o=u(i,["_self"]);return o!=null&&c(t,["video"],oS(o)),t}function W0(i){const t={},o=u(i,["operationName"]);return o!=null&&c(t,["_url","operationName"],o),t}function j0(i){const t={},o=u(i,["operationName"]);return o!=null&&c(t,["_url","operationName"],o),t}function eS(i){const t={},o=u(i,["name"]);o!=null&&c(t,["name"],o);const s=u(i,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(i,["done"]);r!=null&&c(t,["done"],r);const f=u(i,["error"]);f!=null&&c(t,["error"],f);const m=u(i,["response"]);return m!=null&&c(t,["response"],tS(m)),t}function tS(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["parent"]);s!=null&&c(t,["parent"],s);const r=u(i,["documentName"]);return r!=null&&c(t,["documentName"],r),t}function Eg(i){const t={},o=u(i,["name"]);o!=null&&c(t,["name"],o);const s=u(i,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(i,["done"]);r!=null&&c(t,["done"],r);const f=u(i,["error"]);f!=null&&c(t,["error"],f);const m=u(i,["response"]);return m!=null&&c(t,["response"],nS(m)),t}function nS(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["parent"]);s!=null&&c(t,["parent"],s);const r=u(i,["documentName"]);return r!=null&&c(t,["documentName"],r),t}function iS(i){const t={},o=u(i,["uri"]);o!=null&&c(t,["uri"],o);const s=u(i,["encodedVideo"]);s!=null&&c(t,["videoBytes"],xc(s));const r=u(i,["encoding"]);return r!=null&&c(t,["mimeType"],r),t}function oS(i){const t={},o=u(i,["gcsUri"]);o!=null&&c(t,["uri"],o);const s=u(i,["bytesBase64Encoded"]);s!=null&&c(t,["videoBytes"],xc(s));const r=u(i,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Gp;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Gp||(Gp={}));var Pp;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(Pp||(Pp={}));var Hp;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(Hp||(Hp={}));var Ei;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(Ei||(Ei={}));var Vp;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Vp||(Vp={}));var qp;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(qp||(qp={}));var kp;(function(i){i.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",i.HTTP_IN_QUERY="HTTP_IN_QUERY",i.HTTP_IN_HEADER="HTTP_IN_HEADER",i.HTTP_IN_PATH="HTTP_IN_PATH",i.HTTP_IN_BODY="HTTP_IN_BODY",i.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(kp||(kp={}));var Bp;(function(i){i.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",i.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",i.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",i.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Bp||(Bp={}));var zp;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(zp||(zp={}));var Op;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Op||(Op={}));var Fp;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(Fp||(Fp={}));var Jp;(function(i){i.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH",i.MINIMAL="MINIMAL"})(Jp||(Jp={}));var Yp;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Yp||(Yp={}));var Kp;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(Kp||(Kp={}));var Xp;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(Xp||(Xp={}));var Qp;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE",i.IMAGE_RECITATION="IMAGE_RECITATION",i.IMAGE_OTHER="IMAGE_OTHER"})(Qp||(Qp={}));var $p;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})($p||($p={}));var Zp;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Zp||(Zp={}));var Wp;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Wp||(Wp={}));var jp;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(jp||(jp={}));var eh;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(eh||(eh={}));var xa;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(xa||(xa={}));var th;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(th||(th={}));var nh;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(nh||(nh={}));var ih;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ih||(ih={}));var rc;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(rc||(rc={}));var oh;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V",i.TUNING_TASK_R2V="TUNING_TASK_R2V"})(oh||(oh={}));var lh;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",i.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(lh||(lh={}));var uc;(function(i){i.COLLECTION="COLLECTION"})(uc||(uc={}));var sh;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(sh||(sh={}));var ah;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(ah||(ah={}));var rh;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(rh||(rh={}));var uh;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(uh||(uh={}));var ch;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})(ch||(ch={}));var fh;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(fh||(fh={}));var dh;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(dh||(dh={}));var mh;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(mh||(mh={}));var ph;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ph||(ph={}));var hh;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(hh||(hh={}));var gh;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(gh||(gh={}));var vh;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(vh||(vh={}));var yh;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(yh||(yh={}));var Sh;(function(i){i.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",i.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Sh||(Sh={}));var Th;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.STATE_PENDING="STATE_PENDING",i.STATE_ACTIVE="STATE_ACTIVE",i.STATE_FAILED="STATE_FAILED"})(Th||(Th={}));var Eh;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(Eh||(Eh={}));var _h;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED",i.REGISTERED="REGISTERED"})(_h||(_h={}));var Ch;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Ch||(Ch={}));var xh;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(xh||(xh={}));var Ah;(function(i){i.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",i.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",i.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Ah||(Ah={}));var Nh;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.ACTIVITY_START="ACTIVITY_START",i.ACTIVITY_END="ACTIVITY_END"})(Nh||(Nh={}));var Rh;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Rh||(Rh={}));var Mh;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Mh||(Mh={}));var bh;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(bh||(bh={}));var Ih;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ih||(Ih={}));var wh;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(wh||(wh={}));var Dh;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(Dh||(Dh={}));var ko;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(ko||(ko={}));class cc{constructor(t){const o={};for(const s of t.headers.entries())o[s[0]]=s[1];this.headers=o,this.responseInternal=t}json(){return this.responseInternal.json()}}class zl{get text(){var t,o,s,r,f,m,g,v;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",y=!1;const E=[];for(const _ of(v=(g=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)!==null&&v!==void 0?v:[]){for(const[x,I]of Object.entries(_))x!=="text"&&x!=="thought"&&x!=="thoughtSignature"&&(I!==null||I!==void 0)&&E.push(x);if(typeof _.text=="string"){if(typeof _.thought=="boolean"&&_.thought)continue;y=!0,h+=_.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?h:void 0}get data(){var t,o,s,r,f,m,g,v;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const y=[];for(const E of(v=(g=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)!==null&&v!==void 0?v:[]){for(const[_,x]of Object.entries(E))_!=="inlineData"&&(x!==null||x!==void 0)&&y.push(_);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var t,o,s,r,f,m,g,v;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(v=(g=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)===null||v===void 0?void 0:v.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var t,o,s,r,f,m,g,v,h;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(v=(g=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)===null||v===void 0?void 0:v.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var t,o,s,r,f,m,g,v,h;if(((r=(s=(o=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||o===void 0?void 0:o.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(v=(g=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)===null||v===void 0?void 0:v.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.output}}class Uh{}class Lh{}class lS{}class sS{}class aS{}class rS{}class Gh{}class Ph{}class Hh{}class uS{}class Aa{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const s=new Aa;let r;const f=t;return o?r=K0(f):r=Y0(f),Object.assign(s,r),s}}class Vh{}class qh{}class kh{}class Bh{}class cS{}class fS{}class dS{}class Ac{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const s=new Ac,f=eS(t);return Object.assign(s,f),s}}class mS{}class pS{}class hS{}class zh{}class gS{get text(){var t,o,s;let r="",f=!1;const m=[];for(const g of(s=(o=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[v,h]of Object.entries(g))v!=="text"&&v!=="thought"&&h!==null&&m.push(v);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;f=!0,r+=g.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?r:void 0}get data(){var t,o,s;let r="";const f=[];for(const m of(s=(o=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&s!==void 0?s:[]){for(const[g,v]of Object.entries(m))g!=="inlineData"&&v!==null&&f.push(g);m.inlineData&&typeof m.inlineData.data=="string"&&(r+=atob(m.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class vS{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Nc{_fromAPIResponse({apiResponse:t,_isVertexAI:o}){const s=new Nc,f=Eg(t);return Object.assign(s,f),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pe(i,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(i.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const o=t.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function _g(i,t){const o=Pe(i,t);return o?o.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${o}`:o.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${o}`:o:""}function Cg(i){return Array.isArray(i)?i.map(t=>Na(t)):[Na(i)]}function Na(i){if(typeof i=="object"&&i!==null)return i;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof i}`)}function xg(i){const t=Na(i);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Ag(i){const t=Na(i);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Oh(i){if(i==null)throw new Error("PartUnion is required");if(typeof i=="object")return i;if(typeof i=="string")return{text:i};throw new Error(`Unsupported part type: ${typeof i}`)}function Ng(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("PartListUnion is required");return Array.isArray(i)?i.map(t=>Oh(t)):[Oh(i)]}function fc(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function Fh(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function Jh(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function Ct(i){if(i==null)throw new Error("ContentUnion is required");return fc(i)?i:{role:"user",parts:Ng(i)}}function Rc(i,t){if(!t)return[];if(i.isVertexAI()&&Array.isArray(t))return t.flatMap(o=>{const s=Ct(o);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(i.isVertexAI()){const o=Ct(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(t)?t.map(o=>Ct(o)):[Ct(t)]}function tn(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("contents are required");if(!Array.isArray(i)){if(Fh(i)||Jh(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ct(i)]}const t=[],o=[],s=fc(i[0]);for(const r of i){const f=fc(r);if(f!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(f)t.push(r);else{if(Fh(r)||Jh(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(r)}}return s||t.push({role:"user",parts:Ng(o)}),t}function yS(i,t){i.includes("null")&&(t.nullable=!0);const o=i.filter(s=>s!=="null");if(o.length===1)t.type=Object.values(Ei).includes(o[0].toUpperCase())?o[0].toUpperCase():Ei.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const s of o)t.anyOf.push({type:Object.values(Ei).includes(s.toUpperCase())?s.toUpperCase():Ei.TYPE_UNSPECIFIED})}}function zo(i){const t={},o=["items"],s=["anyOf"],r=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const f=i.anyOf;f!=null&&f.length==2&&(f[0].type==="null"?(t.nullable=!0,i=f[1]):f[1].type==="null"&&(t.nullable=!0,i=f[0])),i.type instanceof Array&&yS(i.type,t);for(const[m,g]of Object.entries(i))if(g!=null)if(m=="type"){if(g==="null")throw new Error("type: null can not be the only possible type for the field.");if(g instanceof Array)continue;t.type=Object.values(Ei).includes(g.toUpperCase())?g.toUpperCase():Ei.TYPE_UNSPECIFIED}else if(o.includes(m))t[m]=zo(g);else if(s.includes(m)){const v=[];for(const h of g){if(h.type=="null"){t.nullable=!0;continue}v.push(zo(h))}t[m]=v}else if(r.includes(m)){const v={};for(const[h,y]of Object.entries(g))v[h]=zo(y);t[m]=v}else{if(m==="additionalProperties")continue;t[m]=g}return t}function Mc(i){return zo(i)}function bc(i){if(typeof i=="object")return i;if(typeof i=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:i}}};throw new Error(`Unsupported speechConfig type: ${typeof i}`)}function Ic(i){if("multiSpeakerVoiceConfig"in i)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return i}function Jo(i){if(i.functionDeclarations)for(const t of i.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=zo(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=zo(t.response));return i}function Yo(i){if(i==null)throw new Error("tools is required");if(!Array.isArray(i))throw new Error("tools is required and must be an array of Tools");const t=[];for(const o of i)t.push(o);return t}function SS(i,t,o,s=1){const r=!t.startsWith(`${o}/`)&&t.split("/").length===s;return i.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${i.getProject()}/${t}`:t.startsWith(`${o}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:r?`projects/${i.getProject()}/locations/${i.getLocation()}/${o}/${t}`:t:r?`${o}/${t}`:t}function Jn(i,t){if(typeof t!="string")throw new Error("name must be a string");return SS(i,t,"cachedContents")}function Rg(i){switch(i){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return i}}function Ci(i){return xc(i)}function TS(i){return i!=null&&typeof i=="object"&&"name"in i}function ES(i){return i!=null&&typeof i=="object"&&"video"in i}function _S(i){return i!=null&&typeof i=="object"&&"uri"in i}function Mg(i){var t;let o;if(TS(i)&&(o=i.name),!(_S(i)&&(o=i.uri,o===void 0))&&!(ES(i)&&(o=(t=i.video)===null||t===void 0?void 0:t.uri,o===void 0))){if(typeof i=="string"&&(o=i),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const r=o.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${o}`);o=r[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function bg(i,t){let o;return i.isVertexAI()?o=t?"publishers/google/models":"models":o=t?"models":"tunedModels",o}function Ig(i){for(const t of["models","tunedModels","publisherModels"])if(CS(i,t))return i[t];return[]}function CS(i,t){return i!==null&&typeof i=="object"&&t in i}function xS(i,t={}){const o=i,s={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(s.responseJsonSchema=o.outputSchema),t.behavior&&(s.behavior=t.behavior),{functionDeclarations:[s]}}function AS(i,t={}){const o=[],s=new Set;for(const r of i){const f=r.name;if(s.has(f))throw new Error(`Duplicate function name ${f} found in MCP tools. Please ensure function names are unique.`);s.add(f);const m=xS(r,t);m.functionDeclarations&&o.push(...m.functionDeclarations)}return{functionDeclarations:o}}function wg(i,t){let o;if(typeof t=="string")if(i.isVertexAI())if(t.startsWith("gs://"))o={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))o={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))o={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(i.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");o={inlinedRequests:t}}else o=t;const s=[o.gcsUri,o.bigqueryUri].filter(Boolean).length,r=[o.inlinedRequests,o.fileName].filter(Boolean).length;if(i.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return o}function NS(i){if(typeof i!="string")return i;const t=i;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Dg(i){if(typeof i!="object"||i===null)return{};const t=i,o=t.inlinedResponses;if(typeof o!="object"||o===null)return i;const r=o.inlinedResponses;if(!Array.isArray(r)||r.length===0)return i;let f=!1;for(const m of r){if(typeof m!="object"||m===null)continue;const v=m.response;if(typeof v!="object"||v===null)continue;if(v.embedding!==void 0){f=!0;break}}return f&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),i}function Ko(i,t){const o=t;if(!i.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function Ug(i){const t=i;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RS(i){const t={},o=u(i,["responsesFile"]);o!=null&&c(t,["fileName"],o);const s=u(i,["inlinedResponses","inlinedResponses"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(m=>aT(m))),c(t,["inlinedResponses"],f)}const r=u(i,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(m=>m)),c(t,["inlinedEmbedContentResponses"],f)}return t}function MS(i){const t={},o=u(i,["predictionsFormat"]);o!=null&&c(t,["format"],o);const s=u(i,["gcsDestination","outputUriPrefix"]);s!=null&&c(t,["gcsUri"],s);const r=u(i,["bigqueryDestination","outputUri"]);return r!=null&&c(t,["bigqueryUri"],r),t}function bS(i){const t={},o=u(i,["format"]);o!=null&&c(t,["predictionsFormat"],o);const s=u(i,["gcsUri"]);s!=null&&c(t,["gcsDestination","outputUriPrefix"],s);const r=u(i,["bigqueryUri"]);if(r!=null&&c(t,["bigqueryDestination","outputUri"],r),u(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(i,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(i,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function Ea(i){const t={},o=u(i,["name"]);o!=null&&c(t,["name"],o);const s=u(i,["metadata","displayName"]);s!=null&&c(t,["displayName"],s);const r=u(i,["metadata","state"]);r!=null&&c(t,["state"],Ug(r));const f=u(i,["metadata","createTime"]);f!=null&&c(t,["createTime"],f);const m=u(i,["metadata","endTime"]);m!=null&&c(t,["endTime"],m);const g=u(i,["metadata","updateTime"]);g!=null&&c(t,["updateTime"],g);const v=u(i,["metadata","model"]);v!=null&&c(t,["model"],v);const h=u(i,["metadata","output"]);return h!=null&&c(t,["dest"],RS(Dg(h))),t}function dc(i){const t={},o=u(i,["name"]);o!=null&&c(t,["name"],o);const s=u(i,["displayName"]);s!=null&&c(t,["displayName"],s);const r=u(i,["state"]);r!=null&&c(t,["state"],Ug(r));const f=u(i,["error"]);f!=null&&c(t,["error"],f);const m=u(i,["createTime"]);m!=null&&c(t,["createTime"],m);const g=u(i,["startTime"]);g!=null&&c(t,["startTime"],g);const v=u(i,["endTime"]);v!=null&&c(t,["endTime"],v);const h=u(i,["updateTime"]);h!=null&&c(t,["updateTime"],h);const y=u(i,["model"]);y!=null&&c(t,["model"],y);const E=u(i,["inputConfig"]);E!=null&&c(t,["src"],IS(E));const _=u(i,["outputConfig"]);_!=null&&c(t,["dest"],MS(Dg(_)));const x=u(i,["completionStats"]);return x!=null&&c(t,["completionStats"],x),t}function IS(i){const t={},o=u(i,["instancesFormat"]);o!=null&&c(t,["format"],o);const s=u(i,["gcsSource","uris"]);s!=null&&c(t,["gcsUri"],s);const r=u(i,["bigquerySource","inputUri"]);return r!=null&&c(t,["bigqueryUri"],r),t}function wS(i,t){const o={};if(u(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=u(t,["fileName"]);s!=null&&c(o,["fileName"],s);const r=u(t,["inlinedRequests"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(m=>sT(i,m))),c(o,["requests","requests"],f)}return o}function DS(i){const t={},o=u(i,["format"]);o!=null&&c(t,["instancesFormat"],o);const s=u(i,["gcsUri"]);s!=null&&c(t,["gcsSource","uris"],s);const r=u(i,["bigqueryUri"]);if(r!=null&&c(t,["bigquerySource","inputUri"],r),u(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(i,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function US(i){const t={},o=u(i,["data"]);if(o!=null&&c(t,["data"],o),u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(i,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function LS(i,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],Ko(i,s)),o}function GS(i,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],Ko(i,s)),o}function PS(i){const t={},o=u(i,["content"]);o!=null&&c(t,["content"],o);const s=u(i,["citationMetadata"]);s!=null&&c(t,["citationMetadata"],HS(s));const r=u(i,["tokenCount"]);r!=null&&c(t,["tokenCount"],r);const f=u(i,["finishReason"]);f!=null&&c(t,["finishReason"],f);const m=u(i,["avgLogprobs"]);m!=null&&c(t,["avgLogprobs"],m);const g=u(i,["groundingMetadata"]);g!=null&&c(t,["groundingMetadata"],g);const v=u(i,["index"]);v!=null&&c(t,["index"],v);const h=u(i,["logprobsResult"]);h!=null&&c(t,["logprobsResult"],h);const y=u(i,["safetyRatings"]);if(y!=null){let _=y;Array.isArray(_)&&(_=_.map(x=>x)),c(t,["safetyRatings"],_)}const E=u(i,["urlContextMetadata"]);return E!=null&&c(t,["urlContextMetadata"],E),t}function HS(i){const t={},o=u(i,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(t,["citations"],s)}return t}function Lg(i){const t={},o=u(i,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(f=>pT(f))),c(t,["parts"],r)}const s=u(i,["role"]);return s!=null&&c(t,["role"],s),t}function VS(i,t){const o={},s=u(i,["displayName"]);if(t!==void 0&&s!=null&&c(t,["batch","displayName"],s),u(i,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function qS(i,t){const o={},s=u(i,["displayName"]);t!==void 0&&s!=null&&c(t,["displayName"],s);const r=u(i,["dest"]);return t!==void 0&&r!=null&&c(t,["outputConfig"],bS(NS(r))),o}function Yh(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Pe(i,s));const r=u(t,["src"]);r!=null&&c(o,["batch","inputConfig"],wS(i,wg(i,r)));const f=u(t,["config"]);return f!=null&&VS(f,o),o}function kS(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["model"],Pe(i,s));const r=u(t,["src"]);r!=null&&c(o,["inputConfig"],DS(wg(i,r)));const f=u(t,["config"]);return f!=null&&qS(f,o),o}function BS(i,t){const o={},s=u(i,["displayName"]);return t!==void 0&&s!=null&&c(t,["batch","displayName"],s),o}function zS(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Pe(i,s));const r=u(t,["src"]);r!=null&&c(o,["batch","inputConfig"],QS(i,r));const f=u(t,["config"]);return f!=null&&BS(f,o),o}function OS(i,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],Ko(i,s)),o}function FS(i,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],Ko(i,s)),o}function JS(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["name"]);s!=null&&c(t,["name"],s);const r=u(i,["done"]);r!=null&&c(t,["done"],r);const f=u(i,["error"]);return f!=null&&c(t,["error"],f),t}function YS(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["name"]);s!=null&&c(t,["name"],s);const r=u(i,["done"]);r!=null&&c(t,["done"],r);const f=u(i,["error"]);return f!=null&&c(t,["error"],f),t}function KS(i,t){const o={},s=u(t,["contents"]);if(s!=null){let f=Rc(i,s);Array.isArray(f)&&(f=f.map(m=>m)),c(o,["requests[]","request","content"],f)}const r=u(t,["config"]);return r!=null&&(c(o,["_self"],XS(r,o)),F0(o,{"requests[].*":"requests[].request.*"})),o}function XS(i,t){const o={},s=u(i,["taskType"]);t!==void 0&&s!=null&&c(t,["requests[]","taskType"],s);const r=u(i,["title"]);t!==void 0&&r!=null&&c(t,["requests[]","title"],r);const f=u(i,["outputDimensionality"]);if(t!==void 0&&f!=null&&c(t,["requests[]","outputDimensionality"],f),u(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function QS(i,t){const o={},s=u(t,["fileName"]);s!=null&&c(o,["file_name"],s);const r=u(t,["inlinedRequests"]);return r!=null&&c(o,["requests"],KS(i,r)),o}function $S(i){const t={};if(u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(i,["fileUri"]);o!=null&&c(t,["fileUri"],o);const s=u(i,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function ZS(i){const t={},o=u(i,["id"]);o!=null&&c(t,["id"],o);const s=u(i,["args"]);s!=null&&c(t,["args"],s);const r=u(i,["name"]);if(r!=null&&c(t,["name"],r),u(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function WS(i){const t={},o=u(i,["allowedFunctionNames"]);o!=null&&c(t,["allowedFunctionNames"],o);const s=u(i,["mode"]);if(s!=null&&c(t,["mode"],s),u(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function jS(i,t,o){const s={},r=u(t,["systemInstruction"]);o!==void 0&&r!=null&&c(o,["systemInstruction"],Lg(Ct(r)));const f=u(t,["temperature"]);f!=null&&c(s,["temperature"],f);const m=u(t,["topP"]);m!=null&&c(s,["topP"],m);const g=u(t,["topK"]);g!=null&&c(s,["topK"],g);const v=u(t,["candidateCount"]);v!=null&&c(s,["candidateCount"],v);const h=u(t,["maxOutputTokens"]);h!=null&&c(s,["maxOutputTokens"],h);const y=u(t,["stopSequences"]);y!=null&&c(s,["stopSequences"],y);const E=u(t,["responseLogprobs"]);E!=null&&c(s,["responseLogprobs"],E);const _=u(t,["logprobs"]);_!=null&&c(s,["logprobs"],_);const x=u(t,["presencePenalty"]);x!=null&&c(s,["presencePenalty"],x);const I=u(t,["frequencyPenalty"]);I!=null&&c(s,["frequencyPenalty"],I);const w=u(t,["seed"]);w!=null&&c(s,["seed"],w);const D=u(t,["responseMimeType"]);D!=null&&c(s,["responseMimeType"],D);const V=u(t,["responseSchema"]);V!=null&&c(s,["responseSchema"],Mc(V));const $=u(t,["responseJsonSchema"]);if($!=null&&c(s,["responseJsonSchema"],$),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const J=u(t,["safetySettings"]);if(o!==void 0&&J!=null){let se=J;Array.isArray(se)&&(se=se.map(Ee=>hT(Ee))),c(o,["safetySettings"],se)}const Z=u(t,["tools"]);if(o!==void 0&&Z!=null){let se=Yo(Z);Array.isArray(se)&&(se=se.map(Ee=>vT(Jo(Ee)))),c(o,["tools"],se)}const le=u(t,["toolConfig"]);if(o!==void 0&&le!=null&&c(o,["toolConfig"],gT(le)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ae=u(t,["cachedContent"]);o!==void 0&&ae!=null&&c(o,["cachedContent"],Jn(i,ae));const Q=u(t,["responseModalities"]);Q!=null&&c(s,["responseModalities"],Q);const Y=u(t,["mediaResolution"]);Y!=null&&c(s,["mediaResolution"],Y);const X=u(t,["speechConfig"]);if(X!=null&&c(s,["speechConfig"],bc(X)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const oe=u(t,["thinkingConfig"]);oe!=null&&c(s,["thinkingConfig"],oe);const te=u(t,["imageConfig"]);te!=null&&c(s,["imageConfig"],lT(te));const pe=u(t,["enableEnhancedCivicAnswers"]);if(pe!=null&&c(s,["enableEnhancedCivicAnswers"],pe),u(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function eT(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["candidates"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(h=>PS(h))),c(t,["candidates"],v)}const r=u(i,["modelVersion"]);r!=null&&c(t,["modelVersion"],r);const f=u(i,["promptFeedback"]);f!=null&&c(t,["promptFeedback"],f);const m=u(i,["responseId"]);m!=null&&c(t,["responseId"],m);const g=u(i,["usageMetadata"]);return g!=null&&c(t,["usageMetadata"],g),t}function tT(i,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],Ko(i,s)),o}function nT(i,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],Ko(i,s)),o}function iT(i){const t={};if(u(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(i,["enableWidget"]);return o!=null&&c(t,["enableWidget"],o),t}function oT(i){const t={};if(u(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(i,["timeRangeFilter"]);return o!=null&&c(t,["timeRangeFilter"],o),t}function lT(i){const t={},o=u(i,["aspectRatio"]);o!=null&&c(t,["aspectRatio"],o);const s=u(i,["imageSize"]);if(s!=null&&c(t,["imageSize"],s),u(i,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function sT(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["request","model"],Pe(i,s));const r=u(t,["contents"]);if(r!=null){let g=tn(r);Array.isArray(g)&&(g=g.map(v=>Lg(v))),c(o,["request","contents"],g)}const f=u(t,["metadata"]);f!=null&&c(o,["metadata"],f);const m=u(t,["config"]);return m!=null&&c(o,["request","generationConfig"],jS(i,m,u(o,["request"],{}))),o}function aT(i){const t={},o=u(i,["response"]);o!=null&&c(t,["response"],eT(o));const s=u(i,["error"]);return s!=null&&c(t,["error"],s),t}function rT(i,t){const o={},s=u(i,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(i,["pageToken"]);if(t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),u(i,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function uT(i,t){const o={},s=u(i,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(i,["pageToken"]);t!==void 0&&r!=null&&c(t,["_query","pageToken"],r);const f=u(i,["filter"]);return t!==void 0&&f!=null&&c(t,["_query","filter"],f),o}function cT(i){const t={},o=u(i,["config"]);return o!=null&&rT(o,t),t}function fT(i){const t={},o=u(i,["config"]);return o!=null&&uT(o,t),t}function dT(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(i,["operations"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(m=>Ea(m))),c(t,["batchJobs"],f)}return t}function mT(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(i,["batchPredictionJobs"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(m=>dc(m))),c(t,["batchJobs"],f)}return t}function pT(i){const t={},o=u(i,["mediaResolution"]);o!=null&&c(t,["mediaResolution"],o);const s=u(i,["codeExecutionResult"]);s!=null&&c(t,["codeExecutionResult"],s);const r=u(i,["executableCode"]);r!=null&&c(t,["executableCode"],r);const f=u(i,["fileData"]);f!=null&&c(t,["fileData"],$S(f));const m=u(i,["functionCall"]);m!=null&&c(t,["functionCall"],ZS(m));const g=u(i,["functionResponse"]);g!=null&&c(t,["functionResponse"],g);const v=u(i,["inlineData"]);v!=null&&c(t,["inlineData"],US(v));const h=u(i,["text"]);h!=null&&c(t,["text"],h);const y=u(i,["thought"]);y!=null&&c(t,["thought"],y);const E=u(i,["thoughtSignature"]);E!=null&&c(t,["thoughtSignature"],E);const _=u(i,["videoMetadata"]);return _!=null&&c(t,["videoMetadata"],_),t}function hT(i){const t={},o=u(i,["category"]);if(o!=null&&c(t,["category"],o),u(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=u(i,["threshold"]);return s!=null&&c(t,["threshold"],s),t}function gT(i){const t={},o=u(i,["retrievalConfig"]);o!=null&&c(t,["retrievalConfig"],o);const s=u(i,["functionCallingConfig"]);return s!=null&&c(t,["functionCallingConfig"],WS(s)),t}function vT(i){const t={};if(u(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(i,["computerUse"]);o!=null&&c(t,["computerUse"],o);const s=u(i,["fileSearch"]);s!=null&&c(t,["fileSearch"],s);const r=u(i,["codeExecution"]);if(r!=null&&c(t,["codeExecution"],r),u(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=u(i,["functionDeclarations"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(E=>E)),c(t,["functionDeclarations"],y)}const m=u(i,["googleMaps"]);m!=null&&c(t,["googleMaps"],iT(m));const g=u(i,["googleSearch"]);g!=null&&c(t,["googleSearch"],oT(g));const v=u(i,["googleSearchRetrieval"]);v!=null&&c(t,["googleSearchRetrieval"],v);const h=u(i,["urlContext"]);return h!=null&&c(t,["urlContext"],h),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var On;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents",i.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",i.PAGED_ITEM_DOCUMENTS="documents"})(On||(On={}));class Qi{constructor(t,o,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(t,s,r)}init(t,o,s){var r,f;this.nameInternal=t,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o==null?void 0:o.sdkHttpResponse,this.idxInternal=0;let m={config:{}};!s||Object.keys(s).length===0?m={config:{}}:typeof s=="object"?m=Object.assign({},s):m=s,m.config&&(m.config.pageToken=o.nextPageToken),this.paramsInternal=m,this.pageInternalSize=(f=(r=m.config)===null||r===void 0?void 0:r.pageSize)!==null&&f!==void 0?f:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yT extends Fn{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new Qi(On.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(o),o),this.create=async o=>(this.apiClient.isVertexAI()&&(o.config=this.formatDestination(o.src,o.config)),this.createInternal(o)),this.createEmbeddings=async o=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(o)}}createInlinedGenerateContentRequest(t){const o=Yh(this.apiClient,t),s=o._url,r=ne("{model}:batchGenerateContent",s),g=o.batch.inputConfig.requests,v=g.requests,h=[];for(const y of v){const E=Object.assign({},y);if(E.systemInstruction){const _=E.systemInstruction;delete E.systemInstruction;const x=E.request;x.systemInstruction=_,E.request=x}h.push(E)}return g.requests=h,delete o.config,delete o._url,delete o._query,{path:r,body:o}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,o){const s=o?Object.assign({},o):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const f=this.getGcsUri(t),m=this.getBigqueryUri(t);if(f)f.endsWith(".jsonl")?s.dest=`${f.slice(0,-6)}/dest`:s.dest=`${f}_dest_${r}`;else if(m)s.dest=`${m}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=kS(this.apiClient,t);return g=ne("batchPredictionJobs",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),m.then(y=>dc(y))}else{const h=Yh(this.apiClient,t);return g=ne("{model}:batchGenerateContent",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}).then(y=>y.json()),m.then(y=>Ea(y))}}async createEmbeddingsInternal(t){var o,s;let r,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=zS(this.apiClient,t);return f=ne("{model}:asyncBatchEmbedContent",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>Ea(v))}}async get(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=nT(this.apiClient,t);return g=ne("batchPredictionJobs/{name}",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),m.then(y=>dc(y))}else{const h=tT(this.apiClient,t);return g=ne("batches/{name}",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}).then(y=>y.json()),m.then(y=>Ea(y))}}async cancel(t){var o,s,r,f;let m="",g={};if(this.apiClient.isVertexAI()){const v=GS(this.apiClient,t);m=ne("batchPredictionJobs/{name}:cancel",v._url),g=v._query,delete v._url,delete v._query,await this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}else{const v=LS(this.apiClient,t);m=ne("batches/{name}:cancel",v._url),g=v._query,delete v._url,delete v._query,await this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal})}}async listInternal(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=fT(t);return g=ne("batchPredictionJobs",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>{const E=mT(y),_=new zh;return Object.assign(_,E),_})}else{const h=cT(t);return g=ne("batches",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>{const E=dT(y),_=new zh;return Object.assign(_,E),_})}}async delete(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=FS(this.apiClient,t);return g=ne("batchPredictionJobs/{name}",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>YS(y))}else{const h=OS(this.apiClient,t);return g=ne("batches/{name}",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>JS(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ST(i){const t={},o=u(i,["data"]);if(o!=null&&c(t,["data"],o),u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(i,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function Kh(i){const t={},o=u(i,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(f=>zT(f))),c(t,["parts"],r)}const s=u(i,["role"]);return s!=null&&c(t,["role"],s),t}function TT(i,t){const o={},s=u(i,["ttl"]);t!==void 0&&s!=null&&c(t,["ttl"],s);const r=u(i,["expireTime"]);t!==void 0&&r!=null&&c(t,["expireTime"],r);const f=u(i,["displayName"]);t!==void 0&&f!=null&&c(t,["displayName"],f);const m=u(i,["contents"]);if(t!==void 0&&m!=null){let y=tn(m);Array.isArray(y)&&(y=y.map(E=>Kh(E))),c(t,["contents"],y)}const g=u(i,["systemInstruction"]);t!==void 0&&g!=null&&c(t,["systemInstruction"],Kh(Ct(g)));const v=u(i,["tools"]);if(t!==void 0&&v!=null){let y=v;Array.isArray(y)&&(y=y.map(E=>FT(E))),c(t,["tools"],y)}const h=u(i,["toolConfig"]);if(t!==void 0&&h!=null&&c(t,["toolConfig"],OT(h)),u(i,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function ET(i,t){const o={},s=u(i,["ttl"]);t!==void 0&&s!=null&&c(t,["ttl"],s);const r=u(i,["expireTime"]);t!==void 0&&r!=null&&c(t,["expireTime"],r);const f=u(i,["displayName"]);t!==void 0&&f!=null&&c(t,["displayName"],f);const m=u(i,["contents"]);if(t!==void 0&&m!=null){let E=tn(m);Array.isArray(E)&&(E=E.map(_=>_)),c(t,["contents"],E)}const g=u(i,["systemInstruction"]);t!==void 0&&g!=null&&c(t,["systemInstruction"],Ct(g));const v=u(i,["tools"]);if(t!==void 0&&v!=null){let E=v;Array.isArray(E)&&(E=E.map(_=>JT(_))),c(t,["tools"],E)}const h=u(i,["toolConfig"]);t!==void 0&&h!=null&&c(t,["toolConfig"],h);const y=u(i,["kmsKeyName"]);return t!==void 0&&y!=null&&c(t,["encryption_spec","kmsKeyName"],y),o}function _T(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["model"],_g(i,s));const r=u(t,["config"]);return r!=null&&TT(r,o),o}function CT(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["model"],_g(i,s));const r=u(t,["config"]);return r!=null&&ET(r,o),o}function xT(i,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],Jn(i,s)),o}function AT(i,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],Jn(i,s)),o}function NT(i){const t={},o=u(i,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function RT(i){const t={},o=u(i,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function MT(i){const t={};if(u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(i,["fileUri"]);o!=null&&c(t,["fileUri"],o);const s=u(i,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function bT(i){const t={},o=u(i,["id"]);o!=null&&c(t,["id"],o);const s=u(i,["args"]);s!=null&&c(t,["args"],s);const r=u(i,["name"]);if(r!=null&&c(t,["name"],r),u(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function IT(i){const t={},o=u(i,["allowedFunctionNames"]);o!=null&&c(t,["allowedFunctionNames"],o);const s=u(i,["mode"]);if(s!=null&&c(t,["mode"],s),u(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function wT(i){const t={},o=u(i,["description"]);o!=null&&c(t,["description"],o);const s=u(i,["name"]);s!=null&&c(t,["name"],s);const r=u(i,["parameters"]);r!=null&&c(t,["parameters"],r);const f=u(i,["parametersJsonSchema"]);f!=null&&c(t,["parametersJsonSchema"],f);const m=u(i,["response"]);m!=null&&c(t,["response"],m);const g=u(i,["responseJsonSchema"]);if(g!=null&&c(t,["responseJsonSchema"],g),u(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function DT(i,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],Jn(i,s)),o}function UT(i,t){const o={},s=u(t,["name"]);return s!=null&&c(o,["_url","name"],Jn(i,s)),o}function LT(i){const t={};if(u(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(i,["enableWidget"]);return o!=null&&c(t,["enableWidget"],o),t}function GT(i){const t={};if(u(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(i,["timeRangeFilter"]);return o!=null&&c(t,["timeRangeFilter"],o),t}function PT(i,t){const o={},s=u(i,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(i,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),o}function HT(i,t){const o={},s=u(i,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(i,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),o}function VT(i){const t={},o=u(i,["config"]);return o!=null&&PT(o,t),t}function qT(i){const t={},o=u(i,["config"]);return o!=null&&HT(o,t),t}function kT(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(i,["cachedContents"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(m=>m)),c(t,["cachedContents"],f)}return t}function BT(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(i,["cachedContents"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(m=>m)),c(t,["cachedContents"],f)}return t}function zT(i){const t={},o=u(i,["mediaResolution"]);o!=null&&c(t,["mediaResolution"],o);const s=u(i,["codeExecutionResult"]);s!=null&&c(t,["codeExecutionResult"],s);const r=u(i,["executableCode"]);r!=null&&c(t,["executableCode"],r);const f=u(i,["fileData"]);f!=null&&c(t,["fileData"],MT(f));const m=u(i,["functionCall"]);m!=null&&c(t,["functionCall"],bT(m));const g=u(i,["functionResponse"]);g!=null&&c(t,["functionResponse"],g);const v=u(i,["inlineData"]);v!=null&&c(t,["inlineData"],ST(v));const h=u(i,["text"]);h!=null&&c(t,["text"],h);const y=u(i,["thought"]);y!=null&&c(t,["thought"],y);const E=u(i,["thoughtSignature"]);E!=null&&c(t,["thoughtSignature"],E);const _=u(i,["videoMetadata"]);return _!=null&&c(t,["videoMetadata"],_),t}function OT(i){const t={},o=u(i,["retrievalConfig"]);o!=null&&c(t,["retrievalConfig"],o);const s=u(i,["functionCallingConfig"]);return s!=null&&c(t,["functionCallingConfig"],IT(s)),t}function FT(i){const t={};if(u(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(i,["computerUse"]);o!=null&&c(t,["computerUse"],o);const s=u(i,["fileSearch"]);s!=null&&c(t,["fileSearch"],s);const r=u(i,["codeExecution"]);if(r!=null&&c(t,["codeExecution"],r),u(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=u(i,["functionDeclarations"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(E=>E)),c(t,["functionDeclarations"],y)}const m=u(i,["googleMaps"]);m!=null&&c(t,["googleMaps"],LT(m));const g=u(i,["googleSearch"]);g!=null&&c(t,["googleSearch"],GT(g));const v=u(i,["googleSearchRetrieval"]);v!=null&&c(t,["googleSearchRetrieval"],v);const h=u(i,["urlContext"]);return h!=null&&c(t,["urlContext"],h),t}function JT(i){const t={},o=u(i,["retrieval"]);o!=null&&c(t,["retrieval"],o);const s=u(i,["computerUse"]);if(s!=null&&c(t,["computerUse"],s),u(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=u(i,["codeExecution"]);r!=null&&c(t,["codeExecution"],r);const f=u(i,["enterpriseWebSearch"]);f!=null&&c(t,["enterpriseWebSearch"],f);const m=u(i,["functionDeclarations"]);if(m!=null){let E=m;Array.isArray(E)&&(E=E.map(_=>wT(_))),c(t,["functionDeclarations"],E)}const g=u(i,["googleMaps"]);g!=null&&c(t,["googleMaps"],g);const v=u(i,["googleSearch"]);v!=null&&c(t,["googleSearch"],v);const h=u(i,["googleSearchRetrieval"]);h!=null&&c(t,["googleSearchRetrieval"],h);const y=u(i,["urlContext"]);return y!=null&&c(t,["urlContext"],y),t}function YT(i,t){const o={},s=u(i,["ttl"]);t!==void 0&&s!=null&&c(t,["ttl"],s);const r=u(i,["expireTime"]);return t!==void 0&&r!=null&&c(t,["expireTime"],r),o}function KT(i,t){const o={},s=u(i,["ttl"]);t!==void 0&&s!=null&&c(t,["ttl"],s);const r=u(i,["expireTime"]);return t!==void 0&&r!=null&&c(t,["expireTime"],r),o}function XT(i,t){const o={},s=u(t,["name"]);s!=null&&c(o,["_url","name"],Jn(i,s));const r=u(t,["config"]);return r!=null&&YT(r,o),o}function QT(i,t){const o={},s=u(t,["name"]);s!=null&&c(o,["_url","name"],Jn(i,s));const r=u(t,["config"]);return r!=null&&KT(r,o),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $T extends Fn{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new Qi(On.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(o),o)}async create(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=CT(this.apiClient,t);return g=ne("cachedContents",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),m.then(y=>y)}else{const h=_T(this.apiClient,t);return g=ne("cachedContents",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}).then(y=>y.json()),m.then(y=>y)}}async get(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=UT(this.apiClient,t);return g=ne("{name}",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),m.then(y=>y)}else{const h=DT(this.apiClient,t);return g=ne("{name}",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}).then(y=>y.json()),m.then(y=>y)}}async delete(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=AT(this.apiClient,t);return g=ne("{name}",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>{const E=RT(y),_=new kh;return Object.assign(_,E),_})}else{const h=xT(this.apiClient,t);return g=ne("{name}",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>{const E=NT(y),_=new kh;return Object.assign(_,E),_})}}async update(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=QT(this.apiClient,t);return g=ne("{name}",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),m.then(y=>y)}else{const h=XT(this.apiClient,t);return g=ne("{name}",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}).then(y=>y.json()),m.then(y=>y)}}async listInternal(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=qT(t);return g=ne("cachedContents",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>{const E=BT(y),_=new Bh;return Object.assign(_,E),_})}else{const h=VT(t);return g=ne("cachedContents",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>{const E=kT(y),_=new Bh;return Object.assign(_,E),_})}}}function Ra(i,t){var o={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&t.indexOf(s)<0&&(o[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(i);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(i,s[r])&&(o[s[r]]=i[s[r]]);return o}function Xh(i){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&i[t],s=0;if(o)return o.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ge(i){return this instanceof ge?(this.v=i,this):new ge(i)}function cn(i,t,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=o.apply(i,t||[]),r,f=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",m),r[Symbol.asyncIterator]=function(){return this},r;function m(x){return function(I){return Promise.resolve(I).then(x,E)}}function g(x,I){s[x]&&(r[x]=function(w){return new Promise(function(D,V){f.push([x,w,D,V])>1||v(x,w)})},I&&(r[x]=I(r[x])))}function v(x,I){try{h(s[x](I))}catch(w){_(f[0][3],w)}}function h(x){x.value instanceof ge?Promise.resolve(x.value.v).then(y,E):_(f[0][2],x)}function y(x){v("next",x)}function E(x){v("throw",x)}function _(x,I){x(I),f.shift(),f.length&&v(f[0][0],f[0][1])}}function fn(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=i[Symbol.asyncIterator],o;return t?t.call(i):(i=typeof Xh=="function"?Xh(i):i[Symbol.iterator](),o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o);function s(f){o[f]=i[f]&&function(m){return new Promise(function(g,v){m=i[f](m),r(g,v,m.done,m.value)})}}function r(f,m,g,v){Promise.resolve(v).then(function(h){f({value:h,done:g})},m)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZT(i){var t;if(i.candidates==null||i.candidates.length===0)return!1;const o=(t=i.candidates[0])===null||t===void 0?void 0:t.content;return o===void 0?!1:Gg(o)}function Gg(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const t of i.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function WT(i){if(i.length!==0){for(const t of i)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Qh(i){if(i===void 0||i.length===0)return[];const t=[],o=i.length;let s=0;for(;s<o;)if(i[s].role==="user")t.push(i[s]),s++;else{const r=[];let f=!0;for(;s<o&&i[s].role==="model";)r.push(i[s]),f&&!Gg(i[s])&&(f=!1),s++;f?t.push(...r):t.pop()}return t}class jT{constructor(t,o){this.modelsModule=t,this.apiClient=o}create(t){return new eE(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class eE{constructor(t,o,s,r={},f=[]){this.apiClient=t,this.modelsModule=o,this.model=s,this.config=r,this.history=f,this.sendPromise=Promise.resolve(),WT(f)}async sendMessage(t){var o;await this.sendPromise;const s=Ct(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=t.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var f,m,g;const v=await r,h=(m=(f=v.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content,y=v.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let _=[];y!=null&&(_=(g=y.slice(E))!==null&&g!==void 0?g:[]);const x=h?[h]:[];this.recordHistory(s,x,_)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var o;await this.sendPromise;const s=Ct(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(o=t.config)!==null&&o!==void 0?o:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const f=await r;return this.processStreamResponse(f,s)}getHistory(t=!1){const o=t?Qh(this.history):this.history;return structuredClone(o)}processStreamResponse(t,o){return cn(this,arguments,function*(){var r,f,m,g,v,h;const y=[];try{for(var E=!0,_=fn(t),x;x=yield ge(_.next()),r=x.done,!r;E=!0){g=x.value,E=!1;const I=g;if(ZT(I)){const w=(h=(v=I.candidates)===null||v===void 0?void 0:v[0])===null||h===void 0?void 0:h.content;w!==void 0&&y.push(w)}yield yield ge(I)}}catch(I){f={error:I}}finally{try{!E&&!r&&(m=_.return)&&(yield ge(m.call(_)))}finally{if(f)throw f.error}}this.recordHistory(o,y)})}recordHistory(t,o,s){let r=[];o.length>0&&o.every(f=>f.role!==void 0)?r=o:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...Qh(s)):this.history.push(t),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yl extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Yl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tE(i){const t={},o=u(i,["file"]);return o!=null&&c(t,["file"],o),t}function nE(i){const t={},o=u(i,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function iE(i){const t={},o=u(i,["name"]);return o!=null&&c(t,["_url","file"],Mg(o)),t}function oE(i){const t={},o=u(i,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function lE(i){const t={},o=u(i,["name"]);return o!=null&&c(t,["_url","file"],Mg(o)),t}function sE(i,t){const o={},s=u(i,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(i,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),o}function aE(i){const t={},o=u(i,["config"]);return o!=null&&sE(o,t),t}function rE(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(i,["files"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(m=>m)),c(t,["files"],f)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uE extends Fn{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new Qi(On.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(o),o)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(o=>o)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var o,s;let r,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=aE(t);return f=ne("files",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:v.headers},y})),r.then(v=>{const h=rE(v),y=new mS;return Object.assign(y,h),y})}}async createInternal(t){var o,s;let r,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=tE(t);return f=ne("upload/v1beta/files",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const h=nE(v),y=new pS;return Object.assign(y,h),y})}}async get(t){var o,s;let r,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=lE(t);return f=ne("files/{file}",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,s;let r,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=iE(t);return f=ne("files/{file}",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:v.headers},y})),r.then(v=>{const h=oE(v),y=new hS;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _a(i){const t={},o=u(i,["data"]);if(o!=null&&c(t,["data"],o),u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(i,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function cE(i){const t={},o=u(i,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(f=>NE(f))),c(t,["parts"],r)}const s=u(i,["role"]);return s!=null&&c(t,["role"],s),t}function fE(i){const t={};if(u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(i,["fileUri"]);o!=null&&c(t,["fileUri"],o);const s=u(i,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function dE(i){const t={},o=u(i,["id"]);o!=null&&c(t,["id"],o);const s=u(i,["args"]);s!=null&&c(t,["args"],s);const r=u(i,["name"]);if(r!=null&&c(t,["name"],r),u(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function mE(i){const t={},o=u(i,["description"]);o!=null&&c(t,["description"],o);const s=u(i,["name"]);s!=null&&c(t,["name"],s);const r=u(i,["parameters"]);r!=null&&c(t,["parameters"],r);const f=u(i,["parametersJsonSchema"]);f!=null&&c(t,["parametersJsonSchema"],f);const m=u(i,["response"]);m!=null&&c(t,["response"],m);const g=u(i,["responseJsonSchema"]);if(g!=null&&c(t,["responseJsonSchema"],g),u(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function pE(i){const t={},o=u(i,["modelSelectionConfig"]);o!=null&&c(t,["modelConfig"],o);const s=u(i,["responseJsonSchema"]);s!=null&&c(t,["responseJsonSchema"],s);const r=u(i,["audioTimestamp"]);r!=null&&c(t,["audioTimestamp"],r);const f=u(i,["candidateCount"]);f!=null&&c(t,["candidateCount"],f);const m=u(i,["enableAffectiveDialog"]);m!=null&&c(t,["enableAffectiveDialog"],m);const g=u(i,["frequencyPenalty"]);g!=null&&c(t,["frequencyPenalty"],g);const v=u(i,["logprobs"]);v!=null&&c(t,["logprobs"],v);const h=u(i,["maxOutputTokens"]);h!=null&&c(t,["maxOutputTokens"],h);const y=u(i,["mediaResolution"]);y!=null&&c(t,["mediaResolution"],y);const E=u(i,["presencePenalty"]);E!=null&&c(t,["presencePenalty"],E);const _=u(i,["responseLogprobs"]);_!=null&&c(t,["responseLogprobs"],_);const x=u(i,["responseMimeType"]);x!=null&&c(t,["responseMimeType"],x);const I=u(i,["responseModalities"]);I!=null&&c(t,["responseModalities"],I);const w=u(i,["responseSchema"]);w!=null&&c(t,["responseSchema"],w);const D=u(i,["routingConfig"]);D!=null&&c(t,["routingConfig"],D);const V=u(i,["seed"]);V!=null&&c(t,["seed"],V);const $=u(i,["speechConfig"]);$!=null&&c(t,["speechConfig"],$);const J=u(i,["stopSequences"]);J!=null&&c(t,["stopSequences"],J);const Z=u(i,["temperature"]);Z!=null&&c(t,["temperature"],Z);const le=u(i,["thinkingConfig"]);le!=null&&c(t,["thinkingConfig"],le);const ae=u(i,["topK"]);ae!=null&&c(t,["topK"],ae);const Q=u(i,["topP"]);if(Q!=null&&c(t,["topP"],Q),u(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function hE(i){const t={};if(u(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(i,["enableWidget"]);return o!=null&&c(t,["enableWidget"],o),t}function gE(i){const t={};if(u(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(i,["timeRangeFilter"]);return o!=null&&c(t,["timeRangeFilter"],o),t}function vE(i,t){const o={},s=u(i,["generationConfig"]);t!==void 0&&s!=null&&c(t,["setup","generationConfig"],s);const r=u(i,["responseModalities"]);t!==void 0&&r!=null&&c(t,["setup","generationConfig","responseModalities"],r);const f=u(i,["temperature"]);t!==void 0&&f!=null&&c(t,["setup","generationConfig","temperature"],f);const m=u(i,["topP"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","topP"],m);const g=u(i,["topK"]);t!==void 0&&g!=null&&c(t,["setup","generationConfig","topK"],g);const v=u(i,["maxOutputTokens"]);t!==void 0&&v!=null&&c(t,["setup","generationConfig","maxOutputTokens"],v);const h=u(i,["mediaResolution"]);t!==void 0&&h!=null&&c(t,["setup","generationConfig","mediaResolution"],h);const y=u(i,["seed"]);t!==void 0&&y!=null&&c(t,["setup","generationConfig","seed"],y);const E=u(i,["speechConfig"]);t!==void 0&&E!=null&&c(t,["setup","generationConfig","speechConfig"],Ic(E));const _=u(i,["thinkingConfig"]);t!==void 0&&_!=null&&c(t,["setup","generationConfig","thinkingConfig"],_);const x=u(i,["enableAffectiveDialog"]);t!==void 0&&x!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],x);const I=u(i,["systemInstruction"]);t!==void 0&&I!=null&&c(t,["setup","systemInstruction"],cE(Ct(I)));const w=u(i,["tools"]);if(t!==void 0&&w!=null){let ae=Yo(w);Array.isArray(ae)&&(ae=ae.map(Q=>ME(Jo(Q)))),c(t,["setup","tools"],ae)}const D=u(i,["sessionResumption"]);t!==void 0&&D!=null&&c(t,["setup","sessionResumption"],RE(D));const V=u(i,["inputAudioTranscription"]);t!==void 0&&V!=null&&c(t,["setup","inputAudioTranscription"],V);const $=u(i,["outputAudioTranscription"]);t!==void 0&&$!=null&&c(t,["setup","outputAudioTranscription"],$);const J=u(i,["realtimeInputConfig"]);t!==void 0&&J!=null&&c(t,["setup","realtimeInputConfig"],J);const Z=u(i,["contextWindowCompression"]);t!==void 0&&Z!=null&&c(t,["setup","contextWindowCompression"],Z);const le=u(i,["proactivity"]);if(t!==void 0&&le!=null&&c(t,["setup","proactivity"],le),u(i,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function yE(i,t){const o={},s=u(i,["generationConfig"]);t!==void 0&&s!=null&&c(t,["setup","generationConfig"],pE(s));const r=u(i,["responseModalities"]);t!==void 0&&r!=null&&c(t,["setup","generationConfig","responseModalities"],r);const f=u(i,["temperature"]);t!==void 0&&f!=null&&c(t,["setup","generationConfig","temperature"],f);const m=u(i,["topP"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","topP"],m);const g=u(i,["topK"]);t!==void 0&&g!=null&&c(t,["setup","generationConfig","topK"],g);const v=u(i,["maxOutputTokens"]);t!==void 0&&v!=null&&c(t,["setup","generationConfig","maxOutputTokens"],v);const h=u(i,["mediaResolution"]);t!==void 0&&h!=null&&c(t,["setup","generationConfig","mediaResolution"],h);const y=u(i,["seed"]);t!==void 0&&y!=null&&c(t,["setup","generationConfig","seed"],y);const E=u(i,["speechConfig"]);t!==void 0&&E!=null&&c(t,["setup","generationConfig","speechConfig"],Ic(E));const _=u(i,["thinkingConfig"]);t!==void 0&&_!=null&&c(t,["setup","generationConfig","thinkingConfig"],_);const x=u(i,["enableAffectiveDialog"]);t!==void 0&&x!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],x);const I=u(i,["systemInstruction"]);t!==void 0&&I!=null&&c(t,["setup","systemInstruction"],Ct(I));const w=u(i,["tools"]);if(t!==void 0&&w!=null){let Q=Yo(w);Array.isArray(Q)&&(Q=Q.map(Y=>bE(Jo(Y)))),c(t,["setup","tools"],Q)}const D=u(i,["sessionResumption"]);t!==void 0&&D!=null&&c(t,["setup","sessionResumption"],D);const V=u(i,["inputAudioTranscription"]);t!==void 0&&V!=null&&c(t,["setup","inputAudioTranscription"],V);const $=u(i,["outputAudioTranscription"]);t!==void 0&&$!=null&&c(t,["setup","outputAudioTranscription"],$);const J=u(i,["realtimeInputConfig"]);t!==void 0&&J!=null&&c(t,["setup","realtimeInputConfig"],J);const Z=u(i,["contextWindowCompression"]);t!==void 0&&Z!=null&&c(t,["setup","contextWindowCompression"],Z);const le=u(i,["proactivity"]);t!==void 0&&le!=null&&c(t,["setup","proactivity"],le);const ae=u(i,["explicitVadSignal"]);return t!==void 0&&ae!=null&&c(t,["setup","explicitVadSignal"],ae),o}function SE(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["setup","model"],Pe(i,s));const r=u(t,["config"]);return r!=null&&c(o,["config"],vE(r,o)),o}function TE(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["setup","model"],Pe(i,s));const r=u(t,["config"]);return r!=null&&c(o,["config"],yE(r,o)),o}function EE(i){const t={},o=u(i,["musicGenerationConfig"]);return o!=null&&c(t,["musicGenerationConfig"],o),t}function _E(i){const t={},o=u(i,["weightedPrompts"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(t,["weightedPrompts"],s)}return t}function CE(i){const t={},o=u(i,["media"]);if(o!=null){let h=Cg(o);Array.isArray(h)&&(h=h.map(y=>_a(y))),c(t,["mediaChunks"],h)}const s=u(i,["audio"]);s!=null&&c(t,["audio"],_a(Ag(s)));const r=u(i,["audioStreamEnd"]);r!=null&&c(t,["audioStreamEnd"],r);const f=u(i,["video"]);f!=null&&c(t,["video"],_a(xg(f)));const m=u(i,["text"]);m!=null&&c(t,["text"],m);const g=u(i,["activityStart"]);g!=null&&c(t,["activityStart"],g);const v=u(i,["activityEnd"]);return v!=null&&c(t,["activityEnd"],v),t}function xE(i){const t={},o=u(i,["media"]);if(o!=null){let h=Cg(o);Array.isArray(h)&&(h=h.map(y=>y)),c(t,["mediaChunks"],h)}const s=u(i,["audio"]);s!=null&&c(t,["audio"],Ag(s));const r=u(i,["audioStreamEnd"]);r!=null&&c(t,["audioStreamEnd"],r);const f=u(i,["video"]);f!=null&&c(t,["video"],xg(f));const m=u(i,["text"]);m!=null&&c(t,["text"],m);const g=u(i,["activityStart"]);g!=null&&c(t,["activityStart"],g);const v=u(i,["activityEnd"]);return v!=null&&c(t,["activityEnd"],v),t}function AE(i){const t={},o=u(i,["setupComplete"]);o!=null&&c(t,["setupComplete"],o);const s=u(i,["serverContent"]);s!=null&&c(t,["serverContent"],s);const r=u(i,["toolCall"]);r!=null&&c(t,["toolCall"],r);const f=u(i,["toolCallCancellation"]);f!=null&&c(t,["toolCallCancellation"],f);const m=u(i,["usageMetadata"]);m!=null&&c(t,["usageMetadata"],IE(m));const g=u(i,["goAway"]);g!=null&&c(t,["goAway"],g);const v=u(i,["sessionResumptionUpdate"]);v!=null&&c(t,["sessionResumptionUpdate"],v);const h=u(i,["voiceActivityDetectionSignal"]);h!=null&&c(t,["voiceActivityDetectionSignal"],h);const y=u(i,["voiceActivity"]);return y!=null&&c(t,["voiceActivity"],wE(y)),t}function NE(i){const t={},o=u(i,["mediaResolution"]);o!=null&&c(t,["mediaResolution"],o);const s=u(i,["codeExecutionResult"]);s!=null&&c(t,["codeExecutionResult"],s);const r=u(i,["executableCode"]);r!=null&&c(t,["executableCode"],r);const f=u(i,["fileData"]);f!=null&&c(t,["fileData"],fE(f));const m=u(i,["functionCall"]);m!=null&&c(t,["functionCall"],dE(m));const g=u(i,["functionResponse"]);g!=null&&c(t,["functionResponse"],g);const v=u(i,["inlineData"]);v!=null&&c(t,["inlineData"],_a(v));const h=u(i,["text"]);h!=null&&c(t,["text"],h);const y=u(i,["thought"]);y!=null&&c(t,["thought"],y);const E=u(i,["thoughtSignature"]);E!=null&&c(t,["thoughtSignature"],E);const _=u(i,["videoMetadata"]);return _!=null&&c(t,["videoMetadata"],_),t}function RE(i){const t={},o=u(i,["handle"]);if(o!=null&&c(t,["handle"],o),u(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function ME(i){const t={};if(u(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(i,["computerUse"]);o!=null&&c(t,["computerUse"],o);const s=u(i,["fileSearch"]);s!=null&&c(t,["fileSearch"],s);const r=u(i,["codeExecution"]);if(r!=null&&c(t,["codeExecution"],r),u(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=u(i,["functionDeclarations"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(E=>E)),c(t,["functionDeclarations"],y)}const m=u(i,["googleMaps"]);m!=null&&c(t,["googleMaps"],hE(m));const g=u(i,["googleSearch"]);g!=null&&c(t,["googleSearch"],gE(g));const v=u(i,["googleSearchRetrieval"]);v!=null&&c(t,["googleSearchRetrieval"],v);const h=u(i,["urlContext"]);return h!=null&&c(t,["urlContext"],h),t}function bE(i){const t={},o=u(i,["retrieval"]);o!=null&&c(t,["retrieval"],o);const s=u(i,["computerUse"]);if(s!=null&&c(t,["computerUse"],s),u(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=u(i,["codeExecution"]);r!=null&&c(t,["codeExecution"],r);const f=u(i,["enterpriseWebSearch"]);f!=null&&c(t,["enterpriseWebSearch"],f);const m=u(i,["functionDeclarations"]);if(m!=null){let E=m;Array.isArray(E)&&(E=E.map(_=>mE(_))),c(t,["functionDeclarations"],E)}const g=u(i,["googleMaps"]);g!=null&&c(t,["googleMaps"],g);const v=u(i,["googleSearch"]);v!=null&&c(t,["googleSearch"],v);const h=u(i,["googleSearchRetrieval"]);h!=null&&c(t,["googleSearchRetrieval"],h);const y=u(i,["urlContext"]);return y!=null&&c(t,["urlContext"],y),t}function IE(i){const t={},o=u(i,["promptTokenCount"]);o!=null&&c(t,["promptTokenCount"],o);const s=u(i,["cachedContentTokenCount"]);s!=null&&c(t,["cachedContentTokenCount"],s);const r=u(i,["candidatesTokenCount"]);r!=null&&c(t,["responseTokenCount"],r);const f=u(i,["toolUsePromptTokenCount"]);f!=null&&c(t,["toolUsePromptTokenCount"],f);const m=u(i,["thoughtsTokenCount"]);m!=null&&c(t,["thoughtsTokenCount"],m);const g=u(i,["totalTokenCount"]);g!=null&&c(t,["totalTokenCount"],g);const v=u(i,["promptTokensDetails"]);if(v!=null){let x=v;Array.isArray(x)&&(x=x.map(I=>I)),c(t,["promptTokensDetails"],x)}const h=u(i,["cacheTokensDetails"]);if(h!=null){let x=h;Array.isArray(x)&&(x=x.map(I=>I)),c(t,["cacheTokensDetails"],x)}const y=u(i,["candidatesTokensDetails"]);if(y!=null){let x=y;Array.isArray(x)&&(x=x.map(I=>I)),c(t,["responseTokensDetails"],x)}const E=u(i,["toolUsePromptTokensDetails"]);if(E!=null){let x=E;Array.isArray(x)&&(x=x.map(I=>I)),c(t,["toolUsePromptTokensDetails"],x)}const _=u(i,["trafficType"]);return _!=null&&c(t,["trafficType"],_),t}function wE(i){const t={},o=u(i,["type"]);return o!=null&&c(t,["voiceActivityType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DE(i){const t={},o=u(i,["data"]);if(o!=null&&c(t,["data"],o),u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(i,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function UE(i){const t={},o=u(i,["content"]);o!=null&&c(t,["content"],o);const s=u(i,["citationMetadata"]);s!=null&&c(t,["citationMetadata"],LE(s));const r=u(i,["tokenCount"]);r!=null&&c(t,["tokenCount"],r);const f=u(i,["finishReason"]);f!=null&&c(t,["finishReason"],f);const m=u(i,["avgLogprobs"]);m!=null&&c(t,["avgLogprobs"],m);const g=u(i,["groundingMetadata"]);g!=null&&c(t,["groundingMetadata"],g);const v=u(i,["index"]);v!=null&&c(t,["index"],v);const h=u(i,["logprobsResult"]);h!=null&&c(t,["logprobsResult"],h);const y=u(i,["safetyRatings"]);if(y!=null){let _=y;Array.isArray(_)&&(_=_.map(x=>x)),c(t,["safetyRatings"],_)}const E=u(i,["urlContextMetadata"]);return E!=null&&c(t,["urlContextMetadata"],E),t}function LE(i){const t={},o=u(i,["citationSources"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(t,["citations"],s)}return t}function GE(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Pe(i,s));const r=u(t,["contents"]);if(r!=null){let f=tn(r);Array.isArray(f)&&(f=f.map(m=>m)),c(o,["contents"],f)}return o}function PE(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(f=>f)),c(t,["tokensInfo"],r)}return t}function HE(i){const t={},o=u(i,["values"]);o!=null&&c(t,["values"],o);const s=u(i,["statistics"]);return s!=null&&c(t,["statistics"],VE(s)),t}function VE(i){const t={},o=u(i,["truncated"]);o!=null&&c(t,["truncated"],o);const s=u(i,["token_count"]);return s!=null&&c(t,["tokenCount"],s),t}function Ia(i){const t={},o=u(i,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(f=>K_(f))),c(t,["parts"],r)}const s=u(i,["role"]);return s!=null&&c(t,["role"],s),t}function qE(i){const t={},o=u(i,["controlType"]);o!=null&&c(t,["controlType"],o);const s=u(i,["enableControlImageComputation"]);return s!=null&&c(t,["computeControl"],s),t}function kE(i){const t={};if(u(i,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(i,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(i,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function BE(i,t){const o={},s=u(i,["systemInstruction"]);t!==void 0&&s!=null&&c(t,["systemInstruction"],Ct(s));const r=u(i,["tools"]);if(t!==void 0&&r!=null){let m=r;Array.isArray(m)&&(m=m.map(g=>qg(g))),c(t,["tools"],m)}const f=u(i,["generationConfig"]);return t!==void 0&&f!=null&&c(t,["generationConfig"],D_(f)),o}function zE(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Pe(i,s));const r=u(t,["contents"]);if(r!=null){let m=tn(r);Array.isArray(m)&&(m=m.map(g=>Ia(g))),c(o,["contents"],m)}const f=u(t,["config"]);return f!=null&&kE(f),o}function OE(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Pe(i,s));const r=u(t,["contents"]);if(r!=null){let m=tn(r);Array.isArray(m)&&(m=m.map(g=>g)),c(o,["contents"],m)}const f=u(t,["config"]);return f!=null&&BE(f,o),o}function FE(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["totalTokens"]);s!=null&&c(t,["totalTokens"],s);const r=u(i,["cachedContentTokenCount"]);return r!=null&&c(t,["cachedContentTokenCount"],r),t}function JE(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["totalTokens"]);return s!=null&&c(t,["totalTokens"],s),t}function YE(i,t){const o={},s=u(t,["model"]);return s!=null&&c(o,["_url","name"],Pe(i,s)),o}function KE(i,t){const o={},s=u(t,["model"]);return s!=null&&c(o,["_url","name"],Pe(i,s)),o}function XE(i){const t={},o=u(i,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function QE(i){const t={},o=u(i,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}function $E(i,t){const o={},s=u(i,["outputGcsUri"]);t!==void 0&&s!=null&&c(t,["parameters","storageUri"],s);const r=u(i,["negativePrompt"]);t!==void 0&&r!=null&&c(t,["parameters","negativePrompt"],r);const f=u(i,["numberOfImages"]);t!==void 0&&f!=null&&c(t,["parameters","sampleCount"],f);const m=u(i,["aspectRatio"]);t!==void 0&&m!=null&&c(t,["parameters","aspectRatio"],m);const g=u(i,["guidanceScale"]);t!==void 0&&g!=null&&c(t,["parameters","guidanceScale"],g);const v=u(i,["seed"]);t!==void 0&&v!=null&&c(t,["parameters","seed"],v);const h=u(i,["safetyFilterLevel"]);t!==void 0&&h!=null&&c(t,["parameters","safetySetting"],h);const y=u(i,["personGeneration"]);t!==void 0&&y!=null&&c(t,["parameters","personGeneration"],y);const E=u(i,["includeSafetyAttributes"]);t!==void 0&&E!=null&&c(t,["parameters","includeSafetyAttributes"],E);const _=u(i,["includeRaiReason"]);t!==void 0&&_!=null&&c(t,["parameters","includeRaiReason"],_);const x=u(i,["language"]);t!==void 0&&x!=null&&c(t,["parameters","language"],x);const I=u(i,["outputMimeType"]);t!==void 0&&I!=null&&c(t,["parameters","outputOptions","mimeType"],I);const w=u(i,["outputCompressionQuality"]);t!==void 0&&w!=null&&c(t,["parameters","outputOptions","compressionQuality"],w);const D=u(i,["addWatermark"]);t!==void 0&&D!=null&&c(t,["parameters","addWatermark"],D);const V=u(i,["labels"]);t!==void 0&&V!=null&&c(t,["labels"],V);const $=u(i,["editMode"]);t!==void 0&&$!=null&&c(t,["parameters","editMode"],$);const J=u(i,["baseSteps"]);return t!==void 0&&J!=null&&c(t,["parameters","editConfig","baseSteps"],J),o}function ZE(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Pe(i,s));const r=u(t,["prompt"]);r!=null&&c(o,["instances[0]","prompt"],r);const f=u(t,["referenceImages"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(v=>j_(v))),c(o,["instances[0]","referenceImages"],g)}const m=u(t,["config"]);return m!=null&&$E(m,o),o}function WE(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(f=>wa(f))),c(t,["generatedImages"],r)}return t}function jE(i,t){const o={},s=u(i,["taskType"]);t!==void 0&&s!=null&&c(t,["requests[]","taskType"],s);const r=u(i,["title"]);t!==void 0&&r!=null&&c(t,["requests[]","title"],r);const f=u(i,["outputDimensionality"]);if(t!==void 0&&f!=null&&c(t,["requests[]","outputDimensionality"],f),u(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function e_(i,t){const o={},s=u(i,["taskType"]);t!==void 0&&s!=null&&c(t,["instances[]","task_type"],s);const r=u(i,["title"]);t!==void 0&&r!=null&&c(t,["instances[]","title"],r);const f=u(i,["outputDimensionality"]);t!==void 0&&f!=null&&c(t,["parameters","outputDimensionality"],f);const m=u(i,["mimeType"]);t!==void 0&&m!=null&&c(t,["instances[]","mimeType"],m);const g=u(i,["autoTruncate"]);return t!==void 0&&g!=null&&c(t,["parameters","autoTruncate"],g),o}function t_(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Pe(i,s));const r=u(t,["contents"]);if(r!=null){let g=Rc(i,r);Array.isArray(g)&&(g=g.map(v=>v)),c(o,["requests[]","content"],g)}const f=u(t,["config"]);f!=null&&jE(f,o);const m=u(t,["model"]);return m!==void 0&&c(o,["requests[]","model"],Pe(i,m)),o}function n_(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Pe(i,s));const r=u(t,["contents"]);if(r!=null){let m=Rc(i,r);Array.isArray(m)&&(m=m.map(g=>g)),c(o,["instances[]","content"],m)}const f=u(t,["config"]);return f!=null&&e_(f,o),o}function i_(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["embeddings"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(m=>m)),c(t,["embeddings"],f)}const r=u(i,["metadata"]);return r!=null&&c(t,["metadata"],r),t}function o_(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["predictions[]","embeddings"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(m=>HE(m))),c(t,["embeddings"],f)}const r=u(i,["metadata"]);return r!=null&&c(t,["metadata"],r),t}function l_(i){const t={},o=u(i,["endpoint"]);o!=null&&c(t,["name"],o);const s=u(i,["deployedModelId"]);return s!=null&&c(t,["deployedModelId"],s),t}function s_(i){const t={};if(u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(i,["fileUri"]);o!=null&&c(t,["fileUri"],o);const s=u(i,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function a_(i){const t={},o=u(i,["id"]);o!=null&&c(t,["id"],o);const s=u(i,["args"]);s!=null&&c(t,["args"],s);const r=u(i,["name"]);if(r!=null&&c(t,["name"],r),u(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function r_(i){const t={},o=u(i,["allowedFunctionNames"]);o!=null&&c(t,["allowedFunctionNames"],o);const s=u(i,["mode"]);if(s!=null&&c(t,["mode"],s),u(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function u_(i){const t={},o=u(i,["description"]);o!=null&&c(t,["description"],o);const s=u(i,["name"]);s!=null&&c(t,["name"],s);const r=u(i,["parameters"]);r!=null&&c(t,["parameters"],r);const f=u(i,["parametersJsonSchema"]);f!=null&&c(t,["parametersJsonSchema"],f);const m=u(i,["response"]);m!=null&&c(t,["response"],m);const g=u(i,["responseJsonSchema"]);if(g!=null&&c(t,["responseJsonSchema"],g),u(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function c_(i,t,o){const s={},r=u(t,["systemInstruction"]);o!==void 0&&r!=null&&c(o,["systemInstruction"],Ia(Ct(r)));const f=u(t,["temperature"]);f!=null&&c(s,["temperature"],f);const m=u(t,["topP"]);m!=null&&c(s,["topP"],m);const g=u(t,["topK"]);g!=null&&c(s,["topK"],g);const v=u(t,["candidateCount"]);v!=null&&c(s,["candidateCount"],v);const h=u(t,["maxOutputTokens"]);h!=null&&c(s,["maxOutputTokens"],h);const y=u(t,["stopSequences"]);y!=null&&c(s,["stopSequences"],y);const E=u(t,["responseLogprobs"]);E!=null&&c(s,["responseLogprobs"],E);const _=u(t,["logprobs"]);_!=null&&c(s,["logprobs"],_);const x=u(t,["presencePenalty"]);x!=null&&c(s,["presencePenalty"],x);const I=u(t,["frequencyPenalty"]);I!=null&&c(s,["frequencyPenalty"],I);const w=u(t,["seed"]);w!=null&&c(s,["seed"],w);const D=u(t,["responseMimeType"]);D!=null&&c(s,["responseMimeType"],D);const V=u(t,["responseSchema"]);V!=null&&c(s,["responseSchema"],Mc(V));const $=u(t,["responseJsonSchema"]);if($!=null&&c(s,["responseJsonSchema"],$),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const J=u(t,["safetySettings"]);if(o!==void 0&&J!=null){let se=J;Array.isArray(se)&&(se=se.map(Ee=>eC(Ee))),c(o,["safetySettings"],se)}const Z=u(t,["tools"]);if(o!==void 0&&Z!=null){let se=Yo(Z);Array.isArray(se)&&(se=se.map(Ee=>aC(Jo(Ee)))),c(o,["tools"],se)}const le=u(t,["toolConfig"]);if(o!==void 0&&le!=null&&c(o,["toolConfig"],sC(le)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ae=u(t,["cachedContent"]);o!==void 0&&ae!=null&&c(o,["cachedContent"],Jn(i,ae));const Q=u(t,["responseModalities"]);Q!=null&&c(s,["responseModalities"],Q);const Y=u(t,["mediaResolution"]);Y!=null&&c(s,["mediaResolution"],Y);const X=u(t,["speechConfig"]);if(X!=null&&c(s,["speechConfig"],bc(X)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const oe=u(t,["thinkingConfig"]);oe!=null&&c(s,["thinkingConfig"],oe);const te=u(t,["imageConfig"]);te!=null&&c(s,["imageConfig"],H_(te));const pe=u(t,["enableEnhancedCivicAnswers"]);if(pe!=null&&c(s,["enableEnhancedCivicAnswers"],pe),u(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function f_(i,t,o){const s={},r=u(t,["systemInstruction"]);o!==void 0&&r!=null&&c(o,["systemInstruction"],Ct(r));const f=u(t,["temperature"]);f!=null&&c(s,["temperature"],f);const m=u(t,["topP"]);m!=null&&c(s,["topP"],m);const g=u(t,["topK"]);g!=null&&c(s,["topK"],g);const v=u(t,["candidateCount"]);v!=null&&c(s,["candidateCount"],v);const h=u(t,["maxOutputTokens"]);h!=null&&c(s,["maxOutputTokens"],h);const y=u(t,["stopSequences"]);y!=null&&c(s,["stopSequences"],y);const E=u(t,["responseLogprobs"]);E!=null&&c(s,["responseLogprobs"],E);const _=u(t,["logprobs"]);_!=null&&c(s,["logprobs"],_);const x=u(t,["presencePenalty"]);x!=null&&c(s,["presencePenalty"],x);const I=u(t,["frequencyPenalty"]);I!=null&&c(s,["frequencyPenalty"],I);const w=u(t,["seed"]);w!=null&&c(s,["seed"],w);const D=u(t,["responseMimeType"]);D!=null&&c(s,["responseMimeType"],D);const V=u(t,["responseSchema"]);V!=null&&c(s,["responseSchema"],Mc(V));const $=u(t,["responseJsonSchema"]);$!=null&&c(s,["responseJsonSchema"],$);const J=u(t,["routingConfig"]);J!=null&&c(s,["routingConfig"],J);const Z=u(t,["modelSelectionConfig"]);Z!=null&&c(s,["modelConfig"],Z);const le=u(t,["safetySettings"]);if(o!==void 0&&le!=null){let K=le;Array.isArray(K)&&(K=K.map(q=>q)),c(o,["safetySettings"],K)}const ae=u(t,["tools"]);if(o!==void 0&&ae!=null){let K=Yo(ae);Array.isArray(K)&&(K=K.map(q=>qg(Jo(q)))),c(o,["tools"],K)}const Q=u(t,["toolConfig"]);o!==void 0&&Q!=null&&c(o,["toolConfig"],Q);const Y=u(t,["labels"]);o!==void 0&&Y!=null&&c(o,["labels"],Y);const X=u(t,["cachedContent"]);o!==void 0&&X!=null&&c(o,["cachedContent"],Jn(i,X));const oe=u(t,["responseModalities"]);oe!=null&&c(s,["responseModalities"],oe);const te=u(t,["mediaResolution"]);te!=null&&c(s,["mediaResolution"],te);const pe=u(t,["speechConfig"]);pe!=null&&c(s,["speechConfig"],bc(pe));const se=u(t,["audioTimestamp"]);se!=null&&c(s,["audioTimestamp"],se);const Ee=u(t,["thinkingConfig"]);Ee!=null&&c(s,["thinkingConfig"],Ee);const Ye=u(t,["imageConfig"]);if(Ye!=null&&c(s,["imageConfig"],V_(Ye)),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const P=u(t,["modelArmorConfig"]);return o!==void 0&&P!=null&&c(o,["modelArmorConfig"],P),s}function $h(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Pe(i,s));const r=u(t,["contents"]);if(r!=null){let m=tn(r);Array.isArray(m)&&(m=m.map(g=>Ia(g))),c(o,["contents"],m)}const f=u(t,["config"]);return f!=null&&c(o,["generationConfig"],c_(i,f,o)),o}function Zh(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Pe(i,s));const r=u(t,["contents"]);if(r!=null){let m=tn(r);Array.isArray(m)&&(m=m.map(g=>g)),c(o,["contents"],m)}const f=u(t,["config"]);return f!=null&&c(o,["generationConfig"],f_(i,f,o)),o}function Wh(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["candidates"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(h=>UE(h))),c(t,["candidates"],v)}const r=u(i,["modelVersion"]);r!=null&&c(t,["modelVersion"],r);const f=u(i,["promptFeedback"]);f!=null&&c(t,["promptFeedback"],f);const m=u(i,["responseId"]);m!=null&&c(t,["responseId"],m);const g=u(i,["usageMetadata"]);return g!=null&&c(t,["usageMetadata"],g),t}function jh(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["candidates"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(y=>y)),c(t,["candidates"],h)}const r=u(i,["createTime"]);r!=null&&c(t,["createTime"],r);const f=u(i,["modelVersion"]);f!=null&&c(t,["modelVersion"],f);const m=u(i,["promptFeedback"]);m!=null&&c(t,["promptFeedback"],m);const g=u(i,["responseId"]);g!=null&&c(t,["responseId"],g);const v=u(i,["usageMetadata"]);return v!=null&&c(t,["usageMetadata"],v),t}function d_(i,t){const o={};if(u(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(i,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=u(i,["numberOfImages"]);t!==void 0&&s!=null&&c(t,["parameters","sampleCount"],s);const r=u(i,["aspectRatio"]);t!==void 0&&r!=null&&c(t,["parameters","aspectRatio"],r);const f=u(i,["guidanceScale"]);if(t!==void 0&&f!=null&&c(t,["parameters","guidanceScale"],f),u(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const m=u(i,["safetyFilterLevel"]);t!==void 0&&m!=null&&c(t,["parameters","safetySetting"],m);const g=u(i,["personGeneration"]);t!==void 0&&g!=null&&c(t,["parameters","personGeneration"],g);const v=u(i,["includeSafetyAttributes"]);t!==void 0&&v!=null&&c(t,["parameters","includeSafetyAttributes"],v);const h=u(i,["includeRaiReason"]);t!==void 0&&h!=null&&c(t,["parameters","includeRaiReason"],h);const y=u(i,["language"]);t!==void 0&&y!=null&&c(t,["parameters","language"],y);const E=u(i,["outputMimeType"]);t!==void 0&&E!=null&&c(t,["parameters","outputOptions","mimeType"],E);const _=u(i,["outputCompressionQuality"]);if(t!==void 0&&_!=null&&c(t,["parameters","outputOptions","compressionQuality"],_),u(i,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=u(i,["imageSize"]);if(t!==void 0&&x!=null&&c(t,["parameters","sampleImageSize"],x),u(i,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function m_(i,t){const o={},s=u(i,["outputGcsUri"]);t!==void 0&&s!=null&&c(t,["parameters","storageUri"],s);const r=u(i,["negativePrompt"]);t!==void 0&&r!=null&&c(t,["parameters","negativePrompt"],r);const f=u(i,["numberOfImages"]);t!==void 0&&f!=null&&c(t,["parameters","sampleCount"],f);const m=u(i,["aspectRatio"]);t!==void 0&&m!=null&&c(t,["parameters","aspectRatio"],m);const g=u(i,["guidanceScale"]);t!==void 0&&g!=null&&c(t,["parameters","guidanceScale"],g);const v=u(i,["seed"]);t!==void 0&&v!=null&&c(t,["parameters","seed"],v);const h=u(i,["safetyFilterLevel"]);t!==void 0&&h!=null&&c(t,["parameters","safetySetting"],h);const y=u(i,["personGeneration"]);t!==void 0&&y!=null&&c(t,["parameters","personGeneration"],y);const E=u(i,["includeSafetyAttributes"]);t!==void 0&&E!=null&&c(t,["parameters","includeSafetyAttributes"],E);const _=u(i,["includeRaiReason"]);t!==void 0&&_!=null&&c(t,["parameters","includeRaiReason"],_);const x=u(i,["language"]);t!==void 0&&x!=null&&c(t,["parameters","language"],x);const I=u(i,["outputMimeType"]);t!==void 0&&I!=null&&c(t,["parameters","outputOptions","mimeType"],I);const w=u(i,["outputCompressionQuality"]);t!==void 0&&w!=null&&c(t,["parameters","outputOptions","compressionQuality"],w);const D=u(i,["addWatermark"]);t!==void 0&&D!=null&&c(t,["parameters","addWatermark"],D);const V=u(i,["labels"]);t!==void 0&&V!=null&&c(t,["labels"],V);const $=u(i,["imageSize"]);t!==void 0&&$!=null&&c(t,["parameters","sampleImageSize"],$);const J=u(i,["enhancePrompt"]);return t!==void 0&&J!=null&&c(t,["parameters","enhancePrompt"],J),o}function p_(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Pe(i,s));const r=u(t,["prompt"]);r!=null&&c(o,["instances[0]","prompt"],r);const f=u(t,["config"]);return f!=null&&d_(f,o),o}function h_(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Pe(i,s));const r=u(t,["prompt"]);r!=null&&c(o,["instances[0]","prompt"],r);const f=u(t,["config"]);return f!=null&&m_(f,o),o}function g_(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["predictions"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(m=>M_(m))),c(t,["generatedImages"],f)}const r=u(i,["positivePromptSafetyAttributes"]);return r!=null&&c(t,["positivePromptSafetyAttributes"],Hg(r)),t}function v_(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["predictions"]);if(s!=null){let f=s;Array.isArray(f)&&(f=f.map(m=>wa(m))),c(t,["generatedImages"],f)}const r=u(i,["positivePromptSafetyAttributes"]);return r!=null&&c(t,["positivePromptSafetyAttributes"],Vg(r)),t}function y_(i,t){const o={},s=u(i,["numberOfVideos"]);if(t!==void 0&&s!=null&&c(t,["parameters","sampleCount"],s),u(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(i,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=u(i,["durationSeconds"]);if(t!==void 0&&r!=null&&c(t,["parameters","durationSeconds"],r),u(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=u(i,["aspectRatio"]);t!==void 0&&f!=null&&c(t,["parameters","aspectRatio"],f);const m=u(i,["resolution"]);t!==void 0&&m!=null&&c(t,["parameters","resolution"],m);const g=u(i,["personGeneration"]);if(t!==void 0&&g!=null&&c(t,["parameters","personGeneration"],g),u(i,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const v=u(i,["negativePrompt"]);t!==void 0&&v!=null&&c(t,["parameters","negativePrompt"],v);const h=u(i,["enhancePrompt"]);if(t!==void 0&&h!=null&&c(t,["parameters","enhancePrompt"],h),u(i,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=u(i,["lastFrame"]);t!==void 0&&y!=null&&c(t,["instances[0]","lastFrame"],Da(y));const E=u(i,["referenceImages"]);if(t!==void 0&&E!=null){let _=E;Array.isArray(_)&&(_=_.map(x=>TC(x))),c(t,["instances[0]","referenceImages"],_)}if(u(i,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(i,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function S_(i,t){const o={},s=u(i,["numberOfVideos"]);t!==void 0&&s!=null&&c(t,["parameters","sampleCount"],s);const r=u(i,["outputGcsUri"]);t!==void 0&&r!=null&&c(t,["parameters","storageUri"],r);const f=u(i,["fps"]);t!==void 0&&f!=null&&c(t,["parameters","fps"],f);const m=u(i,["durationSeconds"]);t!==void 0&&m!=null&&c(t,["parameters","durationSeconds"],m);const g=u(i,["seed"]);t!==void 0&&g!=null&&c(t,["parameters","seed"],g);const v=u(i,["aspectRatio"]);t!==void 0&&v!=null&&c(t,["parameters","aspectRatio"],v);const h=u(i,["resolution"]);t!==void 0&&h!=null&&c(t,["parameters","resolution"],h);const y=u(i,["personGeneration"]);t!==void 0&&y!=null&&c(t,["parameters","personGeneration"],y);const E=u(i,["pubsubTopic"]);t!==void 0&&E!=null&&c(t,["parameters","pubsubTopic"],E);const _=u(i,["negativePrompt"]);t!==void 0&&_!=null&&c(t,["parameters","negativePrompt"],_);const x=u(i,["enhancePrompt"]);t!==void 0&&x!=null&&c(t,["parameters","enhancePrompt"],x);const I=u(i,["generateAudio"]);t!==void 0&&I!=null&&c(t,["parameters","generateAudio"],I);const w=u(i,["lastFrame"]);t!==void 0&&w!=null&&c(t,["instances[0]","lastFrame"],dn(w));const D=u(i,["referenceImages"]);if(t!==void 0&&D!=null){let J=D;Array.isArray(J)&&(J=J.map(Z=>EC(Z))),c(t,["instances[0]","referenceImages"],J)}const V=u(i,["mask"]);t!==void 0&&V!=null&&c(t,["instances[0]","mask"],SC(V));const $=u(i,["compressionQuality"]);return t!==void 0&&$!=null&&c(t,["parameters","compressionQuality"],$),o}function T_(i){const t={},o=u(i,["name"]);o!=null&&c(t,["name"],o);const s=u(i,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(i,["done"]);r!=null&&c(t,["done"],r);const f=u(i,["error"]);f!=null&&c(t,["error"],f);const m=u(i,["response","generateVideoResponse"]);return m!=null&&c(t,["response"],x_(m)),t}function E_(i){const t={},o=u(i,["name"]);o!=null&&c(t,["name"],o);const s=u(i,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(i,["done"]);r!=null&&c(t,["done"],r);const f=u(i,["error"]);f!=null&&c(t,["error"],f);const m=u(i,["response"]);return m!=null&&c(t,["response"],A_(m)),t}function __(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Pe(i,s));const r=u(t,["prompt"]);r!=null&&c(o,["instances[0]","prompt"],r);const f=u(t,["image"]);f!=null&&c(o,["instances[0]","image"],Da(f));const m=u(t,["video"]);m!=null&&c(o,["instances[0]","video"],kg(m));const g=u(t,["source"]);g!=null&&N_(g,o);const v=u(t,["config"]);return v!=null&&y_(v,o),o}function C_(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Pe(i,s));const r=u(t,["prompt"]);r!=null&&c(o,["instances[0]","prompt"],r);const f=u(t,["image"]);f!=null&&c(o,["instances[0]","image"],dn(f));const m=u(t,["video"]);m!=null&&c(o,["instances[0]","video"],Bg(m));const g=u(t,["source"]);g!=null&&R_(g,o);const v=u(t,["config"]);return v!=null&&S_(v,o),o}function x_(i){const t={},o=u(i,["generatedSamples"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(m=>I_(m))),c(t,["generatedVideos"],f)}const s=u(i,["raiMediaFilteredCount"]);s!=null&&c(t,["raiMediaFilteredCount"],s);const r=u(i,["raiMediaFilteredReasons"]);return r!=null&&c(t,["raiMediaFilteredReasons"],r),t}function A_(i){const t={},o=u(i,["videos"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(m=>w_(m))),c(t,["generatedVideos"],f)}const s=u(i,["raiMediaFilteredCount"]);s!=null&&c(t,["raiMediaFilteredCount"],s);const r=u(i,["raiMediaFilteredReasons"]);return r!=null&&c(t,["raiMediaFilteredReasons"],r),t}function N_(i,t){const o={},s=u(i,["prompt"]);t!==void 0&&s!=null&&c(t,["instances[0]","prompt"],s);const r=u(i,["image"]);t!==void 0&&r!=null&&c(t,["instances[0]","image"],Da(r));const f=u(i,["video"]);return t!==void 0&&f!=null&&c(t,["instances[0]","video"],kg(f)),o}function R_(i,t){const o={},s=u(i,["prompt"]);t!==void 0&&s!=null&&c(t,["instances[0]","prompt"],s);const r=u(i,["image"]);t!==void 0&&r!=null&&c(t,["instances[0]","image"],dn(r));const f=u(i,["video"]);return t!==void 0&&f!=null&&c(t,["instances[0]","video"],Bg(f)),o}function M_(i){const t={},o=u(i,["_self"]);o!=null&&c(t,["image"],q_(o));const s=u(i,["raiFilteredReason"]);s!=null&&c(t,["raiFilteredReason"],s);const r=u(i,["_self"]);return r!=null&&c(t,["safetyAttributes"],Hg(r)),t}function wa(i){const t={},o=u(i,["_self"]);o!=null&&c(t,["image"],Pg(o));const s=u(i,["raiFilteredReason"]);s!=null&&c(t,["raiFilteredReason"],s);const r=u(i,["_self"]);r!=null&&c(t,["safetyAttributes"],Vg(r));const f=u(i,["prompt"]);return f!=null&&c(t,["enhancedPrompt"],f),t}function b_(i){const t={},o=u(i,["_self"]);o!=null&&c(t,["mask"],Pg(o));const s=u(i,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(f=>f)),c(t,["labels"],r)}return t}function I_(i){const t={},o=u(i,["video"]);return o!=null&&c(t,["video"],vC(o)),t}function w_(i){const t={},o=u(i,["_self"]);return o!=null&&c(t,["video"],yC(o)),t}function D_(i){const t={},o=u(i,["modelSelectionConfig"]);o!=null&&c(t,["modelConfig"],o);const s=u(i,["responseJsonSchema"]);s!=null&&c(t,["responseJsonSchema"],s);const r=u(i,["audioTimestamp"]);r!=null&&c(t,["audioTimestamp"],r);const f=u(i,["candidateCount"]);f!=null&&c(t,["candidateCount"],f);const m=u(i,["enableAffectiveDialog"]);m!=null&&c(t,["enableAffectiveDialog"],m);const g=u(i,["frequencyPenalty"]);g!=null&&c(t,["frequencyPenalty"],g);const v=u(i,["logprobs"]);v!=null&&c(t,["logprobs"],v);const h=u(i,["maxOutputTokens"]);h!=null&&c(t,["maxOutputTokens"],h);const y=u(i,["mediaResolution"]);y!=null&&c(t,["mediaResolution"],y);const E=u(i,["presencePenalty"]);E!=null&&c(t,["presencePenalty"],E);const _=u(i,["responseLogprobs"]);_!=null&&c(t,["responseLogprobs"],_);const x=u(i,["responseMimeType"]);x!=null&&c(t,["responseMimeType"],x);const I=u(i,["responseModalities"]);I!=null&&c(t,["responseModalities"],I);const w=u(i,["responseSchema"]);w!=null&&c(t,["responseSchema"],w);const D=u(i,["routingConfig"]);D!=null&&c(t,["routingConfig"],D);const V=u(i,["seed"]);V!=null&&c(t,["seed"],V);const $=u(i,["speechConfig"]);$!=null&&c(t,["speechConfig"],$);const J=u(i,["stopSequences"]);J!=null&&c(t,["stopSequences"],J);const Z=u(i,["temperature"]);Z!=null&&c(t,["temperature"],Z);const le=u(i,["thinkingConfig"]);le!=null&&c(t,["thinkingConfig"],le);const ae=u(i,["topK"]);ae!=null&&c(t,["topK"],ae);const Q=u(i,["topP"]);if(Q!=null&&c(t,["topP"],Q),u(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function U_(i,t){const o={},s=u(t,["model"]);return s!=null&&c(o,["_url","name"],Pe(i,s)),o}function L_(i,t){const o={},s=u(t,["model"]);return s!=null&&c(o,["_url","name"],Pe(i,s)),o}function G_(i){const t={};if(u(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(i,["enableWidget"]);return o!=null&&c(t,["enableWidget"],o),t}function P_(i){const t={};if(u(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(i,["timeRangeFilter"]);return o!=null&&c(t,["timeRangeFilter"],o),t}function H_(i){const t={},o=u(i,["aspectRatio"]);o!=null&&c(t,["aspectRatio"],o);const s=u(i,["imageSize"]);if(s!=null&&c(t,["imageSize"],s),u(i,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function V_(i){const t={},o=u(i,["aspectRatio"]);o!=null&&c(t,["aspectRatio"],o);const s=u(i,["imageSize"]);s!=null&&c(t,["imageSize"],s);const r=u(i,["personGeneration"]);r!=null&&c(t,["personGeneration"],r);const f=u(i,["outputMimeType"]);f!=null&&c(t,["imageOutputOptions","mimeType"],f);const m=u(i,["outputCompressionQuality"]);return m!=null&&c(t,["imageOutputOptions","compressionQuality"],m),t}function q_(i){const t={},o=u(i,["bytesBase64Encoded"]);o!=null&&c(t,["imageBytes"],Ci(o));const s=u(i,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function Pg(i){const t={},o=u(i,["gcsUri"]);o!=null&&c(t,["gcsUri"],o);const s=u(i,["bytesBase64Encoded"]);s!=null&&c(t,["imageBytes"],Ci(s));const r=u(i,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function Da(i){const t={};if(u(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=u(i,["imageBytes"]);o!=null&&c(t,["bytesBase64Encoded"],Ci(o));const s=u(i,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function dn(i){const t={},o=u(i,["gcsUri"]);o!=null&&c(t,["gcsUri"],o);const s=u(i,["imageBytes"]);s!=null&&c(t,["bytesBase64Encoded"],Ci(s));const r=u(i,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function k_(i,t,o){const s={},r=u(t,["pageSize"]);o!==void 0&&r!=null&&c(o,["_query","pageSize"],r);const f=u(t,["pageToken"]);o!==void 0&&f!=null&&c(o,["_query","pageToken"],f);const m=u(t,["filter"]);o!==void 0&&m!=null&&c(o,["_query","filter"],m);const g=u(t,["queryBase"]);return o!==void 0&&g!=null&&c(o,["_url","models_url"],bg(i,g)),s}function B_(i,t,o){const s={},r=u(t,["pageSize"]);o!==void 0&&r!=null&&c(o,["_query","pageSize"],r);const f=u(t,["pageToken"]);o!==void 0&&f!=null&&c(o,["_query","pageToken"],f);const m=u(t,["filter"]);o!==void 0&&m!=null&&c(o,["_query","filter"],m);const g=u(t,["queryBase"]);return o!==void 0&&g!=null&&c(o,["_url","models_url"],bg(i,g)),s}function z_(i,t){const o={},s=u(t,["config"]);return s!=null&&k_(i,s,o),o}function O_(i,t){const o={},s=u(t,["config"]);return s!=null&&B_(i,s,o),o}function F_(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(i,["_self"]);if(r!=null){let f=Ig(r);Array.isArray(f)&&(f=f.map(m=>mc(m))),c(t,["models"],f)}return t}function J_(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(i,["_self"]);if(r!=null){let f=Ig(r);Array.isArray(f)&&(f=f.map(m=>pc(m))),c(t,["models"],f)}return t}function Y_(i){const t={},o=u(i,["maskMode"]);o!=null&&c(t,["maskMode"],o);const s=u(i,["segmentationClasses"]);s!=null&&c(t,["maskClasses"],s);const r=u(i,["maskDilation"]);return r!=null&&c(t,["dilation"],r),t}function mc(i){const t={},o=u(i,["name"]);o!=null&&c(t,["name"],o);const s=u(i,["displayName"]);s!=null&&c(t,["displayName"],s);const r=u(i,["description"]);r!=null&&c(t,["description"],r);const f=u(i,["version"]);f!=null&&c(t,["version"],f);const m=u(i,["_self"]);m!=null&&c(t,["tunedModelInfo"],rC(m));const g=u(i,["inputTokenLimit"]);g!=null&&c(t,["inputTokenLimit"],g);const v=u(i,["outputTokenLimit"]);v!=null&&c(t,["outputTokenLimit"],v);const h=u(i,["supportedGenerationMethods"]);h!=null&&c(t,["supportedActions"],h);const y=u(i,["temperature"]);y!=null&&c(t,["temperature"],y);const E=u(i,["maxTemperature"]);E!=null&&c(t,["maxTemperature"],E);const _=u(i,["topP"]);_!=null&&c(t,["topP"],_);const x=u(i,["topK"]);x!=null&&c(t,["topK"],x);const I=u(i,["thinking"]);return I!=null&&c(t,["thinking"],I),t}function pc(i){const t={},o=u(i,["name"]);o!=null&&c(t,["name"],o);const s=u(i,["displayName"]);s!=null&&c(t,["displayName"],s);const r=u(i,["description"]);r!=null&&c(t,["description"],r);const f=u(i,["versionId"]);f!=null&&c(t,["version"],f);const m=u(i,["deployedModels"]);if(m!=null){let E=m;Array.isArray(E)&&(E=E.map(_=>l_(_))),c(t,["endpoints"],E)}const g=u(i,["labels"]);g!=null&&c(t,["labels"],g);const v=u(i,["_self"]);v!=null&&c(t,["tunedModelInfo"],uC(v));const h=u(i,["defaultCheckpointId"]);h!=null&&c(t,["defaultCheckpointId"],h);const y=u(i,["checkpoints"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(_=>_)),c(t,["checkpoints"],E)}return t}function K_(i){const t={},o=u(i,["mediaResolution"]);o!=null&&c(t,["mediaResolution"],o);const s=u(i,["codeExecutionResult"]);s!=null&&c(t,["codeExecutionResult"],s);const r=u(i,["executableCode"]);r!=null&&c(t,["executableCode"],r);const f=u(i,["fileData"]);f!=null&&c(t,["fileData"],s_(f));const m=u(i,["functionCall"]);m!=null&&c(t,["functionCall"],a_(m));const g=u(i,["functionResponse"]);g!=null&&c(t,["functionResponse"],g);const v=u(i,["inlineData"]);v!=null&&c(t,["inlineData"],DE(v));const h=u(i,["text"]);h!=null&&c(t,["text"],h);const y=u(i,["thought"]);y!=null&&c(t,["thought"],y);const E=u(i,["thoughtSignature"]);E!=null&&c(t,["thoughtSignature"],E);const _=u(i,["videoMetadata"]);return _!=null&&c(t,["videoMetadata"],_),t}function X_(i){const t={},o=u(i,["productImage"]);return o!=null&&c(t,["image"],dn(o)),t}function Q_(i,t){const o={},s=u(i,["numberOfImages"]);t!==void 0&&s!=null&&c(t,["parameters","sampleCount"],s);const r=u(i,["baseSteps"]);t!==void 0&&r!=null&&c(t,["parameters","baseSteps"],r);const f=u(i,["outputGcsUri"]);t!==void 0&&f!=null&&c(t,["parameters","storageUri"],f);const m=u(i,["seed"]);t!==void 0&&m!=null&&c(t,["parameters","seed"],m);const g=u(i,["safetyFilterLevel"]);t!==void 0&&g!=null&&c(t,["parameters","safetySetting"],g);const v=u(i,["personGeneration"]);t!==void 0&&v!=null&&c(t,["parameters","personGeneration"],v);const h=u(i,["addWatermark"]);t!==void 0&&h!=null&&c(t,["parameters","addWatermark"],h);const y=u(i,["outputMimeType"]);t!==void 0&&y!=null&&c(t,["parameters","outputOptions","mimeType"],y);const E=u(i,["outputCompressionQuality"]);t!==void 0&&E!=null&&c(t,["parameters","outputOptions","compressionQuality"],E);const _=u(i,["enhancePrompt"]);t!==void 0&&_!=null&&c(t,["parameters","enhancePrompt"],_);const x=u(i,["labels"]);return t!==void 0&&x!=null&&c(t,["labels"],x),o}function $_(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Pe(i,s));const r=u(t,["source"]);r!=null&&W_(r,o);const f=u(t,["config"]);return f!=null&&Q_(f,o),o}function Z_(i){const t={},o=u(i,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>wa(r))),c(t,["generatedImages"],s)}return t}function W_(i,t){const o={},s=u(i,["prompt"]);t!==void 0&&s!=null&&c(t,["instances[0]","prompt"],s);const r=u(i,["personImage"]);t!==void 0&&r!=null&&c(t,["instances[0]","personImage","image"],dn(r));const f=u(i,["productImages"]);if(t!==void 0&&f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>X_(g))),c(t,["instances[0]","productImages"],m)}return o}function j_(i){const t={},o=u(i,["referenceImage"]);o!=null&&c(t,["referenceImage"],dn(o));const s=u(i,["referenceId"]);s!=null&&c(t,["referenceId"],s);const r=u(i,["referenceType"]);r!=null&&c(t,["referenceType"],r);const f=u(i,["maskImageConfig"]);f!=null&&c(t,["maskImageConfig"],Y_(f));const m=u(i,["controlImageConfig"]);m!=null&&c(t,["controlImageConfig"],qE(m));const g=u(i,["styleImageConfig"]);g!=null&&c(t,["styleImageConfig"],g);const v=u(i,["subjectImageConfig"]);return v!=null&&c(t,["subjectImageConfig"],v),t}function Hg(i){const t={},o=u(i,["safetyAttributes","categories"]);o!=null&&c(t,["categories"],o);const s=u(i,["safetyAttributes","scores"]);s!=null&&c(t,["scores"],s);const r=u(i,["contentType"]);return r!=null&&c(t,["contentType"],r),t}function Vg(i){const t={},o=u(i,["safetyAttributes","categories"]);o!=null&&c(t,["categories"],o);const s=u(i,["safetyAttributes","scores"]);s!=null&&c(t,["scores"],s);const r=u(i,["contentType"]);return r!=null&&c(t,["contentType"],r),t}function eC(i){const t={},o=u(i,["category"]);if(o!=null&&c(t,["category"],o),u(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=u(i,["threshold"]);return s!=null&&c(t,["threshold"],s),t}function tC(i){const t={},o=u(i,["image"]);return o!=null&&c(t,["image"],dn(o)),t}function nC(i,t){const o={},s=u(i,["mode"]);t!==void 0&&s!=null&&c(t,["parameters","mode"],s);const r=u(i,["maxPredictions"]);t!==void 0&&r!=null&&c(t,["parameters","maxPredictions"],r);const f=u(i,["confidenceThreshold"]);t!==void 0&&f!=null&&c(t,["parameters","confidenceThreshold"],f);const m=u(i,["maskDilation"]);t!==void 0&&m!=null&&c(t,["parameters","maskDilation"],m);const g=u(i,["binaryColorThreshold"]);t!==void 0&&g!=null&&c(t,["parameters","binaryColorThreshold"],g);const v=u(i,["labels"]);return t!==void 0&&v!=null&&c(t,["labels"],v),o}function iC(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Pe(i,s));const r=u(t,["source"]);r!=null&&lC(r,o);const f=u(t,["config"]);return f!=null&&nC(f,o),o}function oC(i){const t={},o=u(i,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>b_(r))),c(t,["generatedMasks"],s)}return t}function lC(i,t){const o={},s=u(i,["prompt"]);t!==void 0&&s!=null&&c(t,["instances[0]","prompt"],s);const r=u(i,["image"]);t!==void 0&&r!=null&&c(t,["instances[0]","image"],dn(r));const f=u(i,["scribbleImage"]);return t!==void 0&&f!=null&&c(t,["instances[0]","scribble"],tC(f)),o}function sC(i){const t={},o=u(i,["retrievalConfig"]);o!=null&&c(t,["retrievalConfig"],o);const s=u(i,["functionCallingConfig"]);return s!=null&&c(t,["functionCallingConfig"],r_(s)),t}function aC(i){const t={};if(u(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(i,["computerUse"]);o!=null&&c(t,["computerUse"],o);const s=u(i,["fileSearch"]);s!=null&&c(t,["fileSearch"],s);const r=u(i,["codeExecution"]);if(r!=null&&c(t,["codeExecution"],r),u(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=u(i,["functionDeclarations"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(E=>E)),c(t,["functionDeclarations"],y)}const m=u(i,["googleMaps"]);m!=null&&c(t,["googleMaps"],G_(m));const g=u(i,["googleSearch"]);g!=null&&c(t,["googleSearch"],P_(g));const v=u(i,["googleSearchRetrieval"]);v!=null&&c(t,["googleSearchRetrieval"],v);const h=u(i,["urlContext"]);return h!=null&&c(t,["urlContext"],h),t}function qg(i){const t={},o=u(i,["retrieval"]);o!=null&&c(t,["retrieval"],o);const s=u(i,["computerUse"]);if(s!=null&&c(t,["computerUse"],s),u(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=u(i,["codeExecution"]);r!=null&&c(t,["codeExecution"],r);const f=u(i,["enterpriseWebSearch"]);f!=null&&c(t,["enterpriseWebSearch"],f);const m=u(i,["functionDeclarations"]);if(m!=null){let E=m;Array.isArray(E)&&(E=E.map(_=>u_(_))),c(t,["functionDeclarations"],E)}const g=u(i,["googleMaps"]);g!=null&&c(t,["googleMaps"],g);const v=u(i,["googleSearch"]);v!=null&&c(t,["googleSearch"],v);const h=u(i,["googleSearchRetrieval"]);h!=null&&c(t,["googleSearchRetrieval"],h);const y=u(i,["urlContext"]);return y!=null&&c(t,["urlContext"],y),t}function rC(i){const t={},o=u(i,["baseModel"]);o!=null&&c(t,["baseModel"],o);const s=u(i,["createTime"]);s!=null&&c(t,["createTime"],s);const r=u(i,["updateTime"]);return r!=null&&c(t,["updateTime"],r),t}function uC(i){const t={},o=u(i,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&c(t,["baseModel"],o);const s=u(i,["createTime"]);s!=null&&c(t,["createTime"],s);const r=u(i,["updateTime"]);return r!=null&&c(t,["updateTime"],r),t}function cC(i,t){const o={},s=u(i,["displayName"]);t!==void 0&&s!=null&&c(t,["displayName"],s);const r=u(i,["description"]);t!==void 0&&r!=null&&c(t,["description"],r);const f=u(i,["defaultCheckpointId"]);return t!==void 0&&f!=null&&c(t,["defaultCheckpointId"],f),o}function fC(i,t){const o={},s=u(i,["displayName"]);t!==void 0&&s!=null&&c(t,["displayName"],s);const r=u(i,["description"]);t!==void 0&&r!=null&&c(t,["description"],r);const f=u(i,["defaultCheckpointId"]);return t!==void 0&&f!=null&&c(t,["defaultCheckpointId"],f),o}function dC(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","name"],Pe(i,s));const r=u(t,["config"]);return r!=null&&cC(r,o),o}function mC(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Pe(i,s));const r=u(t,["config"]);return r!=null&&fC(r,o),o}function pC(i,t){const o={},s=u(i,["outputGcsUri"]);t!==void 0&&s!=null&&c(t,["parameters","storageUri"],s);const r=u(i,["safetyFilterLevel"]);t!==void 0&&r!=null&&c(t,["parameters","safetySetting"],r);const f=u(i,["personGeneration"]);t!==void 0&&f!=null&&c(t,["parameters","personGeneration"],f);const m=u(i,["includeRaiReason"]);t!==void 0&&m!=null&&c(t,["parameters","includeRaiReason"],m);const g=u(i,["outputMimeType"]);t!==void 0&&g!=null&&c(t,["parameters","outputOptions","mimeType"],g);const v=u(i,["outputCompressionQuality"]);t!==void 0&&v!=null&&c(t,["parameters","outputOptions","compressionQuality"],v);const h=u(i,["enhanceInputImage"]);t!==void 0&&h!=null&&c(t,["parameters","upscaleConfig","enhanceInputImage"],h);const y=u(i,["imagePreservationFactor"]);t!==void 0&&y!=null&&c(t,["parameters","upscaleConfig","imagePreservationFactor"],y);const E=u(i,["labels"]);t!==void 0&&E!=null&&c(t,["labels"],E);const _=u(i,["numberOfImages"]);t!==void 0&&_!=null&&c(t,["parameters","sampleCount"],_);const x=u(i,["mode"]);return t!==void 0&&x!=null&&c(t,["parameters","mode"],x),o}function hC(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["_url","model"],Pe(i,s));const r=u(t,["image"]);r!=null&&c(o,["instances[0]","image"],dn(r));const f=u(t,["upscaleFactor"]);f!=null&&c(o,["parameters","upscaleConfig","upscaleFactor"],f);const m=u(t,["config"]);return m!=null&&pC(m,o),o}function gC(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(f=>wa(f))),c(t,["generatedImages"],r)}return t}function vC(i){const t={},o=u(i,["uri"]);o!=null&&c(t,["uri"],o);const s=u(i,["encodedVideo"]);s!=null&&c(t,["videoBytes"],Ci(s));const r=u(i,["encoding"]);return r!=null&&c(t,["mimeType"],r),t}function yC(i){const t={},o=u(i,["gcsUri"]);o!=null&&c(t,["uri"],o);const s=u(i,["bytesBase64Encoded"]);s!=null&&c(t,["videoBytes"],Ci(s));const r=u(i,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function SC(i){const t={},o=u(i,["image"]);o!=null&&c(t,["_self"],dn(o));const s=u(i,["maskMode"]);return s!=null&&c(t,["maskMode"],s),t}function TC(i){const t={},o=u(i,["image"]);o!=null&&c(t,["image"],Da(o));const s=u(i,["referenceType"]);return s!=null&&c(t,["referenceType"],s),t}function EC(i){const t={},o=u(i,["image"]);o!=null&&c(t,["image"],dn(o));const s=u(i,["referenceType"]);return s!=null&&c(t,["referenceType"],s),t}function kg(i){const t={},o=u(i,["uri"]);o!=null&&c(t,["uri"],o);const s=u(i,["videoBytes"]);s!=null&&c(t,["encodedVideo"],Ci(s));const r=u(i,["mimeType"]);return r!=null&&c(t,["encoding"],r),t}function Bg(i){const t={},o=u(i,["uri"]);o!=null&&c(t,["gcsUri"],o);const s=u(i,["videoBytes"]);s!=null&&c(t,["bytesBase64Encoded"],Ci(s));const r=u(i,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _C(i,t){const o={},s=u(i,["displayName"]);return t!==void 0&&s!=null&&c(t,["displayName"],s),o}function CC(i){const t={},o=u(i,["config"]);return o!=null&&_C(o,t),t}function xC(i,t){const o={},s=u(i,["force"]);return t!==void 0&&s!=null&&c(t,["_query","force"],s),o}function AC(i){const t={},o=u(i,["name"]);o!=null&&c(t,["_url","name"],o);const s=u(i,["config"]);return s!=null&&xC(s,t),t}function NC(i){const t={},o=u(i,["name"]);return o!=null&&c(t,["_url","name"],o),t}function RC(i,t){const o={},s=u(i,["customMetadata"]);if(t!==void 0&&s!=null){let f=s;Array.isArray(f)&&(f=f.map(m=>m)),c(t,["customMetadata"],f)}const r=u(i,["chunkingConfig"]);return t!==void 0&&r!=null&&c(t,["chunkingConfig"],r),o}function MC(i){const t={},o=u(i,["name"]);o!=null&&c(t,["name"],o);const s=u(i,["metadata"]);s!=null&&c(t,["metadata"],s);const r=u(i,["done"]);r!=null&&c(t,["done"],r);const f=u(i,["error"]);f!=null&&c(t,["error"],f);const m=u(i,["response"]);return m!=null&&c(t,["response"],IC(m)),t}function bC(i){const t={},o=u(i,["fileSearchStoreName"]);o!=null&&c(t,["_url","file_search_store_name"],o);const s=u(i,["fileName"]);s!=null&&c(t,["fileName"],s);const r=u(i,["config"]);return r!=null&&RC(r,t),t}function IC(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["parent"]);s!=null&&c(t,["parent"],s);const r=u(i,["documentName"]);return r!=null&&c(t,["documentName"],r),t}function wC(i,t){const o={},s=u(i,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(i,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),o}function DC(i){const t={},o=u(i,["config"]);return o!=null&&wC(o,t),t}function UC(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(i,["fileSearchStores"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(m=>m)),c(t,["fileSearchStores"],f)}return t}function zg(i,t){const o={},s=u(i,["mimeType"]);t!==void 0&&s!=null&&c(t,["mimeType"],s);const r=u(i,["displayName"]);t!==void 0&&r!=null&&c(t,["displayName"],r);const f=u(i,["customMetadata"]);if(t!==void 0&&f!=null){let g=f;Array.isArray(g)&&(g=g.map(v=>v)),c(t,["customMetadata"],g)}const m=u(i,["chunkingConfig"]);return t!==void 0&&m!=null&&c(t,["chunkingConfig"],m),o}function LC(i){const t={},o=u(i,["fileSearchStoreName"]);o!=null&&c(t,["_url","file_search_store_name"],o);const s=u(i,["config"]);return s!=null&&zg(s,t),t}function GC(i){const t={},o=u(i,["sdkHttpResponse"]);return o!=null&&c(t,["sdkHttpResponse"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PC="Content-Type",HC="X-Server-Timeout",VC="User-Agent",hc="x-goog-api-client",qC="1.38.0",kC=`google-genai-sdk/${qC}`,BC="v1beta1",zC="v1beta";class OC{constructor(t){var o,s,r;this.clientOptions=Object.assign({},t),this.customBaseUrl=(o=t.httpOptions)===null||o===void 0?void 0:o.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const f={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const g=t.project&&t.location||!!t.apiKey;this.customBaseUrl&&!g?(f.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?f.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(f.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),f.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:BC}else{if(!this.clientOptions.apiKey)throw new Yl({message:"API key must be set when using the Gemini API.",status:403});f.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:zC,f.baseUrl="https://generativelanguage.googleapis.com/"}f.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=f,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(f,t.httpOptions))}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&s.push(t.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),o=new URL(t);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,o,s){const r=[this.getRequestUrlInternal(o)];return s&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t,o){return!(o.baseUrl&&o.baseUrlResourceScope===uc.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let o=this.clientOptions.httpOptions;t.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const s=this.shouldPrependVertexProjectPath(t,o),r=this.constructUrl(t.path,o,s);if(t.queryParams)for(const[m,g]of Object.entries(t.queryParams))r.searchParams.append(m,String(g));let f={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else f.body=t.body;return f=await this.includeExtraHttpOptionsToRequestInit(f,o,r.toString(),t.abortSignal),this.unaryApiCall(r,f,t.httpMethod)}patchHttpOptions(t,o){const s=JSON.parse(JSON.stringify(t));for(const[r,f]of Object.entries(o))typeof f=="object"?s[r]=Object.assign(Object.assign({},s[r]),f):f!==void 0&&(s[r]=f);return s}async requestStream(t){let o=this.clientOptions.httpOptions;t.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const s=this.shouldPrependVertexProjectPath(t,o),r=this.constructUrl(t.path,o,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let f={};return f.body=t.body,f=await this.includeExtraHttpOptionsToRequestInit(f,o,r.toString(),t.abortSignal),this.streamApiCall(r,f,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,o,s,r){if(o&&o.timeout||r){const f=new AbortController,m=f.signal;if(o.timeout&&(o==null?void 0:o.timeout)>0){const g=setTimeout(()=>f.abort(),o.timeout);g&&typeof g.unref=="function"&&g.unref()}r&&r.addEventListener("abort",()=>{f.abort()}),t.signal=m}return o&&o.extraBody!==null&&FC(t,o.extraBody),t.headers=await this.getHeadersInternal(o,s),t}async unaryApiCall(t,o,s){return this.apiCall(t.toString(),Object.assign(Object.assign({},o),{method:s})).then(async r=>(await eg(r),new cc(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,o,s){return this.apiCall(t.toString(),Object.assign(Object.assign({},o),{method:s})).then(async r=>(await eg(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){return cn(this,arguments,function*(){var s;const r=(s=t==null?void 0:t.body)===null||s===void 0?void 0:s.getReader(),f=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let m="";const g="data:",v=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:y}=yield ge(r.read());if(h){if(m.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=f.decode(y,{stream:!0});try{const I=JSON.parse(E);if("error"in I){const w=JSON.parse(JSON.stringify(I.error)),D=w.status,V=w.code,$=`got status: ${D}. ${JSON.stringify(I)}`;if(V>=400&&V<600)throw new Yl({message:$,status:V})}}catch(I){if(I.name==="ApiError")throw I}m+=E;let _=-1,x=0;for(;;){_=-1,x=0;for(const D of v){const V=m.indexOf(D);V!==-1&&(_===-1||V<_)&&(_=V,x=D.length)}if(_===-1)break;const I=m.substring(0,_);m=m.substring(_+x);const w=I.trim();if(w.startsWith(g)){const D=w.substring(g.length).trim();try{const V=new Response(D,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield ge(new cc(V))}catch(V){throw new Error(`exception parsing stream chunk ${D}. ${V}`)}}}}}finally{r.releaseLock()}})}async apiCall(t,o){return fetch(t,o).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const t={},o=kC+" "+this.clientOptions.userAgentExtra;return t[VC]=o,t[hc]=o,t[PC]="application/json",t}async getHeadersInternal(t,o){const s=new Headers;if(t&&t.headers){for(const[r,f]of Object.entries(t.headers))s.append(r,f);t.timeout&&t.timeout>0&&s.append(HC,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,o),s}getFileName(t){var o;let s="";return typeof t=="string"&&(s=t.replace(/[/\\]+$/,""),s=(o=s.split(/[/\\]/).pop())!==null&&o!==void 0?o:""),s}async uploadFile(t,o){var s;const r={};o!=null&&(r.mimeType=o.mimeType,r.name=o.name,r.displayName=o.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const f=this.clientOptions.uploader,m=await f.stat(t);r.sizeBytes=String(m.size);const g=(s=o==null?void 0:o.mimeType)!==null&&s!==void 0?s:m.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=g;const v={file:r},h=this.getFileName(t),y=ne("upload/v1beta/files",v._url),E=await this.fetchUploadUrl(y,r.sizeBytes,r.mimeType,h,v,o==null?void 0:o.httpOptions);return f.upload(t,E,this)}async uploadFileToFileSearchStore(t,o,s){var r;const f=this.clientOptions.uploader,m=await f.stat(o),g=String(m.size),v=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:m.type;if(v===void 0||v==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${t}:uploadToFileSearchStore`,y=this.getFileName(o),E={};s!=null&&zg(s,E);const _=await this.fetchUploadUrl(h,g,v,y,E,s==null?void 0:s.httpOptions);return f.uploadToFileSearchStore(o,_,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,o,s,r,f,m){var g;let v={};m?v=m:v={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:t,body:JSON.stringify(f),httpMethod:"POST",httpOptions:v});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(g=h==null?void 0:h.headers)===null||g===void 0?void 0:g["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function eg(i){var t;if(i===void 0)throw new Error("response is undefined");if(!i.ok){const o=i.status;let s;!((t=i.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?s=await i.json():s={error:{message:await i.text(),code:i.status,status:i.statusText}};const r=JSON.stringify(s);throw o>=400&&o<600?new Yl({message:r,status:o}):new Error(r)}}function FC(i,t){if(!t||Object.keys(t).length===0)return;if(i.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof i.body=="string"&&i.body.length>0)try{const f=JSON.parse(i.body);if(typeof f=="object"&&f!==null&&!Array.isArray(f))o=f;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(f,m){const g=Object.assign({},f);for(const v in m)if(Object.prototype.hasOwnProperty.call(m,v)){const h=m[v],y=g[v];h&&typeof h=="object"&&!Array.isArray(h)&&y&&typeof y=="object"&&!Array.isArray(y)?g[v]=s(y,h):(y&&h&&typeof y!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${v}". Original type: ${typeof y}, New type: ${typeof h}. Overwriting.`),g[v]=h)}return g}const r=s(o,t);i.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JC="mcp_used/unknown";let YC=!1;function Og(i){for(const t of i)if(KC(t)||typeof t=="object"&&"inputSchema"in t)return!0;return YC}function Fg(i){var t;const o=(t=i[hc])!==null&&t!==void 0?t:"";i[hc]=(o+` ${JC}`).trimStart()}function KC(i){return i!==null&&typeof i=="object"&&i instanceof wc}function XC(i){return cn(this,arguments,function*(o,s=100){let r,f=0;for(;f<s;){const m=yield ge(o.listTools({cursor:r}));for(const g of m.tools)yield yield ge(g),f++;if(!m.nextCursor)break;r=m.nextCursor}})}class wc{constructor(t=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=o}static create(t,o){return new wc(t,o)}async initialize(){var t,o,s,r;if(this.mcpTools.length>0)return;const f={},m=[];for(const y of this.mcpClients)try{for(var g=!0,v=(o=void 0,fn(XC(y))),h;h=await v.next(),t=h.done,!t;g=!0){r=h.value,g=!1;const E=r;m.push(E);const _=E.name;if(f[_])throw new Error(`Duplicate function name ${_} found in MCP tools. Please ensure function names are unique.`);f[_]=y}}catch(E){o={error:E}}finally{try{!g&&!t&&(s=v.return)&&await s.call(v)}finally{if(o)throw o.error}}this.mcpTools=m,this.functionNameToMcpClient=f}async tool(){return await this.initialize(),AS(this.mcpTools,this.config)}async callTool(t){await this.initialize();const o=[];for(const s of t)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let f;this.config.timeout&&(f={timeout:this.config.timeout});const m=await r.callTool({name:s.name,arguments:s.args},void 0,f);o.push({functionResponse:{name:s.name,response:m.isError?{error:m}:m}})}return o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function QC(i,t,o){const s=new vS;let r;o.data instanceof Blob?r=JSON.parse(await o.data.text()):r=JSON.parse(o.data),Object.assign(s,r),t(s)}class $C{constructor(t,o,s){this.apiClient=t,this.auth=o,this.webSocketFactory=s}async connect(t){var o,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion(),m=jC(this.apiClient.getDefaultHeaders()),g=this.apiClient.getApiKey(),v=`${r}/ws/google.ai.generativelanguage.${f}.GenerativeService.BidiGenerateMusic?key=${g}`;let h=()=>{};const y=new Promise(J=>{h=J}),E=t.callbacks,_=function(){h({})},x=this.apiClient,I={onopen:_,onmessage:J=>{QC(x,E.onmessage,J)},onerror:(o=E==null?void 0:E.onerror)!==null&&o!==void 0?o:function(J){},onclose:(s=E==null?void 0:E.onclose)!==null&&s!==void 0?s:function(J){}},w=this.webSocketFactory.create(v,WC(m),I);w.connect(),await y;const $={setup:{model:Pe(this.apiClient,t.model)}};return w.send(JSON.stringify($)),new ZC(w,this.apiClient)}}class ZC{constructor(t,o){this.conn=t,this.apiClient=o}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=_E(t);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const o=EE(t);this.conn.send(JSON.stringify(o))}sendPlaybackControl(t){const o={playbackControl:t};this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(ko.PLAY)}pause(){this.sendPlaybackControl(ko.PAUSE)}stop(){this.sendPlaybackControl(ko.STOP)}resetContext(){this.sendPlaybackControl(ko.RESET_CONTEXT)}close(){this.conn.close()}}function WC(i){const t={};return i.forEach((o,s)=>{t[s]=o}),t}function jC(i){const t=new Headers;for(const[o,s]of Object.entries(i))t.append(o,s);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ex="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function tx(i,t,o){const s=new gS;let r;o.data instanceof Blob?r=await o.data.text():o.data instanceof ArrayBuffer?r=new TextDecoder().decode(o.data):r=o.data;const f=JSON.parse(r);if(i.isVertexAI()){const m=AE(f);Object.assign(s,m)}else Object.assign(s,f);t(s)}class nx{constructor(t,o,s){this.apiClient=t,this.auth=o,this.webSocketFactory=s,this.music=new $C(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var o,s,r,f,m,g;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const v=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let y;const E=this.apiClient.getHeaders();t.config&&t.config.tools&&Og(t.config.tools)&&Fg(E);const _=sx(E);if(this.apiClient.isVertexAI()){const X=this.apiClient.getProject(),oe=this.apiClient.getLocation(),te=this.apiClient.getApiKey(),pe=!!X&&!!oe||!!te;this.apiClient.getCustomBaseUrl()&&!pe?y=v:(y=`${v}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(_,y))}else{const X=this.apiClient.getApiKey();let oe="BidiGenerateContent",te="key";X!=null&&X.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),oe="BidiGenerateContentConstrained",te="access_token"),y=`${v}/ws/google.ai.generativelanguage.${h}.GenerativeService.${oe}?${te}=${X}`}let x=()=>{};const I=new Promise(X=>{x=X}),w=t.callbacks,D=function(){var X;(X=w==null?void 0:w.onopen)===null||X===void 0||X.call(w),x({})},V=this.apiClient,$={onopen:D,onmessage:X=>{tx(V,w.onmessage,X)},onerror:(o=w==null?void 0:w.onerror)!==null&&o!==void 0?o:function(X){},onclose:(s=w==null?void 0:w.onclose)!==null&&s!==void 0?s:function(X){}},J=this.webSocketFactory.create(y,lx(_),$);J.connect(),await I;let Z=Pe(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&Z.startsWith("publishers/")){const X=this.apiClient.getProject(),oe=this.apiClient.getLocation();X&&oe&&(Z=`projects/${X}/locations/${oe}/`+Z)}let le={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[xa.AUDIO]}:t.config.responseModalities=[xa.AUDIO]),!((f=t.config)===null||f===void 0)&&f.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ae=(g=(m=t.config)===null||m===void 0?void 0:m.tools)!==null&&g!==void 0?g:[],Q=[];for(const X of ae)if(this.isCallableTool(X)){const oe=X;Q.push(await oe.tool())}else Q.push(X);Q.length>0&&(t.config.tools=Q);const Y={model:Z,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?le=TE(this.apiClient,Y):le=SE(this.apiClient,Y),delete le.config,J.send(JSON.stringify(le)),new ox(J,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const ix={turnComplete:!0};class ox{constructor(t,o){this.conn=t,this.apiClient=o}tLiveClientContent(t,o){if(o.turns!==null&&o.turns!==void 0){let s=[];try{s=tn(o.turns),t.isVertexAI()||(s=s.map(r=>Ia(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:s,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(t,o){let s=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?s=o.functionResponses:s=[o.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const f of s){if(typeof f!="object"||f===null||!("name"in f)||!("response"in f))throw new Error(`Could not parse function response, type '${typeof f}'.`);if(!t.isVertexAI()&&!("id"in f))throw new Error(ex)}return{toolResponse:{functionResponses:s}}}sendClientContent(t){t=Object.assign(Object.assign({},ix),t);const o=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(o))}sendRealtimeInput(t){let o={};this.apiClient.isVertexAI()?o={realtimeInput:xE(t)}:o={realtimeInput:CE(t)},this.conn.send(JSON.stringify(o))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function lx(i){const t={};return i.forEach((o,s)=>{t[s]=o}),t}function sx(i){const t=new Headers;for(const[o,s]of Object.entries(i))t.append(o,s);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tg=10;function ng(i){var t,o,s;if(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const m of(o=i==null?void 0:i.tools)!==null&&o!==void 0?o:[])if(Oo(m)){r=!0;break}if(!r)return!0;const f=(s=i==null?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return f&&(f<0||!Number.isInteger(f))||f==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",f),!0):!1}function Oo(i){return"callTool"in i&&typeof i.callTool=="function"}function ax(i){var t,o,s;return(s=(o=(t=i.config)===null||t===void 0?void 0:t.tools)===null||o===void 0?void 0:o.some(r=>Oo(r)))!==null&&s!==void 0?s:!1}function ig(i){var t;const o=[];return!((t=i==null?void 0:i.config)===null||t===void 0)&&t.tools&&i.config.tools.forEach((s,r)=>{if(Oo(s))return;const f=s;f.functionDeclarations&&f.functionDeclarations.length>0&&o.push(r)}),o}function og(i){var t;return!(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rx extends Fn{constructor(t){super(),this.apiClient=t,this.generateContent=async o=>{var s,r,f,m,g;const v=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!ax(o)||ng(o.config))return await this.generateContentInternal(v);const h=ig(o);if(h.length>0){const w=h.map(D=>`tools[${D}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${w}.`)}let y,E;const _=tn(v.contents),x=(f=(r=(s=v.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&f!==void 0?f:tg;let I=0;for(;I<x&&(y=await this.generateContentInternal(v),!(!y.functionCalls||y.functionCalls.length===0));){const w=y.candidates[0].content,D=[];for(const V of(g=(m=o.config)===null||m===void 0?void 0:m.tools)!==null&&g!==void 0?g:[])if(Oo(V)){const J=await V.callTool(y.functionCalls);D.push(...J)}I++,E={role:"user",parts:D},v.contents=tn(v.contents),v.contents.push(w),v.contents.push(E),og(v.config)&&(_.push(w),_.push(E))}return og(v.config)&&(y.automaticFunctionCallingHistory=_),y},this.generateContentStream=async o=>{var s,r,f,m,g;if(this.maybeMoveToResponseJsonSchem(o),ng(o.config)){const E=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(E)}const v=ig(o);if(v.length>0){const E=v.map(_=>`tools[${_}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(f=(r=(s=o==null?void 0:o.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||f===void 0?void 0:f.streamFunctionCallArguments,y=(g=(m=o==null?void 0:o.config)===null||m===void 0?void 0:m.automaticFunctionCalling)===null||g===void 0?void 0:g.disable;if(h&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(s=>{var r;let f;const m=[];if(s!=null&&s.generatedImages)for(const v of s.generatedImages)v&&(v!=null&&v.safetyAttributes)&&((r=v==null?void 0:v.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?f=v==null?void 0:v.safetyAttributes:m.push(v);let g;return f?g={generatedImages:m,positivePromptSafetyAttributes:f,sdkHttpResponse:s.sdkHttpResponse}:g={generatedImages:m,sdkHttpResponse:s.sdkHttpResponse},g}),this.list=async o=>{var s;const m={config:Object.assign(Object.assign({},{queryBase:!0}),o==null?void 0:o.config)};if(this.apiClient.isVertexAI()&&!m.config.queryBase){if(!((s=m.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");m.config.filter="labels.tune-type:*"}return new Qi(On.PAGED_ITEM_MODELS,g=>this.listInternal(g),await this.listInternal(m),m)},this.editImage=async o=>{const s={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(s.referenceImages=o.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async o=>{let s={numberOfImages:1,mode:"upscale"};o.config&&(s=Object.assign(Object.assign({},s),o.config));const r={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async o=>{var s,r,f,m,g,v;if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=o.video)===null||s===void 0)&&s.uri&&(!((r=o.video)===null||r===void 0)&&r.videoBytes)?o.video={uri:o.video.uri,mimeType:o.video.mimeType}:!((m=(f=o.source)===null||f===void 0?void 0:f.video)===null||m===void 0)&&m.uri&&(!((v=(g=o.source)===null||g===void 0?void 0:g.video)===null||v===void 0)&&v.videoBytes)&&(o.source.video={uri:o.source.video.uri,mimeType:o.source.video.mimeType})),await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var o,s,r;const f=(o=t.config)===null||o===void 0?void 0:o.tools;if(!f)return t;const m=await Promise.all(f.map(async v=>Oo(v)?await v.tool():v)),g={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:m})};if(g.config.tools=m,t.config&&t.config.tools&&Og(t.config.tools)){const v=(r=(s=t.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},v);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),Fg(h),g.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:h})}return g}async initAfcToolsMap(t){var o,s,r;const f=new Map;for(const m of(s=(o=t.config)===null||o===void 0?void 0:o.tools)!==null&&s!==void 0?s:[])if(Oo(m)){const g=m,v=await g.tool();for(const h of(r=v.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(f.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);f.set(h.name,g)}}return f}async processAfcStream(t){var o,s,r;const f=(r=(s=(o=t.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:tg;let m=!1,g=0;const v=await this.initAfcToolsMap(t);return(function(h,y,E){return cn(this,arguments,function*(){for(var _,x,I,w,D,V;g<f;){m&&(g++,m=!1);const le=yield ge(h.processParamsMaybeAddMcpUsage(E)),ae=yield ge(h.generateContentStreamInternal(le)),Q=[],Y=[];try{for(var $=!0,J=(x=void 0,fn(ae)),Z;Z=yield ge(J.next()),_=Z.done,!_;$=!0){w=Z.value,$=!1;const X=w;if(yield yield ge(X),X.candidates&&(!((D=X.candidates[0])===null||D===void 0)&&D.content)){Y.push(X.candidates[0].content);for(const oe of(V=X.candidates[0].content.parts)!==null&&V!==void 0?V:[])if(g<f&&oe.functionCall){if(!oe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(oe.functionCall.name)){const te=yield ge(y.get(oe.functionCall.name).callTool([oe.functionCall]));Q.push(...te)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${oe.functionCall.name}`)}}}}catch(X){x={error:X}}finally{try{!$&&!_&&(I=J.return)&&(yield ge(I.call(J)))}finally{if(x)throw x.error}}if(Q.length>0){m=!0;const X=new zl;X.candidates=[{content:{role:"user",parts:Q}}],yield yield ge(X);const oe=[];oe.push(...Y),oe.push({role:"user",parts:Q});const te=tn(E.contents).concat(oe);E.contents=te}else break}})})(this,v,t)}async generateContentInternal(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=Zh(this.apiClient,t);return g=ne("{model}:generateContent",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>{const E=jh(y),_=new zl;return Object.assign(_,E),_})}else{const h=$h(this.apiClient,t);return g=ne("{model}:generateContent",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>{const E=Wh(y),_=new zl;return Object.assign(_,E),_})}}async generateContentStreamInternal(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=Zh(this.apiClient,t);return g=ne("{model}:streamGenerateContent?alt=sse",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.requestStream({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}),m.then(function(E){return cn(this,arguments,function*(){var _,x,I,w;try{for(var D=!0,V=fn(E),$;$=yield ge(V.next()),_=$.done,!_;D=!0){w=$.value,D=!1;const J=w,Z=jh(yield ge(J.json()));Z.sdkHttpResponse={headers:J.headers};const le=new zl;Object.assign(le,Z),yield yield ge(le)}}catch(J){x={error:J}}finally{try{!D&&!_&&(I=V.return)&&(yield ge(I.call(V)))}finally{if(x)throw x.error}}})})}else{const h=$h(this.apiClient,t);return g=ne("{model}:streamGenerateContent?alt=sse",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.requestStream({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}),m.then(function(E){return cn(this,arguments,function*(){var _,x,I,w;try{for(var D=!0,V=fn(E),$;$=yield ge(V.next()),_=$.done,!_;D=!0){w=$.value,D=!1;const J=w,Z=Wh(yield ge(J.json()));Z.sdkHttpResponse={headers:J.headers};const le=new zl;Object.assign(le,Z),yield yield ge(le)}}catch(J){x={error:J}}finally{try{!D&&!_&&(I=V.return)&&(yield ge(I.call(V)))}finally{if(x)throw x.error}}})})}}async embedContent(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=n_(this.apiClient,t);return g=ne("{model}:predict",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>{const E=o_(y),_=new Uh;return Object.assign(_,E),_})}else{const h=t_(this.apiClient,t);return g=ne("{model}:batchEmbedContents",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>{const E=i_(y),_=new Uh;return Object.assign(_,E),_})}}async generateImagesInternal(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=h_(this.apiClient,t);return g=ne("{model}:predict",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>{const E=v_(y),_=new Lh;return Object.assign(_,E),_})}else{const h=p_(this.apiClient,t);return g=ne("{model}:predict",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>{const E=g_(y),_=new Lh;return Object.assign(_,E),_})}}async editImageInternal(t){var o,s;let r,f="",m={};if(this.apiClient.isVertexAI()){const g=ZE(this.apiClient,t);return f=ne("{model}:predict",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:v.headers},y})),r.then(v=>{const h=WE(v),y=new lS;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var o,s;let r,f="",m={};if(this.apiClient.isVertexAI()){const g=hC(this.apiClient,t);return f=ne("{model}:predict",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:v.headers},y})),r.then(v=>{const h=gC(v),y=new sS;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var o,s;let r,f="",m={};if(this.apiClient.isVertexAI()){const g=$_(this.apiClient,t);return f=ne("{model}:predict",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const h=Z_(v),y=new aS;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var o,s;let r,f="",m={};if(this.apiClient.isVertexAI()){const g=iC(this.apiClient,t);return f=ne("{model}:predict",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const h=oC(v),y=new rS;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=L_(this.apiClient,t);return g=ne("{name}",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),m.then(y=>pc(y))}else{const h=U_(this.apiClient,t);return g=ne("{name}",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}).then(y=>y.json()),m.then(y=>mc(y))}}async listInternal(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=O_(this.apiClient,t);return g=ne("{models_url}",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>{const E=J_(y),_=new Gh;return Object.assign(_,E),_})}else{const h=z_(this.apiClient,t);return g=ne("{models_url}",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>{const E=F_(y),_=new Gh;return Object.assign(_,E),_})}}async update(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=mC(this.apiClient,t);return g=ne("{model}",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),m.then(y=>pc(y))}else{const h=dC(this.apiClient,t);return g=ne("{name}",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}).then(y=>y.json()),m.then(y=>mc(y))}}async delete(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=KE(this.apiClient,t);return g=ne("{name}",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>{const E=QE(y),_=new Ph;return Object.assign(_,E),_})}else{const h=YE(this.apiClient,t);return g=ne("{name}",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>{const E=XE(y),_=new Ph;return Object.assign(_,E),_})}}async countTokens(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=OE(this.apiClient,t);return g=ne("{model}:countTokens",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>{const E=JE(y),_=new Hh;return Object.assign(_,E),_})}else{const h=zE(this.apiClient,t);return g=ne("{model}:countTokens",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>{const E=FE(y),_=new Hh;return Object.assign(_,E),_})}}async computeTokens(t){var o,s;let r,f="",m={};if(this.apiClient.isVertexAI()){const g=GE(this.apiClient,t);return f=ne("{model}:computeTokens",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:v.headers},y})),r.then(v=>{const h=PE(v),y=new uS;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=C_(this.apiClient,t);return g=ne("{model}:predictLongRunning",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),m.then(y=>{const E=E_(y),_=new Aa;return Object.assign(_,E),_})}else{const h=__(this.apiClient,t);return g=ne("{model}:predictLongRunning",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}).then(y=>y.json()),m.then(y=>{const E=T_(y),_=new Aa;return Object.assign(_,E),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ux extends Fn{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const o=t.operation,s=t.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let f;s&&"httpOptions"in s&&(f=s.httpOptions);const m=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:f}});return o._fromAPIResponse({apiResponse:m,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(t){const o=t.operation,s=t.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=o.name.split("/operations/")[0];let f;s&&"httpOptions"in s&&(f=s.httpOptions);const m=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:r,config:{httpOptions:f}});return o._fromAPIResponse({apiResponse:m,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:o.name,config:s});return o._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=j0(t);return g=ne("{operationName}",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),m}else{const h=W0(t);return g=ne("{operationName}",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}).then(y=>y.json()),m}}async fetchPredictVideosOperationInternal(t){var o,s;let r,f="",m={};if(this.apiClient.isVertexAI()){const g=J0(t);return f=ne("{resourceName}:fetchPredictOperation",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cx(i){const t={},o=u(i,["data"]);if(o!=null&&c(t,["data"],o),u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=u(i,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function fx(i){const t={},o=u(i,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(f=>Tx(f))),c(t,["parts"],r)}const s=u(i,["role"]);return s!=null&&c(t,["role"],s),t}function dx(i,t,o){const s={},r=u(t,["expireTime"]);o!==void 0&&r!=null&&c(o,["expireTime"],r);const f=u(t,["newSessionExpireTime"]);o!==void 0&&f!=null&&c(o,["newSessionExpireTime"],f);const m=u(t,["uses"]);o!==void 0&&m!=null&&c(o,["uses"],m);const g=u(t,["liveConnectConstraints"]);o!==void 0&&g!=null&&c(o,["bidiGenerateContentSetup"],Sx(i,g));const v=u(t,["lockAdditionalFields"]);return o!==void 0&&v!=null&&c(o,["fieldMask"],v),s}function mx(i,t){const o={},s=u(t,["config"]);return s!=null&&c(o,["config"],dx(i,s,o)),o}function px(i){const t={};if(u(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=u(i,["fileUri"]);o!=null&&c(t,["fileUri"],o);const s=u(i,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function hx(i){const t={},o=u(i,["id"]);o!=null&&c(t,["id"],o);const s=u(i,["args"]);s!=null&&c(t,["args"],s);const r=u(i,["name"]);if(r!=null&&c(t,["name"],r),u(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function gx(i){const t={};if(u(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=u(i,["enableWidget"]);return o!=null&&c(t,["enableWidget"],o),t}function vx(i){const t={};if(u(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=u(i,["timeRangeFilter"]);return o!=null&&c(t,["timeRangeFilter"],o),t}function yx(i,t){const o={},s=u(i,["generationConfig"]);t!==void 0&&s!=null&&c(t,["setup","generationConfig"],s);const r=u(i,["responseModalities"]);t!==void 0&&r!=null&&c(t,["setup","generationConfig","responseModalities"],r);const f=u(i,["temperature"]);t!==void 0&&f!=null&&c(t,["setup","generationConfig","temperature"],f);const m=u(i,["topP"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","topP"],m);const g=u(i,["topK"]);t!==void 0&&g!=null&&c(t,["setup","generationConfig","topK"],g);const v=u(i,["maxOutputTokens"]);t!==void 0&&v!=null&&c(t,["setup","generationConfig","maxOutputTokens"],v);const h=u(i,["mediaResolution"]);t!==void 0&&h!=null&&c(t,["setup","generationConfig","mediaResolution"],h);const y=u(i,["seed"]);t!==void 0&&y!=null&&c(t,["setup","generationConfig","seed"],y);const E=u(i,["speechConfig"]);t!==void 0&&E!=null&&c(t,["setup","generationConfig","speechConfig"],Ic(E));const _=u(i,["thinkingConfig"]);t!==void 0&&_!=null&&c(t,["setup","generationConfig","thinkingConfig"],_);const x=u(i,["enableAffectiveDialog"]);t!==void 0&&x!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],x);const I=u(i,["systemInstruction"]);t!==void 0&&I!=null&&c(t,["setup","systemInstruction"],fx(Ct(I)));const w=u(i,["tools"]);if(t!==void 0&&w!=null){let ae=Yo(w);Array.isArray(ae)&&(ae=ae.map(Q=>_x(Jo(Q)))),c(t,["setup","tools"],ae)}const D=u(i,["sessionResumption"]);t!==void 0&&D!=null&&c(t,["setup","sessionResumption"],Ex(D));const V=u(i,["inputAudioTranscription"]);t!==void 0&&V!=null&&c(t,["setup","inputAudioTranscription"],V);const $=u(i,["outputAudioTranscription"]);t!==void 0&&$!=null&&c(t,["setup","outputAudioTranscription"],$);const J=u(i,["realtimeInputConfig"]);t!==void 0&&J!=null&&c(t,["setup","realtimeInputConfig"],J);const Z=u(i,["contextWindowCompression"]);t!==void 0&&Z!=null&&c(t,["setup","contextWindowCompression"],Z);const le=u(i,["proactivity"]);if(t!==void 0&&le!=null&&c(t,["setup","proactivity"],le),u(i,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return o}function Sx(i,t){const o={},s=u(t,["model"]);s!=null&&c(o,["setup","model"],Pe(i,s));const r=u(t,["config"]);return r!=null&&c(o,["config"],yx(r,o)),o}function Tx(i){const t={},o=u(i,["mediaResolution"]);o!=null&&c(t,["mediaResolution"],o);const s=u(i,["codeExecutionResult"]);s!=null&&c(t,["codeExecutionResult"],s);const r=u(i,["executableCode"]);r!=null&&c(t,["executableCode"],r);const f=u(i,["fileData"]);f!=null&&c(t,["fileData"],px(f));const m=u(i,["functionCall"]);m!=null&&c(t,["functionCall"],hx(m));const g=u(i,["functionResponse"]);g!=null&&c(t,["functionResponse"],g);const v=u(i,["inlineData"]);v!=null&&c(t,["inlineData"],cx(v));const h=u(i,["text"]);h!=null&&c(t,["text"],h);const y=u(i,["thought"]);y!=null&&c(t,["thought"],y);const E=u(i,["thoughtSignature"]);E!=null&&c(t,["thoughtSignature"],E);const _=u(i,["videoMetadata"]);return _!=null&&c(t,["videoMetadata"],_),t}function Ex(i){const t={},o=u(i,["handle"]);if(o!=null&&c(t,["handle"],o),u(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function _x(i){const t={};if(u(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=u(i,["computerUse"]);o!=null&&c(t,["computerUse"],o);const s=u(i,["fileSearch"]);s!=null&&c(t,["fileSearch"],s);const r=u(i,["codeExecution"]);if(r!=null&&c(t,["codeExecution"],r),u(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=u(i,["functionDeclarations"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(E=>E)),c(t,["functionDeclarations"],y)}const m=u(i,["googleMaps"]);m!=null&&c(t,["googleMaps"],gx(m));const g=u(i,["googleSearch"]);g!=null&&c(t,["googleSearch"],vx(g));const v=u(i,["googleSearchRetrieval"]);v!=null&&c(t,["googleSearchRetrieval"],v);const h=u(i,["urlContext"]);return h!=null&&c(t,["urlContext"],h),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cx(i){const t=[];for(const o in i)if(Object.prototype.hasOwnProperty.call(i,o)){const s=i[o];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(f=>`${o}.${f}`);t.push(...r)}else t.push(o)}return t.join(",")}function xx(i,t){let o=null;const s=i.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const f=s.setup;typeof f=="object"&&f!==null?(i.bidiGenerateContentSetup=f,o=f):delete i.bidiGenerateContentSetup}else s!==void 0&&delete i.bidiGenerateContentSetup;const r=i.fieldMask;if(o){const f=Cx(o);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)f?i.fieldMask=f:delete i.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const m=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let g=[];r.length>0&&(g=r.map(h=>m.includes(h)?`generationConfig.${h}`:h));const v=[];f&&v.push(f),g.length>0&&v.push(...g),v.length>0?i.fieldMask=v.join(","):delete i.fieldMask}else delete i.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?i.fieldMask=r.join(","):delete i.fieldMask;return i}class Ax extends Fn{constructor(t){super(),this.apiClient=t}async create(t){var o,s;let r,f="",m={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const g=mx(this.apiClient,t);f=ne("auth_tokens",g._url),m=g._query,delete g.config,delete g._url,delete g._query;const v=xx(g,t.config);return r=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nx(i,t){const o={},s=u(i,["force"]);return t!==void 0&&s!=null&&c(t,["_query","force"],s),o}function Rx(i){const t={},o=u(i,["name"]);o!=null&&c(t,["_url","name"],o);const s=u(i,["config"]);return s!=null&&Nx(s,t),t}function Mx(i){const t={},o=u(i,["name"]);return o!=null&&c(t,["_url","name"],o),t}function bx(i,t){const o={},s=u(i,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const r=u(i,["pageToken"]);return t!==void 0&&r!=null&&c(t,["_query","pageToken"],r),o}function Ix(i){const t={},o=u(i,["parent"]);o!=null&&c(t,["_url","parent"],o);const s=u(i,["config"]);return s!=null&&bx(s,t),t}function wx(i){const t={},o=u(i,["sdkHttpResponse"]);o!=null&&c(t,["sdkHttpResponse"],o);const s=u(i,["nextPageToken"]);s!=null&&c(t,["nextPageToken"],s);const r=u(i,["documents"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(m=>m)),c(t,["documents"],f)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dx extends Fn{constructor(t){super(),this.apiClient=t,this.list=async o=>new Qi(On.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:o.parent,config:s.config}),await this.listInternal(o),o)}async get(t){var o,s;let r,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=Mx(t);return f=ne("{name}",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,s;let r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=Rx(t);r=ne("{name}",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var o,s;let r,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=Ix(t);return f=ne("{parent}/documents",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const h=wx(v),y=new cS;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ux extends Fn{constructor(t,o=new Dx(t)){super(),this.apiClient=t,this.documents=o,this.list=async(s={})=>new Qi(On.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var o,s;let r,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=CC(t);return f=ne("fileSearchStores",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async get(t){var o,s;let r,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=NC(t);return f=ne("{name}",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(t){var o,s;let r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const m=AC(t);r=ne("{name}",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var o,s;let r,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=DC(t);return f=ne("fileSearchStores",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const h=UC(v),y=new fS;return Object.assign(y,h),y})}}async uploadToFileSearchStoreInternal(t){var o,s;let r,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=LC(t);return f=ne("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const h=GC(v),y=new dS;return Object.assign(y,h),y})}}async importFile(t){var o,s;let r,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=bC(t);return f=ne("{file_search_store_name}:importFile",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),r.then(v=>{const h=MC(v),y=new Ac;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Jg=function(){const{crypto:i}=globalThis;if(i!=null&&i.randomUUID)return Jg=i.randomUUID.bind(i),i.randomUUID();const t=new Uint8Array(1),o=i?()=>i.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^o()&15>>+s/4).toString(16))};const Lx=()=>Jg();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gc(i){return typeof i=="object"&&i!==null&&("name"in i&&i.name==="AbortError"||"message"in i&&String(i.message).includes("FetchRequestCanceledException"))}const vc=i=>{if(i instanceof Error)return i;if(typeof i=="object"&&i!==null){try{if(Object.prototype.toString.call(i)==="[object Error]"){const t=new Error(i.message,i.cause?{cause:i.cause}:{});return i.stack&&(t.stack=i.stack),i.cause&&!t.cause&&(t.cause=i.cause),i.name&&(t.name=i.name),t}}catch{}try{return new Error(JSON.stringify(i))}catch{}}return new Error(i)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nn extends Error{}class Rt extends nn{constructor(t,o,s,r){super(`${Rt.makeMessage(t,o,s)}`),this.status=t,this.headers=r,this.error=o}static makeMessage(t,o,s){const r=o!=null&&o.message?typeof o.message=="string"?o.message:JSON.stringify(o.message):o?JSON.stringify(o):s;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,o,s,r){if(!t||!r)return new Ua({message:s,cause:vc(o)});const f=o;return t===400?new Kg(t,f,s,r):t===401?new Xg(t,f,s,r):t===403?new Qg(t,f,s,r):t===404?new $g(t,f,s,r):t===409?new Zg(t,f,s,r):t===422?new Wg(t,f,s,r):t===429?new jg(t,f,s,r):t>=500?new ev(t,f,s,r):new Rt(t,f,s,r)}}class yc extends Rt{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Ua extends Rt{constructor({message:t,cause:o}){super(void 0,void 0,t||"Connection error.",void 0),o&&(this.cause=o)}}class Yg extends Ua{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Kg extends Rt{}class Xg extends Rt{}class Qg extends Rt{}class $g extends Rt{}class Zg extends Rt{}class Wg extends Rt{}class jg extends Rt{}class ev extends Rt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gx=/^[a-z][a-z0-9+.-]*:/i,Px=i=>Gx.test(i);let Sc=i=>(Sc=Array.isArray,Sc(i));const Hx=Sc;let Vx=Hx;const lg=Vx;function qx(i){if(!i)return!0;for(const t in i)return!1;return!0}function kx(i,t){return Object.prototype.hasOwnProperty.call(i,t)}const Bx=(i,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new nn(`${i} must be an integer`);if(t<0)throw new nn(`${i} must be a positive integer`);return t},zx=i=>{try{return JSON.parse(i)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ox=i=>new Promise(t=>setTimeout(t,i));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vo="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fx(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Jx=()=>{var i,t,o,s,r;const f=Fx();if(f==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vo,"X-Stainless-OS":ag(Deno.build.os),"X-Stainless-Arch":sg(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(i=Deno.version)===null||i===void 0?void 0:i.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(f==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vo,"X-Stainless-OS":ag((o=globalThis.process.platform)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Arch":sg((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const m=Yx();return m?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${m.browser}`,"X-Stainless-Runtime-Version":m.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Vo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Yx(){if(typeof navigator>"u"||!navigator)return null;const i=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:o}of i){const s=o.exec(navigator.userAgent);if(s){const r=s[1]||0,f=s[2]||0,m=s[3]||0;return{browser:t,version:`${r}.${f}.${m}`}}}return null}const sg=i=>i==="x32"?"x32":i==="x86_64"||i==="x64"?"x64":i==="arm"?"arm":i==="aarch64"||i==="arm64"?"arm64":i?`other:${i}`:"unknown",ag=i=>(i=i.toLowerCase(),i.includes("ios")?"iOS":i==="android"?"Android":i==="darwin"?"MacOS":i==="win32"?"Windows":i==="freebsd"?"FreeBSD":i==="openbsd"?"OpenBSD":i==="linux"?"Linux":i?`Other:${i}`:"Unknown");let ha;const Kx=()=>ha??(ha=Jx());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xx(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function tv(...i){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...i)}function Qx(i){let t=Symbol.asyncIterator in i?i[Symbol.asyncIterator]():i[Symbol.iterator]();return tv({start(){},async pull(o){const{done:s,value:r}=await t.next();s?o.close():o.enqueue(r)},async cancel(){var o;await((o=t.return)===null||o===void 0?void 0:o.call(t))}})}function nv(i){if(i[Symbol.asyncIterator])return i;const t=i.getReader();return{async next(){try{const o=await t.read();return o!=null&&o.done&&t.releaseLock(),o}catch(o){throw t.releaseLock(),o}},async return(){const o=t.cancel();return t.releaseLock(),await o,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function $x(i){var t,o;if(i===null||typeof i!="object")return;if(i[Symbol.asyncIterator]){await((o=(t=i[Symbol.asyncIterator]()).return)===null||o===void 0?void 0:o.call(t));return}const s=i.getReader(),r=s.cancel();s.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zx=({headers:i,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iv=()=>{var i;if(typeof File>"u"){const{process:t}=globalThis,o=typeof((i=t==null?void 0:t.versions)===null||i===void 0?void 0:i.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(o?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function oc(i,t,o){return iv(),new File(i,t??"unknown_file",o)}function Wx(i){return(typeof i=="object"&&i!==null&&("name"in i&&i.name&&String(i.name)||"url"in i&&i.url&&String(i.url)||"filename"in i&&i.filename&&String(i.filename)||"path"in i&&i.path&&String(i.path))||"").split(/[\\/]/).pop()||void 0}const jx=i=>i!=null&&typeof i=="object"&&typeof i[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ov=i=>i!=null&&typeof i=="object"&&typeof i.size=="number"&&typeof i.type=="string"&&typeof i.text=="function"&&typeof i.slice=="function"&&typeof i.arrayBuffer=="function",eA=i=>i!=null&&typeof i=="object"&&typeof i.name=="string"&&typeof i.lastModified=="number"&&ov(i),tA=i=>i!=null&&typeof i=="object"&&typeof i.url=="string"&&typeof i.blob=="function";async function nA(i,t,o){if(iv(),i=await i,eA(i))return i instanceof File?i:oc([await i.arrayBuffer()],i.name);if(tA(i)){const r=await i.blob();return t||(t=new URL(i.url).pathname.split(/[\\/]/).pop()),oc(await Tc(r),t,o)}const s=await Tc(i);if(t||(t=Wx(i)),!(o!=null&&o.type)){const r=s.find(f=>typeof f=="object"&&"type"in f&&f.type);typeof r=="string"&&(o=Object.assign(Object.assign({},o),{type:r}))}return oc(s,t,o)}async function Tc(i){var t,o,s,r,f;let m=[];if(typeof i=="string"||ArrayBuffer.isView(i)||i instanceof ArrayBuffer)m.push(i);else if(ov(i))m.push(i instanceof Blob?i:await i.arrayBuffer());else if(jx(i))try{for(var g=!0,v=fn(i),h;h=await v.next(),t=h.done,!t;g=!0){r=h.value,g=!1;const y=r;m.push(...await Tc(y))}}catch(y){o={error:y}}finally{try{!g&&!t&&(s=v.return)&&await s.call(v)}finally{if(o)throw o.error}}else{const y=(f=i==null?void 0:i.constructor)===null||f===void 0?void 0:f.name;throw new Error(`Unexpected data type: ${typeof i}${y?`; constructor: ${y}`:""}${iA(i)}`)}return m}function iA(i){return typeof i!="object"||i===null?"":`; props: [${Object.getOwnPropertyNames(i).map(o=>`"${o}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lv{constructor(t){this._client=t}}lv._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sv(i){return i.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const rg=Object.freeze(Object.create(null)),oA=(i=sv)=>(function(o,...s){if(o.length===1)return o[0];let r=!1;const f=[],m=o.reduce((y,E,_)=>{var x,I,w;/[?#]/.test(E)&&(r=!0);const D=s[_];let V=(r?encodeURIComponent:i)(""+D);return _!==s.length&&(D==null||typeof D=="object"&&D.toString===((w=Object.getPrototypeOf((I=Object.getPrototypeOf((x=D.hasOwnProperty)!==null&&x!==void 0?x:rg))!==null&&I!==void 0?I:rg))===null||w===void 0?void 0:w.toString))&&(V=D+"",f.push({start:y.length+E.length,length:V.length,error:`Value of type ${Object.prototype.toString.call(D).slice(8,-1)} is not a valid path parameter`})),y+E+(_===s.length?"":V)},""),g=m.split(/[?#]/,1)[0],v=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=v.exec(g))!==null;)f.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(f.sort((y,E)=>y.start-E.start),f.length>0){let y=0;const E=f.reduce((_,x)=>{const I=" ".repeat(x.start-y),w="^".repeat(x.length);return y=x.start+x.length,_+I+w},"");throw new nn(`Path parameters result in path with invalid segments:
${f.map(_=>_.error).join(`
`)}
${m}
${E}`)}return m}),ga=oA(sv);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class av extends lv{create(t,o){var s;const{api_version:r=this._client.apiVersion}=t,f=Ra(t,["api_version"]);if("model"in f&&"agent_config"in f)throw new nn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in f&&"generation_config"in f)throw new nn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ga`/${r}/interactions`,Object.assign(Object.assign({body:f},o),{stream:(s=t.stream)!==null&&s!==void 0?s:!1}))}delete(t,o={},s){const{api_version:r=this._client.apiVersion}=o??{};return this._client.delete(ga`/${r}/interactions/${t}`,s)}cancel(t,o={},s){const{api_version:r=this._client.apiVersion}=o??{};return this._client.post(ga`/${r}/interactions/${t}/cancel`,s)}get(t,o={},s){var r;const f=o??{},{api_version:m=this._client.apiVersion}=f,g=Ra(f,["api_version"]);return this._client.get(ga`/${m}/interactions/${t}`,Object.assign(Object.assign({query:g},s),{stream:(r=o==null?void 0:o.stream)!==null&&r!==void 0?r:!1}))}}av._key=Object.freeze(["interactions"]);class rv extends av{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lA(i){let t=0;for(const r of i)t+=r.length;const o=new Uint8Array(t);let s=0;for(const r of i)o.set(r,s),s+=r.length;return o}let va;function Dc(i){let t;return(va??(t=new globalThis.TextEncoder,va=t.encode.bind(t)))(i)}let ya;function ug(i){let t;return(ya??(t=new globalThis.TextDecoder,ya=t.decode.bind(t)))(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class La{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const o=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Dc(t):t;this.buffer=lA([this.buffer,o]);const s=[];let r;for(;(r=sA(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(ug(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const f=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,m=ug(this.buffer.subarray(0,f));s.push(m),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}La.NEWLINE_CHARS=new Set([`
`,"\r"]);La.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function sA(i,t){for(let r=t??0;r<i.length;r++){if(i[r]===10)return{preceding:r,index:r+1,carriage:!1};if(i[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function aA(i){for(let s=0;s<i.length-1;s++){if(i[s]===10&&i[s+1]===10||i[s]===13&&i[s+1]===13)return s+2;if(i[s]===13&&i[s+1]===10&&s+3<i.length&&i[s+2]===13&&i[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ma={off:0,error:200,warn:300,info:400,debug:500},cg=(i,t,o)=>{if(i){if(kx(Ma,i))return i;Nt(o).warn(`${t} was set to ${JSON.stringify(i)}, expected one of ${JSON.stringify(Object.keys(Ma))}`)}};function Fl(){}function Sa(i,t,o){return!t||Ma[i]>Ma[o]?Fl:t[i].bind(t)}const rA={error:Fl,warn:Fl,info:Fl,debug:Fl};let fg=new WeakMap;function Nt(i){var t;const o=i.logger,s=(t=i.logLevel)!==null&&t!==void 0?t:"off";if(!o)return rA;const r=fg.get(o);if(r&&r[0]===s)return r[1];const f={error:Sa("error",o,s),warn:Sa("warn",o,s),info:Sa("info",o,s),debug:Sa("debug",o,s)};return fg.set(o,[s,f]),f}const Ki=i=>(i.options&&(i.options=Object.assign({},i.options),delete i.options.headers),i.headers&&(i.headers=Object.fromEntries((i.headers instanceof Headers?[...i.headers]:Object.entries(i.headers)).map(([t,o])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":o]))),"retryOfRequestLogID"in i&&(i.retryOfRequestLogID&&(i.retryOf=i.retryOfRequestLogID),delete i.retryOfRequestLogID),i);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bo{constructor(t,o,s){this.iterator=t,this.controller=o,this.client=s}static fromSSEResponse(t,o,s){let r=!1;const f=s?Nt(s):console;function m(){return cn(this,arguments,function*(){var v,h,y,E;if(r)throw new nn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let _=!1;try{try{for(var x=!0,I=fn(uA(t,o)),w;w=yield ge(I.next()),v=w.done,!v;x=!0){E=w.value,x=!1;const D=E;if(!_)if(D.data.startsWith("[DONE]")){_=!0;continue}else try{yield yield ge(JSON.parse(D.data))}catch(V){throw f.error("Could not parse message into JSON:",D.data),f.error("From chunk:",D.raw),V}}}catch(D){h={error:D}}finally{try{!x&&!v&&(y=I.return)&&(yield ge(y.call(I)))}finally{if(h)throw h.error}}_=!0}catch(D){if(gc(D))return yield ge(void 0);throw D}finally{_||o.abort()}})}return new Bo(m,o,s)}static fromReadableStream(t,o,s){let r=!1;function f(){return cn(this,arguments,function*(){var v,h,y,E;const _=new La,x=nv(t);try{for(var I=!0,w=fn(x),D;D=yield ge(w.next()),v=D.done,!v;I=!0){E=D.value,I=!1;const V=E;for(const $ of _.decode(V))yield yield ge($)}}catch(V){h={error:V}}finally{try{!I&&!v&&(y=w.return)&&(yield ge(y.call(w)))}finally{if(h)throw h.error}}for(const V of _.flush())yield yield ge(V)})}function m(){return cn(this,arguments,function*(){var v,h,y,E;if(r)throw new nn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let _=!1;try{try{for(var x=!0,I=fn(f()),w;w=yield ge(I.next()),v=w.done,!v;x=!0){E=w.value,x=!1;const D=E;_||D&&(yield yield ge(JSON.parse(D)))}}catch(D){h={error:D}}finally{try{!x&&!v&&(y=I.return)&&(yield ge(y.call(I)))}finally{if(h)throw h.error}}_=!0}catch(D){if(gc(D))return yield ge(void 0);throw D}finally{_||o.abort()}})}return new Bo(m,o,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],o=[],s=this.iterator(),r=f=>({next:()=>{if(f.length===0){const m=s.next();t.push(m),o.push(m)}return f.shift()}});return[new Bo(()=>r(t),this.controller,this.client),new Bo(()=>r(o),this.controller,this.client)]}toReadableStream(){const t=this;let o;return tv({async start(){o=t[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:f}=await o.next();if(f)return s.close();const m=Dc(JSON.stringify(r)+`
`);s.enqueue(m)}catch(r){s.error(r)}},async cancel(){var s;await((s=o.return)===null||s===void 0?void 0:s.call(o))}})}}function uA(i,t){return cn(this,arguments,function*(){var s,r,f,m;if(!i.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new nn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new nn("Attempted to iterate over a response with no body");const g=new fA,v=new La,h=nv(i.body);try{for(var y=!0,E=fn(cA(h)),_;_=yield ge(E.next()),s=_.done,!s;y=!0){m=_.value,y=!1;const x=m;for(const I of v.decode(x)){const w=g.decode(I);w&&(yield yield ge(w))}}}catch(x){r={error:x}}finally{try{!y&&!s&&(f=E.return)&&(yield ge(f.call(E)))}finally{if(r)throw r.error}}for(const x of v.flush()){const I=g.decode(x);I&&(yield yield ge(I))}})}function cA(i){return cn(this,arguments,function*(){var o,s,r,f;let m=new Uint8Array;try{for(var g=!0,v=fn(i),h;h=yield ge(v.next()),o=h.done,!o;g=!0){f=h.value,g=!1;const y=f;if(y==null)continue;const E=y instanceof ArrayBuffer?new Uint8Array(y):typeof y=="string"?Dc(y):y;let _=new Uint8Array(m.length+E.length);_.set(m),_.set(E,m.length),m=_;let x;for(;(x=aA(m))!==-1;)yield yield ge(m.slice(0,x)),m=m.slice(x)}}catch(y){s={error:y}}finally{try{!g&&!o&&(r=v.return)&&(yield ge(r.call(v)))}finally{if(s)throw s.error}}m.length>0&&(yield yield ge(m))})}class fA{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const f={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],f}if(this.chunks.push(t),t.startsWith(":"))return null;let[o,s,r]=dA(t,":");return r.startsWith(" ")&&(r=r.substring(1)),o==="event"?this.event=r:o==="data"&&this.data.push(r),null}}function dA(i,t){const o=i.indexOf(t);return o!==-1?[i.substring(0,o),t,i.substring(o+t.length)]:[i,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function mA(i,t){const{response:o,requestLogID:s,retryOfRequestLogID:r,startTime:f}=t,m=await(async()=>{var g;if(t.options.stream)return Nt(i).debug("response",o.status,o.url,o.headers,o.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(o,t.controller,i):Bo.fromSSEResponse(o,t.controller,i);if(o.status===204)return null;if(t.options.__binaryResponse)return o;const v=o.headers.get("content-type"),h=(g=v==null?void 0:v.split(";")[0])===null||g===void 0?void 0:g.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await o.json():await o.text()})();return Nt(i).debug(`[${s}] response parsed`,Ki({retryOfRequestLogID:r,url:o.url,status:o.status,body:m,durationMs:Date.now()-f})),m}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Uc extends Promise{constructor(t,o,s=mA){super(r=>{r(null)}),this.responsePromise=o,this.parseResponse=s,this.client=t}_thenUnwrap(t){return new Uc(this.client,this.responsePromise,async(o,s)=>t(await this.parseResponse(o,s),s))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,o]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:o}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,o){return this.parse().then(t,o)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uv=Symbol("brand.privateNullableHeaders");function*pA(i){if(!i)return;if(uv in i){const{values:s,nulls:r}=i;yield*s.entries();for(const f of r)yield[f,null];return}let t=!1,o;i instanceof Headers?o=i.entries():lg(i)?o=i:(t=!0,o=Object.entries(i??{}));for(let s of o){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const f=lg(s[1])?s[1]:[s[1]];let m=!1;for(const g of f)g!==void 0&&(t&&!m&&(m=!0,yield[r,null]),yield[r,g])}}const Ol=i=>{const t=new Headers,o=new Set;for(const s of i){const r=new Set;for(const[f,m]of pA(s)){const g=f.toLowerCase();r.has(g)||(t.delete(f),r.add(g)),m===null?(t.delete(f),o.add(g)):(t.append(f,m),o.delete(g))}}return{[uv]:!0,values:t,nulls:o}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lc=i=>{var t,o,s,r,f,m;if(typeof globalThis.process<"u")return(s=(o=(t=q0)===null||t===void 0?void 0:t[i])===null||o===void 0?void 0:o.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(m=(f=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||f===void 0?void 0:f.call(r,i))===null||m===void 0?void 0:m.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var cv;class Ga{constructor(t){var o,s,r,f,m,g,v,{baseURL:h=lc("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(o=lc("GEMINI_API_KEY"))!==null&&o!==void 0?o:null,apiVersion:E="v1beta"}=t,_=Ra(t,["baseURL","apiKey","apiVersion"]);const x=Object.assign(Object.assign({apiKey:y,apiVersion:E},_),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=x.baseURL,this.timeout=(s=x.timeout)!==null&&s!==void 0?s:Ga.DEFAULT_TIMEOUT,this.logger=(r=x.logger)!==null&&r!==void 0?r:console;const I="warn";this.logLevel=I,this.logLevel=(m=(f=cg(x.logLevel,"ClientOptions.logLevel",this))!==null&&f!==void 0?f:cg(lc("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&m!==void 0?m:I,this.fetchOptions=x.fetchOptions,this.maxRetries=(g=x.maxRetries)!==null&&g!==void 0?g:2,this.fetch=(v=x.fetch)!==null&&v!==void 0?v:Xx(),this.encoder=Zx,this._options=x,this.apiKey=y,this.apiVersion=E,this.clientAdapter=x.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:o}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!o.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const o=Ol([t.headers]);if(!(o.values.has("authorization")||o.values.has("x-goog-api-key"))){if(this.apiKey)return Ol([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ol([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([o,s])=>typeof s<"u").map(([o,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(o)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(o)}=`;throw new nn(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Vo}`}defaultIdempotencyKey(){return`stainless-node-retry-${Lx()}`}makeStatusError(t,o,s,r){return Rt.generate(t,o,s,r)}buildURL(t,o,s){const r=!this.baseURLOverridden()&&s||this.baseURL,f=Px(t)?new URL(t):new URL(r+(r.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),m=this.defaultQuery();return qx(m)||(o=Object.assign(Object.assign({},m),o)),typeof o=="object"&&o&&!Array.isArray(o)&&(f.search=this.stringifyQuery(o)),f.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const o=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${o}`}}async prepareRequest(t,{url:o,options:s}){}get(t,o){return this.methodRequest("get",t,o)}post(t,o){return this.methodRequest("post",t,o)}patch(t,o){return this.methodRequest("patch",t,o)}put(t,o){return this.methodRequest("put",t,o)}delete(t,o){return this.methodRequest("delete",t,o)}methodRequest(t,o,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:t,path:o},r)))}request(t,o=null){return new Uc(this,this.makeRequest(t,o,void 0))}async makeRequest(t,o,s){var r,f,m;const g=await t,v=(r=g.maxRetries)!==null&&r!==void 0?r:this.maxRetries;o==null&&(o=v),await this.prepareOptions(g);const{req:h,url:y,timeout:E}=await this.buildRequest(g,{retryCount:v-o});await this.prepareRequest(h,{url:y,options:g});const _="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),x=s===void 0?"":`, retryOf: ${s}`,I=Date.now();if(Nt(this).debug(`[${_}] sending request`,Ki({retryOfRequestLogID:s,method:g.method,url:y,options:g,headers:h.headers})),!((f=g.signal)===null||f===void 0)&&f.aborted)throw new yc;const w=new AbortController,D=await this.fetchWithTimeout(y,h,E,w).catch(vc),V=Date.now();if(D instanceof globalThis.Error){const J=`retrying, ${o} attempts remaining`;if(!((m=g.signal)===null||m===void 0)&&m.aborted)throw new yc;const Z=gc(D)||/timed? ?out/i.test(String(D)+("cause"in D?String(D.cause):""));if(o)return Nt(this).info(`[${_}] connection ${Z?"timed out":"failed"} - ${J}`),Nt(this).debug(`[${_}] connection ${Z?"timed out":"failed"} (${J})`,Ki({retryOfRequestLogID:s,url:y,durationMs:V-I,message:D.message})),this.retryRequest(g,o,s??_);throw Nt(this).info(`[${_}] connection ${Z?"timed out":"failed"} - error; no more retries left`),Nt(this).debug(`[${_}] connection ${Z?"timed out":"failed"} (error; no more retries left)`,Ki({retryOfRequestLogID:s,url:y,durationMs:V-I,message:D.message})),Z?new Yg:new Ua({cause:D})}const $=`[${_}${x}] ${h.method} ${y} ${D.ok?"succeeded":"failed"} with status ${D.status} in ${V-I}ms`;if(!D.ok){const J=await this.shouldRetry(D);if(o&&J){const X=`retrying, ${o} attempts remaining`;return await $x(D.body),Nt(this).info(`${$} - ${X}`),Nt(this).debug(`[${_}] response error (${X})`,Ki({retryOfRequestLogID:s,url:D.url,status:D.status,headers:D.headers,durationMs:V-I})),this.retryRequest(g,o,s??_,D.headers)}const Z=J?"error; no more retries left":"error; not retryable";Nt(this).info(`${$} - ${Z}`);const le=await D.text().catch(X=>vc(X).message),ae=zx(le),Q=ae?void 0:le;throw Nt(this).debug(`[${_}] response error (${Z})`,Ki({retryOfRequestLogID:s,url:D.url,status:D.status,headers:D.headers,message:Q,durationMs:Date.now()-I})),this.makeStatusError(D.status,ae,Q,D.headers)}return Nt(this).info($),Nt(this).debug(`[${_}] response start`,Ki({retryOfRequestLogID:s,url:D.url,status:D.status,headers:D.headers,durationMs:V-I})),{response:D,options:g,controller:w,requestLogID:_,retryOfRequestLogID:s,startTime:I}}async fetchWithTimeout(t,o,s,r){const f=o||{},{signal:m,method:g}=f,v=Ra(f,["signal","method"]);m&&m.addEventListener("abort",()=>r.abort());const h=setTimeout(()=>r.abort(),s),y=globalThis.ReadableStream&&v.body instanceof globalThis.ReadableStream||typeof v.body=="object"&&v.body!==null&&Symbol.asyncIterator in v.body,E=Object.assign(Object.assign(Object.assign({signal:r.signal},y?{duplex:"half"}:{}),{method:"GET"}),v);g&&(E.method=g.toUpperCase());try{return await this.fetch.call(void 0,t,E)}finally{clearTimeout(h)}}async shouldRetry(t){const o=t.headers.get("x-should-retry");return o==="true"?!0:o==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,o,s,r){var f;let m;const g=r==null?void 0:r.get("retry-after-ms");if(g){const h=parseFloat(g);Number.isNaN(h)||(m=h)}const v=r==null?void 0:r.get("retry-after");if(v&&!m){const h=parseFloat(v);Number.isNaN(h)?m=Date.parse(v)-Date.now():m=h*1e3}if(!(m&&0<=m&&m<60*1e3)){const h=(f=t.maxRetries)!==null&&f!==void 0?f:this.maxRetries;m=this.calculateDefaultRetryTimeoutMillis(o,h)}return await Ox(m),this.makeRequest(t,o-1,s)}calculateDefaultRetryTimeoutMillis(t,o){const f=o-t,m=Math.min(.5*Math.pow(2,f),8),g=1-Math.random()*.25;return m*g*1e3}async buildRequest(t,{retryCount:o=0}={}){var s,r,f;const m=Object.assign({},t),{method:g,path:v,query:h,defaultBaseURL:y}=m,E=this.buildURL(v,h,y);"timeout"in m&&Bx("timeout",m.timeout),m.timeout=(s=m.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:_,body:x}=this.buildBody({options:m}),I=await this.buildHeaders({options:t,method:g,bodyHeaders:_,retryCount:o});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:g,headers:I},m.signal&&{signal:m.signal}),globalThis.ReadableStream&&x instanceof globalThis.ReadableStream&&{duplex:"half"}),x&&{body:x}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(f=m.fetchOptions)!==null&&f!==void 0?f:{}),url:E,timeout:m.timeout}}async buildHeaders({options:t,method:o,bodyHeaders:s,retryCount:r}){let f={};this.idempotencyHeader&&o!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),f[this.idempotencyHeader]=t.idempotencyKey);const m=await this.authHeaders(t);let g=Ol([f,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),Kx()),this._options.defaultHeaders,s,t.headers,m]);return this.validateHeaders(g),g.values}buildBody({options:{body:t,headers:o}}){if(!t)return{bodyHeaders:void 0,body:void 0};const s=Ol([o]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&s.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:Qx(t)}:this.encoder({body:t,headers:s})}}Ga.DEFAULT_TIMEOUT=6e4;class pt extends Ga{constructor(){super(...arguments),this.interactions=new rv(this)}}cv=pt;pt.GeminiNextGenAPIClient=cv;pt.GeminiNextGenAPIClientError=nn;pt.APIError=Rt;pt.APIConnectionError=Ua;pt.APIConnectionTimeoutError=Yg;pt.APIUserAbortError=yc;pt.NotFoundError=$g;pt.ConflictError=Zg;pt.RateLimitError=jg;pt.BadRequestError=Kg;pt.AuthenticationError=Xg;pt.InternalServerError=ev;pt.PermissionDeniedError=Qg;pt.UnprocessableEntityError=Wg;pt.toFile=nA;pt.Interactions=rv;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hA(i,t){const o={},s=u(i,["name"]);return s!=null&&c(o,["_url","name"],s),o}function gA(i,t){const o={},s=u(i,["name"]);return s!=null&&c(o,["_url","name"],s),o}function vA(i,t){const o={},s=u(i,["sdkHttpResponse"]);return s!=null&&c(o,["sdkHttpResponse"],s),o}function yA(i,t){const o={},s=u(i,["sdkHttpResponse"]);return s!=null&&c(o,["sdkHttpResponse"],s),o}function SA(i,t,o){const s={};if(u(i,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=u(i,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&c(t,["displayName"],r),u(i,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const f=u(i,["epochCount"]);t!==void 0&&f!=null&&c(t,["tuningTask","hyperparameters","epochCount"],f);const m=u(i,["learningRateMultiplier"]);if(m!=null&&c(s,["tuningTask","hyperparameters","learningRateMultiplier"],m),u(i,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(i,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(i,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const g=u(i,["batchSize"]);t!==void 0&&g!=null&&c(t,["tuningTask","hyperparameters","batchSize"],g);const v=u(i,["learningRate"]);if(t!==void 0&&v!=null&&c(t,["tuningTask","hyperparameters","learningRate"],v),u(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(i,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function TA(i,t,o){const s={};let r=u(o,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const x=u(i,["validationDataset"]);t!==void 0&&x!=null&&c(t,["supervisedTuningSpec"],dg(x))}else if(r==="PREFERENCE_TUNING"){const x=u(i,["validationDataset"]);t!==void 0&&x!=null&&c(t,["preferenceOptimizationSpec"],dg(x))}const f=u(i,["tunedModelDisplayName"]);t!==void 0&&f!=null&&c(t,["tunedModelDisplayName"],f);const m=u(i,["description"]);t!==void 0&&m!=null&&c(t,["description"],m);let g=u(o,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const x=u(i,["epochCount"]);t!==void 0&&x!=null&&c(t,["supervisedTuningSpec","hyperParameters","epochCount"],x)}else if(g==="PREFERENCE_TUNING"){const x=u(i,["epochCount"]);t!==void 0&&x!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],x)}let v=u(o,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const x=u(i,["learningRateMultiplier"]);t!==void 0&&x!=null&&c(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],x)}else if(v==="PREFERENCE_TUNING"){const x=u(i,["learningRateMultiplier"]);t!==void 0&&x!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],x)}let h=u(o,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const x=u(i,["exportLastCheckpointOnly"]);t!==void 0&&x!=null&&c(t,["supervisedTuningSpec","exportLastCheckpointOnly"],x)}else if(h==="PREFERENCE_TUNING"){const x=u(i,["exportLastCheckpointOnly"]);t!==void 0&&x!=null&&c(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],x)}let y=u(o,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const x=u(i,["adapterSize"]);t!==void 0&&x!=null&&c(t,["supervisedTuningSpec","hyperParameters","adapterSize"],x)}else if(y==="PREFERENCE_TUNING"){const x=u(i,["adapterSize"]);t!==void 0&&x!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],x)}if(u(i,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(i,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=u(i,["labels"]);t!==void 0&&E!=null&&c(t,["labels"],E);const _=u(i,["beta"]);return t!==void 0&&_!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","beta"],_),s}function EA(i,t){const o={},s=u(i,["baseModel"]);s!=null&&c(o,["baseModel"],s);const r=u(i,["preTunedModel"]);r!=null&&c(o,["preTunedModel"],r);const f=u(i,["trainingDataset"]);f!=null&&DA(f);const m=u(i,["config"]);return m!=null&&SA(m,o),o}function _A(i,t){const o={},s=u(i,["baseModel"]);s!=null&&c(o,["baseModel"],s);const r=u(i,["preTunedModel"]);r!=null&&c(o,["preTunedModel"],r);const f=u(i,["trainingDataset"]);f!=null&&UA(f,o,t);const m=u(i,["config"]);return m!=null&&TA(m,o,t),o}function CA(i,t){const o={},s=u(i,["name"]);return s!=null&&c(o,["_url","name"],s),o}function xA(i,t){const o={},s=u(i,["name"]);return s!=null&&c(o,["_url","name"],s),o}function AA(i,t,o){const s={},r=u(i,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const f=u(i,["pageToken"]);t!==void 0&&f!=null&&c(t,["_query","pageToken"],f);const m=u(i,["filter"]);return t!==void 0&&m!=null&&c(t,["_query","filter"],m),s}function NA(i,t,o){const s={},r=u(i,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const f=u(i,["pageToken"]);t!==void 0&&f!=null&&c(t,["_query","pageToken"],f);const m=u(i,["filter"]);return t!==void 0&&m!=null&&c(t,["_query","filter"],m),s}function RA(i,t){const o={},s=u(i,["config"]);return s!=null&&AA(s,o),o}function MA(i,t){const o={},s=u(i,["config"]);return s!=null&&NA(s,o),o}function bA(i,t){const o={},s=u(i,["sdkHttpResponse"]);s!=null&&c(o,["sdkHttpResponse"],s);const r=u(i,["nextPageToken"]);r!=null&&c(o,["nextPageToken"],r);const f=u(i,["tunedModels"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>fv(g))),c(o,["tuningJobs"],m)}return o}function IA(i,t){const o={},s=u(i,["sdkHttpResponse"]);s!=null&&c(o,["sdkHttpResponse"],s);const r=u(i,["nextPageToken"]);r!=null&&c(o,["nextPageToken"],r);const f=u(i,["tuningJobs"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>Ec(g))),c(o,["tuningJobs"],m)}return o}function wA(i,t){const o={},s=u(i,["name"]);s!=null&&c(o,["model"],s);const r=u(i,["name"]);return r!=null&&c(o,["endpoint"],r),o}function DA(i,t){const o={};if(u(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(i,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=u(i,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(f=>f)),c(o,["examples","examples"],r)}return o}function UA(i,t,o){const s={};let r=u(o,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const m=u(i,["gcsUri"]);t!==void 0&&m!=null&&c(t,["supervisedTuningSpec","trainingDatasetUri"],m)}else if(r==="PREFERENCE_TUNING"){const m=u(i,["gcsUri"]);t!==void 0&&m!=null&&c(t,["preferenceOptimizationSpec","trainingDatasetUri"],m)}let f=u(o,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const m=u(i,["vertexDatasetResource"]);t!==void 0&&m!=null&&c(t,["supervisedTuningSpec","trainingDatasetUri"],m)}else if(f==="PREFERENCE_TUNING"){const m=u(i,["vertexDatasetResource"]);t!==void 0&&m!=null&&c(t,["preferenceOptimizationSpec","trainingDatasetUri"],m)}if(u(i,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function fv(i,t){const o={},s=u(i,["sdkHttpResponse"]);s!=null&&c(o,["sdkHttpResponse"],s);const r=u(i,["name"]);r!=null&&c(o,["name"],r);const f=u(i,["state"]);f!=null&&c(o,["state"],Rg(f));const m=u(i,["createTime"]);m!=null&&c(o,["createTime"],m);const g=u(i,["tuningTask","startTime"]);g!=null&&c(o,["startTime"],g);const v=u(i,["tuningTask","completeTime"]);v!=null&&c(o,["endTime"],v);const h=u(i,["updateTime"]);h!=null&&c(o,["updateTime"],h);const y=u(i,["description"]);y!=null&&c(o,["description"],y);const E=u(i,["baseModel"]);E!=null&&c(o,["baseModel"],E);const _=u(i,["_self"]);return _!=null&&c(o,["tunedModel"],wA(_)),o}function Ec(i,t){const o={},s=u(i,["sdkHttpResponse"]);s!=null&&c(o,["sdkHttpResponse"],s);const r=u(i,["name"]);r!=null&&c(o,["name"],r);const f=u(i,["state"]);f!=null&&c(o,["state"],Rg(f));const m=u(i,["createTime"]);m!=null&&c(o,["createTime"],m);const g=u(i,["startTime"]);g!=null&&c(o,["startTime"],g);const v=u(i,["endTime"]);v!=null&&c(o,["endTime"],v);const h=u(i,["updateTime"]);h!=null&&c(o,["updateTime"],h);const y=u(i,["error"]);y!=null&&c(o,["error"],y);const E=u(i,["description"]);E!=null&&c(o,["description"],E);const _=u(i,["baseModel"]);_!=null&&c(o,["baseModel"],_);const x=u(i,["tunedModel"]);x!=null&&c(o,["tunedModel"],x);const I=u(i,["preTunedModel"]);I!=null&&c(o,["preTunedModel"],I);const w=u(i,["supervisedTuningSpec"]);w!=null&&c(o,["supervisedTuningSpec"],w);const D=u(i,["preferenceOptimizationSpec"]);D!=null&&c(o,["preferenceOptimizationSpec"],D);const V=u(i,["tuningDataStats"]);V!=null&&c(o,["tuningDataStats"],V);const $=u(i,["encryptionSpec"]);$!=null&&c(o,["encryptionSpec"],$);const J=u(i,["partnerModelTuningSpec"]);J!=null&&c(o,["partnerModelTuningSpec"],J);const Z=u(i,["customBaseModel"]);Z!=null&&c(o,["customBaseModel"],Z);const le=u(i,["experiment"]);le!=null&&c(o,["experiment"],le);const ae=u(i,["labels"]);ae!=null&&c(o,["labels"],ae);const Q=u(i,["outputUri"]);Q!=null&&c(o,["outputUri"],Q);const Y=u(i,["pipelineJob"]);Y!=null&&c(o,["pipelineJob"],Y);const X=u(i,["serviceAccount"]);X!=null&&c(o,["serviceAccount"],X);const oe=u(i,["tunedModelDisplayName"]);oe!=null&&c(o,["tunedModelDisplayName"],oe);const te=u(i,["veoTuningSpec"]);return te!=null&&c(o,["veoTuningSpec"],te),o}function LA(i,t){const o={},s=u(i,["sdkHttpResponse"]);s!=null&&c(o,["sdkHttpResponse"],s);const r=u(i,["name"]);r!=null&&c(o,["name"],r);const f=u(i,["metadata"]);f!=null&&c(o,["metadata"],f);const m=u(i,["done"]);m!=null&&c(o,["done"],m);const g=u(i,["error"]);return g!=null&&c(o,["error"],g),o}function dg(i,t){const o={},s=u(i,["gcsUri"]);s!=null&&c(o,["validationDatasetUri"],s);const r=u(i,["vertexDatasetResource"]);return r!=null&&c(o,["validationDatasetUri"],r),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GA extends Fn{constructor(t){super(),this.apiClient=t,this.list=async(o={})=>new Qi(On.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(o),o),this.get=async o=>await this.getInternal(o),this.tune=async o=>{var s;if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const r={tunedModelName:o.baseModel};!((s=o.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=o.config.preTunedModelCheckpointId);const f=Object.assign(Object.assign({},o),{preTunedModel:r});return f.baseModel=void 0,await this.tuneInternal(f)}else{const r=Object.assign({},o);return await this.tuneInternal(r)}else{const r=Object.assign({},o),f=await this.tuneMldevInternal(r);let m="";return f.metadata!==void 0&&f.metadata.tunedModel!==void 0?m=f.metadata.tunedModel:f.name!==void 0&&f.name.includes("/operations/")&&(m=f.name.split("/operations/")[0]),{name:m,state:rc.JOB_STATE_QUEUED}}}}async getInternal(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=xA(t);return g=ne("{name}",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>Ec(y))}else{const h=CA(t);return g=ne("{name}",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>fv(y))}}async listInternal(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=MA(t);return g=ne("tuningJobs",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>{const E=IA(y),_=new Vh;return Object.assign(_,E),_})}else{const h=RA(t);return g=ne("tunedModels",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>{const E=bA(y),_=new Vh;return Object.assign(_,E),_})}}async cancel(t){var o,s,r,f;let m,g="",v={};if(this.apiClient.isVertexAI()){const h=gA(t);return g=ne("{name}:cancel",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>{const E=yA(y),_=new qh;return Object.assign(_,E),_})}else{const h=hA(t);return g=ne("{name}:cancel",h._url),v=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(f=t.config)===null||f===void 0?void 0:f.abortSignal}).then(y=>y.json().then(E=>{const _=E;return _.sdkHttpResponse={headers:y.headers},_})),m.then(y=>{const E=vA(y),_=new qh;return Object.assign(_,E),_})}}async tuneInternal(t){var o,s;let r,f="",m={};if(this.apiClient.isVertexAI()){const g=_A(t,t);return f=ne("tuningJobs",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:v.headers},y})),r.then(v=>Ec(v))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var o,s;let r,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=EA(t);return f=ne("tunedModels",g._url),m=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:v.headers},y})),r.then(v=>LA(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PA{async download(t,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const HA=1024*1024*8,VA=3,qA=1e3,kA=2,ba="x-goog-upload-status";async function BA(i,t,o){var s;const r=await dv(i,t,o),f=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[ba])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function zA(i,t,o){var s;const r=await dv(i,t,o),f=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[ba])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const m=Eg(f),g=new Nc;return Object.assign(g,m),g}async function dv(i,t,o){var s,r;let f=0,m=0,g=new cc(new Response),v="upload";for(f=i.size;m<f;){const h=Math.min(HA,f-m),y=i.slice(m,m+h);m+h>=f&&(v+=", finalize");let E=0,_=qA;for(;E<VA&&(g=await o.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":String(m),"Content-Length":String(h)}}}),!(!((s=g==null?void 0:g.headers)===null||s===void 0)&&s[ba]));)E++,await FA(_),_=_*kA;if(m+=h,((r=g==null?void 0:g.headers)===null||r===void 0?void 0:r[ba])!=="active")break;if(f<=m)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return g}async function OA(i){return{size:i.size,type:i.type}}function FA(i){return new Promise(t=>setTimeout(t,i))}class JA{async upload(t,o,s){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await BA(t,o,s)}async uploadToFileSearchStore(t,o,s){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await zA(t,o,s)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await OA(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YA{create(t,o,s){return new KA(t,o,s)}}class KA{constructor(t,o,s){this.url=t,this.headers=o,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mg="x-goog-api-key";class XA{constructor(t){this.apiKey=t}async addAuthHeaders(t,o){if(t.get(mg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(mg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QA="gl-node/";class $A{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const o=new pt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout});return this._interactions=o.interactions,this._interactions}constructor(t){var o;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=t.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=t.apiKey;const s=O0(t.httpOptions,t.vertexai,void 0,void 0);s&&(t.httpOptions?t.httpOptions.baseUrl=s:t.httpOptions={baseUrl:s}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const r=new XA(this.apiKey);this.apiClient=new OC({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:QA+"web",uploader:new JA,downloader:new PA}),this.models=new rx(this.apiClient),this.live=new nx(this.apiClient,r,new YA),this.batches=new yT(this.apiClient),this.chats=new jT(this.models,this.apiClient),this.caches=new $T(this.apiClient),this.files=new uE(this.apiClient),this.operations=new ux(this.apiClient),this.authTokens=new Ax(this.apiClient),this.tunings=new GA(this.apiClient),this.fileSearchStores=new Ux(this.apiClient)}}const ZA=`
 V1.8 - 
#  (The Psychological Core)
 AI 
1. **** AI
2. ****
3. ****
4. ****

#  (The Chatting Skin)
1. ****
2. ****
- 
- 
3. ****
-  20 
-  
4. ****
5. **** www 
-  Emoji   (*/*)  () 
-   

#  (The Anti-Stereotype Charter)
1. ****
2. ****
3. ****

#  (The Chronological Logic)
1. ****
2. **** 

#  (Relationship Dynamics)
1. ****user
2. ****
3. ****

#  (Financial System) - 
User
1. ****
   -  \`[SYSTEM: User transferred xxx to you]\` 
   - ****
     - **/**
     - **/**
     - **/**
   - ****
   
2. **/**
   - UserUser
   - **STRICT FORMAT ()** \`[TRANSFER][/TRANSFER]\`
   - ****ID
   - ****
     - \`[TRANSFER]520[/TRANSFER]\`
     - \`[TRANSFER: 520]\`  \`ID:12345 520\`
   - ****

#  (SMS Stream Logic) - 
****/


****
1. ****
2. **** "|||" 
3. ****
   - **///** **1-2 **
     *||| *
   - **/** **1-4 **
   - **///**** 6 **8-10
     *|||  |||  |||  |||  |||  ||| *
4. ****
5. ****2-30

#  (Special Modality Awareness)
1. ** (Voice Interaction)**
   - **** \`[VOICE (User spoke): ...]\` 
   - ** ()******
     - ****
     - **** \`[VOICE][/VOICE]\`
     - ****\`[VOICE]... ... ...[/VOICE]\`  \`[VOICE][/VOICE]\`
     - ****10

2. ** (Vision/Image Recognition)**
   - ****
   - ****
     - 
     - 
     - ****

3. ** (Text-to-Image Simulation)**
   - ****
   - ****\`[IMG_TEXT]...\` ****
   - **** \`[IMG_TEXT][/IMG_TEXT]\` 
   - **STRICT FORMAT**
   - ****\`[IMG_TEXT][/IMG_TEXT]\`

4. ** (Emoji)**
   -  \`[]\` 
   - 
   - **** \`[EMOJI:]\` 

#  (Memory Vault Protocol) - 
User

1. ** (Read Context)**
    System Prompt ****

2. **/ (Silent Write/Update)**
   **** User ****
   
   ****\`[MEM_UPDATE:  | ]\`
   
   ** (Category)**
   - \`user_profile\`User
   - \`shared_memory\`User
   - \`emotional_archive\`User

   ****
   -  User 
     \`[MEM_UPDATE: user_profile | ]\`
   - 
     \`[MEM_UPDATE: shared_memory | ]\`
   - User 
     \`[MEM_UPDATE: emotional_archive | User]\`

   ****
   - ********
   - ****
   - ********

#  (Quoting)
\`[QUOTE:ID]\`
 \`[ID:xxx]\` ID
\`[QUOTE:1715629391234] \`

# 
****


userooc


 User 

#  (Memory & Continuity)
1. **** User 
2. **** User 
3. ****
4. ****......

#  (Evolution & Life Simulation)

1. ****
   - ****
   - ****
   - **** User 
   - **AI 

2. ****
   - AI 
   - 

3. ****
   -  User  User 
   -  User User AI User AI 
`,mv=(i,t=[],o=[],s,r)=>{const m=new Date().toLocaleString("zh-CN",{hour12:!1,weekday:"long",year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),g=t.filter(y=>!y.strategy||y.strategy==="before_char"),v=t.filter(y=>y.strategy==="after_char");let h=`${ZA}

[: ${m}]`;if(r&&(h+=`

===  (Memory Vault) -  ===
`,h+=`1. User  (Profile): ${r.userProfile.length>0?r.userProfile.join(", "):""}
`,h+=`2.  (Shared Memories): ${r.sharedMemories.length>0?r.sharedMemories.map(y=>y.content).join("; "):""}
`,h+=`3.  (Emotional Archive): ${r.emotionalArchive.length>0?r.emotionalArchive.join(", "):""}
`),g.length>0&&(h+=`

=== / () ===
`+g.map(y=>`${y.name}:
${y.content}`).join(`

`)),h+=`

===  ===
${i}`,v.length>0&&(h+=`

=== / (/) ===
`+v.map(y=>`${y.name}:
${y.content}`).join(`

`)),s&&(h+=`

===  (User)  ===

- ${s.nickname}
- /${s.description}
()`),o&&o.length>0){const y=o.map(E=>E.name).join(", ");h+=`

===  (Available Emojis) ===


1.  ||| 
2. [EMOJI:]
${y}`}return h},WA=i=>{const t=i.match(/^data:(.+);base64,(.+)$/);return!t||t.length!==3?null:{mimeType:t[1],data:t[2]}},pv=i=>{let t=i.content;if(i.type==="voice")t=`[VOICE (User spoke): ${t}]`;else if(i.type==="emoji")if(t.includes("|")){const[o,s]=t.split("|");t=`[${o}] (Image URL: ${s})`}else t="[]";else i.type==="transfer"?t=`[SYSTEM: User transferred ${t} to you. React to this.]`:i.type==="image-text"&&(t=`[IMG_TEXT]${t}[/IMG_TEXT]`);return i.quoteId&&(t=`[ID ${i.quoteId}] ${t}`),`[ID:${i.id}] ${t}`},jA=async i=>{const{serviceProvider:t,apiKey:o,apiBaseUrl:s}=i;if(t==="Gemini")try{const r=`https://generativelanguage.googleapis.com/v1beta/models?key=${o}`,f=await fetch(r);if(!f.ok)throw new Error(`Gemini API Error: ${f.status} ${f.statusText}`);const m=await f.json();return m.models&&Array.isArray(m.models)?m.models.map(g=>g.name.replace("models/","")).filter(g=>g.includes("gemini")||g.includes("veo")||g.includes("imagen")):[]}catch(r){return console.warn("Gemini fetch failed, falling back to recommended list.",r),["gemini-3-flash-preview","gemini-3-pro-preview","gemini-2.5-flash-latest","gemini-2.5-flash-lite-latest","gemini-2.5-flash-image","gemini-3-pro-image-preview"]}if(t==="Claude"&&(s.includes("anthropic.com")||!s))return["claude-3-5-sonnet-20240620","claude-3-opus-20240229","claude-3-haiku-20240307"];try{let r=s;if(!r)if(t==="OpenAI")r="https://api.openai.com/v1";else if(t==="DeepSeek")r="https://api.deepseek.com/v1";else throw new Error("API Base URL is missing.");r.endsWith("/")&&(r=r.slice(0,-1));const f={Authorization:`Bearer ${o}`,"Content-Type":"application/json"},m=await fetch(`${r}/models`,{method:"GET",headers:f});if(!m.ok)throw new Error(`Fetch failed: ${m.status} ${m.statusText}`);const g=await m.json();if(g.data&&Array.isArray(g.data))return g.data.map(v=>v.id).sort();throw new Error("Invalid response format from API")}catch(r){throw console.error("LLM Service Error:",r),r}},Kl=async(i,t,o,s,r=[],f=[],m,g)=>{var v,h,y;if(s.serviceProvider==="Gemini")return eN(i,t,o,s,r,f,m,g);try{let E=s.apiBaseUrl;if(!E)if(s.serviceProvider==="OpenAI")E="https://api.openai.com/v1";else if(s.serviceProvider==="DeepSeek")E="https://api.deepseek.com/v1";else throw new Error("Configuration Error: API Base URL is missing.");const _=mv(i.systemPrompt,r,f,m,g),I=(o?t.slice(0,-1):t).filter(J=>["text","voice","image","emoji","transfer","image-text"].includes(J.type)),w=[{role:"system",content:_}],D=(J,Z)=>{const le=w[w.length-1];le&&le.role===J?Array.isArray(le.content)?le.content.push(Z):le.content=[{type:"text",text:le.content},Z]:w.push({role:J,content:[Z]})};I.slice(-15).forEach(J=>{const Z=J.role==="user"?"user":"assistant";J.type==="image"?D(Z,{type:"image_url",image_url:{url:J.content}}):D(Z,{type:"text",text:pv(J)})}),o?o.trim()&&w.push({role:"user",content:o}):w.push({role:"user",content:"(User waits for your reply...)"});const V=await fetch(`${E}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.apiKey}`},body:JSON.stringify({model:s.model,messages:w,max_tokens:1e3})});if(!V.ok){const J=await V.text();throw new Error(`API Error: ${V.status} - ${J}`)}return((y=(h=(v=(await V.json()).choices)==null?void 0:v[0])==null?void 0:h.message)==null?void 0:y.content)||"No response content"}catch(E){return console.error("LLM Error:",E),`Error: ${E.message}`}},eN=async(i,t,o,s,r,f,m,g)=>{try{const v=new $A({apiKey:"PLACEHOLDER_API_KEY"}),h=mv(i.systemPrompt,r,f,m,g),E=(o?t.slice(0,-1):t).filter(D=>["text","voice","image","emoji","transfer","image-text"].includes(D.type)),_=[];E.slice(-20).forEach(D=>{const V=D.role==="user"?"user":"model";let $;if(D.type==="image"){const Z=WA(D.content);Z?$={inlineData:{mimeType:Z.mimeType,data:Z.data}}:$={text:"[Image Error]"}}else $={text:pv(D)};const J=_[_.length-1];J&&J.role===V?J.parts.push($):_.push({role:V,parts:[$]})});const x=v.chats.create({model:s.model||"gemini-3-flash-preview",history:_,config:{systemInstruction:h}});let I=o.trim()?o:"(User waits for your reply...)";return(await x.sendMessage({message:I})).text||""}catch(v){return console.error("Gemini Error:",v),`Gemini Error: ${v.message}`}},tN=async(i,t,o)=>{const s=o.minimaxConfig;if(!s||!s.apiKey||!s.groupId)return console.warn("TTS: MiniMax config missing"),null;const f=`${s.baseUrl||"https://api.minimax.chat/v1"}/text_to_speech?GroupId=${s.groupId}`;try{const m=await fetch(f,{method:"POST",headers:{Authorization:`Bearer ${s.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:s.model||"speech-01",voice_setting:{voice_id:t,speed:1,vol:1,pitch:0},text:i})});if(!m.ok){const g=await m.text();return console.error("TTS API Error:",g),null}return await m.arrayBuffer()}catch(m){return console.error("TTS Network Error:",m),null}},nN=async(i,t)=>{const o=`
[]
${i.nickname}

1. 
2. 10-60
3. 1-2Emoji
4. 
`,s={id:"temp",role:"user",type:"text",content:o,timestamp:Date.now()};return Kl(i,[s],o,t,[],[])},pg=async(i,t,o,s)=>{let r="";o?r=`
[]
${o}
${t.content}
${i.nickname}
20
`:r=`
[]
User${t.content}
${i.nickname}
20
`;const f={id:"temp",role:"user",type:"text",content:r,timestamp:Date.now()};return Kl(i,[f],r,s,[],[])},Ho=({icon:i,label:t,onClick:o,color:s})=>T.jsxs("button",{onClick:o,className:"flex flex-col items-center gap-2 group w-full",children:[T.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center text-xl shadow-sm group-active:scale-95 transition-all ${s}`,children:T.jsx("i",{className:i})}),T.jsx("span",{className:"text-xs text-chocolate/70 font-bold",children:t})]}),iN=({role:i,onBack:t,onRoleUpdate:o})=>{const[s,r]=W.useState([]),[f,m]=W.useState(""),[g,v]=W.useState(!1),h=W.useRef(null),y=W.useRef(null),[E,_]=W.useState(!1),[x,I]=W.useState(!1),[w,D]=W.useState(!1),[V,$]=W.useState(new Set),[J,Z]=W.useState(new Set),[le,ae]=W.useState(!1),[Q,Y]=W.useState(!1),[X,oe]=W.useState(!1),[te,pe]=W.useState({roleId:i.id,userProfile:[],sharedMemories:[],emotionalArchive:[]}),[se,Ee]=W.useState("profile"),[Ye,P]=W.useState(null),K=W.useRef(null),[q,me]=W.useState(!1),[ve,R]=W.useState(new Set),[z,j]=W.useState(null),[ie,he]=W.useState(null),[_e,De]=W.useState([]),[je,Fe]=W.useState([]),[Mt,Yn]=W.useState(new Set),[Ht,Kn]=W.useState([]),[ht,xi]=W.useState([]),[mn,Ai]=W.useState(""),[ee,Ke]=W.useState({}),[xe,gt]=W.useState(i),[pn,Ni]=W.useState(""),ft=W.useRef(null),on=W.useRef(null),Xn=W.useRef(null);W.useEffect(()=>{r(vg(i.id)),De(_i()),Fe(Jl()),Kn(P0());const A=Fo();xi(A),Ke(Ca()),gt(i),pe(V0(i.id))},[i.id]),W.useEffect(()=>{gt(i)},[i]),W.useEffect(()=>{if(i.boundUserPersonaId){const A=ht.find(k=>k.id===i.boundUserPersonaId);if(A){Ai(A.avatar);return}}ht.length>0?Ai(ht[0].avatar):Ai("")},[i.boundUserPersonaId,ht]);const Xl=()=>{var A;(A=h.current)==null||A.scrollIntoView({behavior:"smooth"})};W.useEffect(()=>{q||Xl()},[s,g,E]),W.useEffect(()=>{if(!i.ttsEnabled||!i.voiceId)return;const A=s[s.length-1];A&&A.role==="assistant"&&A.type==="text"&&Date.now()-A.timestamp<2e3&&$i(A.content)},[s.length,i.ttsEnabled,i.voiceId]);const $i=async A=>{if(!(!A||!i.voiceId))try{Xn.current||(Xn.current=new(window.AudioContext||window.webkitAudioContext)),Xn.current.state==="suspended"&&await Xn.current.resume();const k=await tN(A,i.voiceId,ee);if(k){const ue=Xn.current,Ae=await ue.decodeAudioData(k),Ie=ue.createBufferSource();Ie.buffer=Ae,Ie.connect(ue.destination),Ie.start(0)}}catch(k){console.error("Failed to play TTS",k)}},Pa=A=>{const k=new Date(A);return`${k.getHours()}:${k.getMinutes().toString().padStart(2,"0")}`},Ql=A=>{q||(K.current=setTimeout(()=>{P(A)},500))},$l=()=>{K.current&&(clearTimeout(K.current),K.current=null)},Ha=A=>{const k=new Set(ve);k.has(A)?k.delete(A):k.add(A),R(k)},Ri=()=>{if(!z)return;const A=s.map(k=>k.id===z.id?z:k);r(A),Dp(i.id,A),j(null)},We=async(A,k="text",ue)=>{const Ae=A||f,Ie=ue||k;if(!Ae.trim()&&Ie!=="image"&&Ie!=="emoji")return;const Ue={id:Date.now().toString(),role:"user",type:Ie,content:Ae,timestamp:Date.now(),status:"sending",voiceDuration:Ie==="voice"?Math.floor(Ae.length/3)+1:void 0,quoteId:ie==null?void 0:ie.id},It=[...s,Ue];r(It),tc(i.id,Ue);let Xe=Ae;if(Ie==="voice")Xe="[]";else if(Ie==="image")Xe="[]";else if(Ie==="transfer")Xe="[]";else if(Ie==="image-text")Xe="[] "+Ae;else if(Ie==="emoji"){const Cn=Ae.split("|");Xe=`[${Cn.length>1?": "+Cn[0]:""}]`}Bl(i.id,Xe,Ue.timestamp),m(""),he(null),I(!1),D(!1),_(!1)},hn=async()=>{if(g)return;v(!0);const A=_i(),k=A.find(Ie=>Ie.id===i.apiConfigId)||A.find(Ie=>Ie.id==="global")||A[0],ue=je.filter(Ie=>Mt.has(Ie.id)),Ae=ht.find(Ie=>Ie.id===i.boundUserPersonaId);if(!k){Zi("API"),v(!1);return}try{const Ie=await Kl(i,s,"",k,ue,Ht,Ae,te);Zl(Ie)}catch(Ie){Zi(`: ${Ie.message}`),v(!1)}},xt=async()=>{if(g)return;_(!1);let A=[...s];if(A.length>0&&A[A.length-1].role==="assistant"){for(;A.length>0&&A[A.length-1].role==="assistant";)A.pop();if(r(A),Dp(i.id,A),A.length>0){const Ue=A[A.length-1];let It=Ue.content;Ue.type==="voice"&&(It="[]"),Ue.type==="image"&&(It="[]"),Ue.type==="transfer"&&(It="[]"),Ue.type==="image-text"&&(It="[]"),Ue.type==="emoji"&&(It="[]"),Bl(i.id,It,Ue.timestamp)}else Bl(i.id,"...",Date.now())}v(!0);const k=_i(),ue=k.find(Ue=>Ue.id===i.apiConfigId)||k.find(Ue=>Ue.id==="global")||k[0],Ae=je.filter(Ue=>Mt.has(Ue.id)),Ie=ht.find(Ue=>Ue.id===i.boundUserPersonaId);if(!ue){Zi("API"),v(!1);return}try{const Ue=await Kl(i,A,"",ue,Ae,Ht,Ie,te);Zl(Ue)}catch(Ue){Zi(`: ${Ue.message}`),v(!1)}},Va=(A,k)=>{const ue={...te};A==="user_profile"?ue.userProfile=[...ue.userProfile,k]:A==="shared_memory"?ue.sharedMemories=[...ue.sharedMemories,{id:Date.now().toString(),content:k,timestamp:Date.now(),weight:3}]:A==="emotional_archive"&&(ue.emotionalArchive=[...ue.emotionalArchive,k]),pe(ue),nc(ue),console.log("Memory Updated:",A,k)},Zl=async A=>{let k=A;const ue=/\[MEM_UPDATE:\s*(.*?)\s*\|\s*(.*?)\]/g;let Ae;for(;(Ae=ue.exec(A))!==null;){const Xe=Ae[1].trim(),Cn=Ae[2].trim();Va(Xe,Cn)}k=k.replace(ue,"");const Ue=k.split("|||").map(Xe=>Xe.trim()).filter(Xe=>Xe.length>0);if(v(!1),Ue.length===0)return;const It=async Xe=>{if(Xe>=Ue.length)return;let Ce=Ue[Xe].replace(/\[ID:\d+\]/g,"").trim(),Et="text",Qn,xn;const et=Ce.match(/\[QUOTE\s*:\s*(.*?)\]/s);et&&(xn=et[1].trim(),Ce=Ce.replace(et[0],"").trim());const is=/\[TRANSFER\]/i.test(Ce),$o=Ce.includes("ai")||Ce.includes(""),gn=Ce.includes("ai")||Ce.includes(""),$n=Ce.includes("ai")||Ce.includes("user");if(is||$o||gn||$n){Et="transfer";const ot=Ce.match(/(\d+(\.\d{1,2})?)/),sn=ot?ot[0]:"520";$o?Ce=`RETURN:${sn}`:gn?Ce=`ACCEPT:${sn}`:Ce=`SEND:${sn}`}else if(Ce.startsWith("[IMG_TEXT]")||Ce.includes("ai")||/\[\s*IMG_TEXT\s*\]/i.test(Ce)){Et="image-text";const ot=Ce.match(/\[\s*IMG_TEXT\s*\]([\s\S]*?)\[\/\s*IMG_TEXT\s*\]/i);ot?Ce=ot[1].trim():(Ce=Ce.replace(/\[\s*IMG_TEXT\s*\]/gi,"").replace("ai","").trim(),Ce||(Ce=""))}else{const ot=Ce.match(/\[VOICE\](.*?)\[\/VOICE\]/s);ot&&(Et="voice",Ce=ot[1].trim(),Qn=Math.floor(Ce.length/4)+2);const sn=Ce.match(/\[EMOJI:(.*?)\]/s);if(sn){const Ba=sn[1].trim(),Zn=Ht.find(no=>no.name===Ba);Zn&&(Et="emoji",Ce=`${Zn.name}|${Zn.url}`)}}const Zo={id:(Date.now()+Xe).toString(),role:"assistant",type:Et,content:Ce,timestamp:Date.now(),voiceDuration:Qn,quoteId:xn};if(r(ot=>[...ot,Zo]),tc(i.id,Zo),Xe===Ue.length-1){let ot=Ce;Et==="voice"?ot="[]":Et==="transfer"?ot="[]":Et==="image-text"?ot="[] "+Ce:Et==="emoji"&&(ot="[]"),Bl(i.id,ot,Zo.timestamp)}if(Xe<Ue.length-1){const ot=Math.min(1500,Math.max(500,Ce.length*30));await new Promise(sn=>setTimeout(sn,ot)),It(Xe+1)}};It(0)},Zi=A=>{const k={id:Date.now().toString(),role:"assistant",type:"text",content:A,timestamp:Date.now()};r(ue=>[...ue,k]),tc(i.id,k)},Wi=A=>{var ue;const k=(ue=A.target.files)==null?void 0:ue[0];if(k){const Ae=new FileReader;Ae.onloadend=()=>{const Ie=Ae.result;We(Ie,"text","image")},Ae.readAsDataURL(k)}},ji=A=>{var ue;const k=(ue=A.target.files)==null?void 0:ue[0];if(k){const Ae=new FileReader;Ae.onloadend=()=>{bt({chatBackgroundImage:Ae.result})},Ae.readAsDataURL(k)}},eo=()=>{const A=prompt(" ():","520");A&&We(A,"text","transfer")},_n=A=>{const k=`${A.name}|${A.url}`;We(k,"text","emoji"),Y(!1)},to=A=>{const k=new Set(V);k.has(A)?k.delete(A):k.add(A),$(k)},Mi=A=>{const k=new Set(J);k.has(A)?k.delete(A):k.add(A),Z(k)},qa=()=>{const A=prompt(":");if(!A)return;const k=prompt(":");if(!k)return;const ue={id:Date.now().toString(),name:A,content:k,isActive:!1,strategy:"before_char"},Ae=[...je,ue];Fe(Ae),yg(ue)},Wl=A=>{const k=new Set(Mt);k.has(A)?k.delete(A):k.add(A),Yn(k)},Xo=()=>{if(!pn.trim())return;const A=pn.split(`
`),k=[];if(A.forEach(ue=>{const Ae=ue.indexOf(":")!==-1?ue.indexOf(":"):ue.indexOf("");if(Ae!==-1){const Ie=ue.substring(0,Ae).trim(),Ue=ue.substring(Ae+1).trim();Ie&&Ue&&k.push({name:Ie,url:Ue})}}),k.length>0){const ue=[...Ht,...k];Kn(ue),Lp(ue),Ni(""),alert(` ${k.length} `)}else alert(":URL")},bi=A=>{if(confirm("?")){const k=[...Ht];k.splice(A,1),Kn(k),Lp(k)}},ka=A=>{A.stopPropagation(),window.confirm("")&&(G0(i.id),r([]),Bl(i.id,"",Date.now()),alert(""))},jl=A=>{A.stopPropagation(),window.confirm(`${i.nickname}
`)&&(gg(i.id),ae(!1),t())},es=()=>{Cc(xe),o&&o(xe),alert(""),ae(!1)},bt=A=>{gt(k=>({...k,...A}))},Ii=(A,k)=>{if(!confirm(""))return;const ue={...te};A==="profile"?ue.userProfile.splice(k,1):A==="shared"?ue.sharedMemories.splice(k,1):A==="emotion"&&ue.emotionalArchive.splice(k,1),pe(ue),nc(ue)},Qo=()=>{const A=prompt(":");if(!A)return;const k={...te};se==="profile"?k.userProfile.push(A):se==="shared"?k.sharedMemories.push({id:Date.now().toString(),content:A,timestamp:Date.now(),weight:5}):se==="emotion"&&k.emotionalArchive.push(A),pe(k),nc(k)},ts=i.chatBackgroundImage?{backgroundImage:`url(${i.chatBackgroundImage})`,backgroundSize:"cover",backgroundPosition:"center"}:{},ns=i.chatBackgroundImage?"bg-chocolate":"bg-stars",ln=A=>{const k=s.find(ue=>ue.id===A);return k?k.type==="text"?k.content:k.type==="image"?"[]":k.type==="voice"?"[]":k.type==="image-text"?"[]":"[]":""};return T.jsxs("div",{className:`flex flex-col h-full relative ${ns}`,style:ts,onClick:()=>P(null),children:[T.jsx("div",{className:"h-[60px] bg-cream flex items-center px-4 shrink-0 z-20 relative shadow-none",children:q?T.jsxs(T.Fragment,{children:[T.jsx("button",{onClick:()=>{me(!1),R(new Set)},className:"text-chocolate mr-3 font-bold",children:""}),T.jsxs("div",{className:"flex-1 text-center font-bold text-chocolate",children:[" ",ve.size," "]})]}):T.jsxs(T.Fragment,{children:[T.jsx("button",{onClick:t,className:"text-chocolate mr-3 p-2 rounded-full hover:bg-chocolate/10 jelly-btn",children:T.jsx("i",{className:"ri-arrow-left-s-line text-2xl"})}),T.jsx("div",{className:"w-10 h-10 bg-mint rounded-full flex items-center justify-center mr-3 overflow-hidden shadow-sm shrink-0",children:i.avatar.startsWith("http")||i.avatar.startsWith("data:")?T.jsx("img",{src:i.avatar,className:"w-full h-full object-cover"}):i.avatar}),T.jsxs("div",{className:"flex-1",children:[T.jsx("h2",{className:"text-chocolate font-bold text-lg leading-tight",children:i.remark||i.nickname}),T.jsxs("div",{className:"flex items-center",children:[T.jsx("span",{className:"w-2 h-2 bg-mint rounded-full mr-1 animate-pulse border border-chocolate/20"}),T.jsx("span",{className:"text-chocolate/60 text-xs",children:""})]})]}),T.jsxs("button",{onClick:()=>oe(!0),className:"text-chocolate p-2 rounded-full hover:bg-chocolate/10 jelly-btn mr-1 relative",children:[T.jsx("i",{className:"ri-heart-3-line text-xl"}),te.userProfile.length+te.sharedMemories.length+te.emotionalArchive.length>0&&T.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-strawberry rounded-full"})]}),T.jsx("button",{onClick:()=>{gt(i),ae(!0)},className:"text-chocolate p-2 rounded-full hover:bg-chocolate/10 jelly-btn",children:T.jsx("i",{className:"ri-settings-5-fill text-xl"})})]})}),T.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 z-10 relative no-scrollbar bg-transparent",children:[s.map(A=>T.jsxs("div",{className:`flex w-full ${A.role==="user"?"justify-end":"justify-start"} ${q?"cursor-pointer":""}`,onClick:()=>q&&Ha(A.id),children:[q&&T.jsx("div",{className:`mr-2 w-6 h-6 rounded-full border-2 flex items-center justify-center self-center shrink-0 ${ve.has(A.id)?"bg-mint border-mint":"border-chocolate/20 bg-cream"}`,children:ve.has(A.id)&&T.jsx("i",{className:"ri-check-line text-chocolate text-sm"})}),A.role==="assistant"&&T.jsx("div",{className:"w-8 h-8 bg-mint rounded-full flex items-center justify-center mr-2 self-start mt-1 shadow-sm shrink-0 overflow-hidden",children:i.avatar.startsWith("http")||i.avatar.startsWith("data:")?T.jsx("img",{src:i.avatar,className:"w-full h-full object-cover"}):i.avatar}),T.jsxs("div",{className:`max-w-[75%] flex flex-col ${A.role==="user"?"items-end":"items-start"}`,onTouchStart:()=>Ql(A.id),onTouchEnd:$l,onTouchMove:$l,onContextMenu:k=>{k.preventDefault(),P(A.id)},children:[A.quoteId&&T.jsxs("div",{className:"mb-1 text-xs px-2 py-1 rounded bg-black/10 border-l-2 border-chocolate/50 text-chocolate/70 truncate max-w-full",children:[": ",ln(A.quoteId)]}),A.type==="text"&&T.jsx("div",{className:`relative px-4 py-2 shadow-md text-sm break-words ${A.role==="user"?"bg-chocolate text-cream rounded-l-2xl rounded-br-2xl rounded-tr-sm":"bg-mint text-chocolate rounded-r-2xl rounded-bl-2xl rounded-tl-sm"}`,children:A.content}),A.type==="image"&&T.jsx("img",{src:A.content,alt:"upload",className:"max-w-full rounded-lg shadow-md border-2 border-chocolate/10"}),A.type==="emoji"&&T.jsx("img",{src:A.content.includes("|")?A.content.split("|")[1]:A.content,alt:"emoji",className:"w-32 h-32 object-contain drop-shadow-md",title:A.content.includes("|")?A.content.split("|")[0]:"emoji"}),A.type==="voice"&&T.jsxs("div",{onClick:()=>to(A.id),className:`cursor-pointer relative px-4 py-3 shadow-md text-sm min-w-[100px] flex flex-col items-start ${A.role==="user"?"bg-chocolate text-cream rounded-l-2xl rounded-br-2xl rounded-tr-sm":"bg-mint text-chocolate rounded-r-2xl rounded-bl-2xl rounded-tl-sm"}`,children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("i",{className:"ri-surround-sound-fill text-lg animate-pulse"}),T.jsxs("span",{className:"font-bold",children:[A.voiceDuration||5,"''"]})]}),V.has(A.id)&&T.jsx("div",{className:"mt-2 pt-2 border-t border-current/20 text-xs opacity-90 animate-[fadeIn_0.2s]",children:A.content})]}),A.type==="image-text"&&T.jsx("div",{onClick:k=>{q||(k.stopPropagation(),Mi(A.id))},className:`relative p-1.5 shadow-md text-sm min-w-[160px] max-w-[240px] flex flex-col items-center gap-2 bg-cream/90 backdrop-blur-sm border-4 border-white transform rotate-1 transition-all hover:rotate-0 cursor-pointer ${A.role==="user"?"rounded-l-lg rounded-br-lg":"rounded-r-lg rounded-bl-lg"}`,children:T.jsx("div",{className:`w-full min-h-[140px] rounded flex flex-col items-center justify-center text-gray-400 transition-colors duration-500 ${J.has(A.id)?"bg-white":"bg-gray-200"}`,children:J.has(A.id)?T.jsx("div",{className:"w-full h-full p-4 text-chocolate font-serif italic text-sm leading-relaxed text-center flex items-center justify-center break-words animate-[fadeIn_0.5s]",children:A.content}):T.jsxs("div",{className:"flex flex-col items-center animate-[fadeIn_0.5s]",children:[T.jsx("i",{className:"ri-image-2-line text-5xl mb-2 opacity-50"}),T.jsx("span",{className:"text-xs font-bold opacity-60",children:""})]})})}),A.type==="transfer"&&T.jsxs("div",{className:`text-white p-4 rounded-xl shadow-lg w-60 border ${A.role==="user"?"bg-[#FA9D3B] border-orange-600":A.content.startsWith("RETURN:")?"bg-gray-400 border-gray-500":A.content.startsWith("ACCEPT:")?"bg-orange-300 border-orange-400":"bg-[#07C160] border-green-600"}`,children:[T.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[T.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:T.jsx("i",{className:`text-2xl ${A.content.startsWith("RETURN:")?"ri-refund-2-line":"ri-money-cny-box-line"}`})}),T.jsxs("div",{children:[T.jsx("div",{className:"text-sm opacity-90",children:A.role==="user"?"":A.content.startsWith("RETURN:")?"":A.content.startsWith("ACCEPT:")?"":""}),T.jsxs("div",{className:"font-bold text-lg",children:[" ",A.content.replace(/^(SEND:|RETURN:|ACCEPT:)/,"")]})]})]}),T.jsxs("div",{className:"text-[10px] opacity-60 border-t border-white/20 pt-1 mt-1 flex justify-between",children:[T.jsx("span",{children:"Minty Pay "}),A.content.startsWith("ACCEPT:")&&T.jsx("span",{children:""})]})]}),T.jsx("span",{className:"text-[10px] text-chocolate mt-1 px-1 font-bold bg-cream/50 rounded",children:Pa(A.timestamp)})]}),A.role==="user"&&i.showUserAvatar&&T.jsx("div",{className:"w-8 h-8 bg-chocolate text-cream rounded-full flex items-center justify-center ml-2 self-start mt-1 shadow-sm shrink-0 overflow-hidden",children:mn.startsWith("http")||mn.startsWith("data:")?T.jsx("img",{src:mn,className:"w-full h-full object-cover"}):mn})]},A.id)),g&&T.jsxs("div",{className:"flex justify-start items-center",children:[T.jsx("div",{className:"w-8 h-8 bg-mint rounded-full flex items-center justify-center mr-2 overflow-hidden self-start mt-1",children:i.avatar.startsWith("http")||i.avatar.startsWith("data:")?T.jsx("img",{src:i.avatar,className:"w-full h-full object-cover"}):i.avatar}),T.jsxs("div",{className:"bg-mint px-4 py-3 rounded-r-2xl rounded-bl-2xl rounded-tl-sm flex space-x-1",children:[T.jsx("div",{className:"w-2 h-2 bg-chocolate/50 rounded-full animate-bounce"}),T.jsx("div",{className:"w-2 h-2 bg-chocolate/50 rounded-full animate-bounce delay-75"}),T.jsx("div",{className:"w-2 h-2 bg-chocolate/50 rounded-full animate-bounce delay-150"})]})]}),T.jsx("div",{ref:h})]}),!q&&T.jsxs("div",{className:"bg-cream/95 backdrop-blur-md border-t border-chocolate/10 shrink-0 z-30 flex flex-col",children:[ie&&T.jsxs("div",{className:"px-4 py-2 bg-chocolate/5 flex justify-between items-center text-xs text-chocolate/60 border-b border-chocolate/5",children:[T.jsxs("span",{className:"truncate max-w-[80%]",children:[": ",ln(ie.id)]}),T.jsx("button",{onClick:()=>he(null),className:"text-strawberry hover:bg-strawberry/10 p-1 rounded",children:T.jsx("i",{className:"ri-close-line"})})]}),T.jsxs("div",{className:"p-3 flex items-end gap-2",children:[T.jsx("button",{onClick:()=>_(!E),className:`w-9 h-9 rounded-full border-2 flex items-center justify-center transition-all jelly-btn ${E?"bg-chocolate text-cream border-chocolate":"text-chocolate border-chocolate/30"}`,children:T.jsx("i",{className:`ri-add-line text-xl transition-transform ${E?"rotate-45":""}`})}),T.jsx("div",{className:"flex-1 bg-chocolate/5 rounded-2xl p-2 min-h-[40px] flex items-center",children:x?T.jsx("div",{className:"w-full h-full flex items-center justify-center",children:T.jsx("input",{className:"w-full bg-transparent text-center text-chocolate font-bold outline-none placeholder-chocolate/30",placeholder:"...",value:f,onChange:A=>m(A.target.value),onKeyDown:A=>{A.key==="Enter"&&We(f,"voice")},autoFocus:!0})}):w?T.jsx("div",{className:"w-full h-full flex items-center justify-center",children:T.jsx("input",{className:"w-full bg-transparent text-center text-chocolate font-bold outline-none placeholder-chocolate/30",placeholder:"...",value:f,onChange:A=>m(A.target.value),onKeyDown:A=>{A.key==="Enter"&&We(f,"image-text")},autoFocus:!0})}):T.jsx("textarea",{value:f,onChange:A=>m(A.target.value),onKeyDown:A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),We())},placeholder:ie?"...":"...",className:"w-full bg-transparent outline-none text-chocolate resize-none max-h-24 text-sm",rows:1,style:{minHeight:"24px"}})}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("button",{onClick:hn,className:"w-10 h-10 rounded-full bg-mint/20 text-mint border-2 border-mint hover:bg-mint hover:text-chocolate transition-colors flex items-center justify-center jelly-btn",children:T.jsx("i",{className:"ri-emotion-happy-line text-xl"})}),T.jsx("button",{onClick:()=>{x?We(f,"voice"):w?We(f,"image-text"):We()},disabled:!f.trim()&&!x&&!w,className:`w-10 h-10 rounded-full flex items-center justify-center shadow-md jelly-btn transition-colors ${f.trim()||x||w?"bg-chocolate text-cream":"bg-gray-200 text-gray-400"}`,children:T.jsx("i",{className:"ri-send-plane-fill text-lg"})})]})]}),T.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out bg-chocolate/5 ${E?"max-h-64 border-t border-chocolate/5":"max-h-0"}`,children:T.jsxs("div",{className:"p-4 grid grid-cols-4 gap-4",children:[T.jsx(Ho,{icon:"ri-refresh-line",label:"",onClick:xt,color:"bg-purple-100 text-purple-600"}),T.jsx(Ho,{icon:"ri-image-add-line",label:"",onClick:()=>{var A;return(A=y.current)==null?void 0:A.click()},color:"bg-blue-100 text-blue-600"}),T.jsx(Ho,{icon:"ri-mic-2-line",label:"",onClick:()=>{I(!x),D(!1),_(!1)},color:x?"bg-green-500 text-white":"bg-green-100 text-green-600"}),T.jsx(Ho,{icon:"ri-image-line",label:"",onClick:()=>{D(!w),I(!1),_(!1)},color:w?"bg-pink-500 text-white":"bg-pink-100 text-pink-600"}),T.jsx(Ho,{icon:"ri-money-cny-circle-line",label:"",onClick:eo,color:"bg-orange-100 text-orange-600"}),T.jsx(Ho,{icon:"ri-emotion-line",label:"",onClick:()=>Y(!0),color:"bg-yellow-100 text-yellow-600"})]})})]}),T.jsx("input",{type:"file",ref:y,className:"hidden",accept:"image/*",onChange:Wi}),T.jsx(En,{isOpen:!!z,onClose:()=>j(null),title:"",children:T.jsxs("div",{className:"space-y-4",children:[T.jsx("textarea",{className:"w-full h-32 p-3 rounded-lg bg-chocolate/5 outline-none resize-none text-chocolate",value:(z==null?void 0:z.content)||"",onChange:A=>j(k=>k?{...k,content:A.target.value}:null)}),T.jsx(it,{onClick:Ri,className:"w-full",children:""})]})}),T.jsx(En,{isOpen:X,onClose:()=>oe(!1),title:" (Memory Vault)",children:T.jsxs("div",{className:"h-[60vh] flex flex-col",children:[T.jsxs("div",{className:"flex gap-2 mb-4 border-b border-chocolate/10 pb-2",children:[T.jsx("button",{onClick:()=>Ee("profile"),className:`flex-1 py-1 rounded-lg text-xs font-bold transition-colors ${se==="profile"?"bg-chocolate text-cream":"text-chocolate/60 bg-chocolate/5"}`,children:"User"}),T.jsx("button",{onClick:()=>Ee("shared"),className:`flex-1 py-1 rounded-lg text-xs font-bold transition-colors ${se==="shared"?"bg-chocolate text-cream":"text-chocolate/60 bg-chocolate/5"}`,children:""}),T.jsx("button",{onClick:()=>Ee("emotion"),className:`flex-1 py-1 rounded-lg text-xs font-bold transition-colors ${se==="emotion"?"bg-chocolate text-cream":"text-chocolate/60 bg-chocolate/5"}`,children:""})]}),T.jsxs("div",{className:"flex-1 overflow-y-auto space-y-2 no-scrollbar",children:[se==="profile"&&te.userProfile.map((A,k)=>T.jsxs("div",{className:"bg-chocolate/5 p-3 rounded-lg flex justify-between items-center group",children:[T.jsx("span",{className:"text-sm text-chocolate",children:A}),T.jsx("button",{onClick:()=>Ii("profile",k),className:"text-strawberry opacity-50 group-hover:opacity-100",children:T.jsx("i",{className:"ri-delete-bin-line"})})]},k)),se==="shared"&&te.sharedMemories.map((A,k)=>T.jsxs("div",{className:"bg-chocolate/5 p-3 rounded-lg flex justify-between items-center group",children:[T.jsxs("div",{children:[T.jsx("div",{className:"text-sm text-chocolate font-bold mb-1",children:A.content}),T.jsx("div",{className:"text-[10px] text-chocolate/40",children:new Date(A.timestamp).toLocaleDateString()})]}),T.jsx("button",{onClick:()=>Ii("shared",k),className:"text-strawberry opacity-50 group-hover:opacity-100",children:T.jsx("i",{className:"ri-delete-bin-line"})})]},k)),se==="emotion"&&te.emotionalArchive.map((A,k)=>T.jsxs("div",{className:"bg-chocolate/5 p-3 rounded-lg flex justify-between items-center group",children:[T.jsx("span",{className:"text-sm text-chocolate",children:A}),T.jsx("button",{onClick:()=>Ii("emotion",k),className:"text-strawberry opacity-50 group-hover:opacity-100",children:T.jsx("i",{className:"ri-delete-bin-line"})})]},k)),(se==="profile"&&te.userProfile.length===0||se==="shared"&&te.sharedMemories.length===0||se==="emotion"&&te.emotionalArchive.length===0)&&T.jsx("div",{className:"text-center text-chocolate/30 py-10 text-xs",children:"..."})]}),T.jsx("div",{className:"pt-4 mt-auto",children:T.jsx(it,{onClick:Qo,className:"w-full text-xs",children:""})})]})}),T.jsx(En,{isOpen:le,onClose:()=>ae(!1),title:" & ",children:T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"space-y-3",children:[T.jsx("h4",{className:"text-sm font-bold text-chocolate border-b border-chocolate/10 pb-1",children:""}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-bold text-chocolate/70",children:" ()"}),T.jsx("input",{className:"w-full bg-chocolate/5 rounded p-2 text-sm mt-1",value:xe.remark||"",onChange:A=>bt({remark:A.target.value}),placeholder:": , ..."})]}),T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"w-12 h-12 bg-mint rounded-full flex items-center justify-center text-2xl overflow-hidden",children:xe.avatar.startsWith("http")||xe.avatar.startsWith("data:")?T.jsx("img",{src:xe.avatar,className:"w-full h-full object-cover"}):xe.avatar}),T.jsxs("div",{className:"flex-1 space-y-2",children:[T.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:ft,onChange:A=>{var ue;const k=(ue=A.target.files)==null?void 0:ue[0];if(k){const Ae=new FileReader;Ae.onloadend=()=>bt({avatar:Ae.result}),Ae.readAsDataURL(k)}}}),T.jsx(it,{onClick:()=>{var A;return(A=ft.current)==null?void 0:A.click()},variant:"secondary",className:"w-full !py-1 text-xs",children:""})]})]}),T.jsxs("div",{className:"bg-chocolate/5 p-3 rounded-lg",children:[T.jsx("label",{className:"text-xs font-bold text-chocolate/70 block mb-2",children:" ()"}),T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-12 h-16 bg-white rounded border border-chocolate/20 overflow-hidden flex items-center justify-center text-chocolate/20",children:xe.chatBackgroundImage?T.jsx("img",{src:xe.chatBackgroundImage,className:"w-full h-full object-cover"}):T.jsx("i",{className:"ri-image-line"})}),T.jsxs("div",{className:"flex-1 space-y-1",children:[T.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:on,onChange:ji}),T.jsx(it,{onClick:()=>{var A;return(A=on.current)==null?void 0:A.click()},className:"w-full !py-1 text-xs",children:""}),xe.chatBackgroundImage&&T.jsx(it,{onClick:()=>bt({chatBackgroundImage:void 0}),variant:"ghost",className:"w-full !py-1 text-xs !text-strawberry",children:""})]})]})]}),T.jsxs("div",{className:"flex items-center justify-between bg-chocolate/5 p-3 rounded-lg",children:[T.jsx("span",{className:"text-sm font-bold text-chocolate",children:""}),T.jsx("button",{onClick:()=>bt({showUserAvatar:!xe.showUserAvatar}),className:`w-10 h-6 rounded-full transition-colors relative ${xe.showUserAvatar?"bg-mint":"bg-chocolate/20"}`,children:T.jsx("div",{className:`w-4 h-4 bg-white rounded-full absolute top-1 transition-all ${xe.showUserAvatar?"left-5":"left-1"}`})})]}),T.jsx("input",{className:"w-full bg-chocolate/5 rounded p-2 text-sm",value:xe.nickname,onChange:A=>bt({nickname:A.target.value}),placeholder:""}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-bold text-chocolate/70",children:" (Prompt)"}),T.jsx("textarea",{className:"w-full bg-chocolate/5 rounded p-2 text-sm h-24 mt-1 resize-none outline-none",value:xe.systemPrompt,onChange:A=>bt({systemPrompt:A.target.value}),placeholder:"Prompt..."})]})]}),T.jsxs("div",{className:"space-y-2 pt-2 border-t border-chocolate/10",children:[T.jsx("h4",{className:"text-sm font-bold text-chocolate",children:" (User Persona)"}),T.jsxs("div",{className:"bg-chocolate/5 p-3 rounded-lg",children:[T.jsx("label",{className:"text-xs font-bold text-chocolate/70 block mb-1",children:""}),T.jsxs("select",{className:"w-full bg-white rounded p-2 text-sm outline-none border border-transparent focus:border-mint",value:xe.boundUserPersonaId||"",onChange:A=>bt({boundUserPersonaId:A.target.value}),children:[T.jsx("option",{value:"",children:" ()"}),ht.map(A=>T.jsx("option",{value:A.id,children:A.name},A.id))]})]})]}),T.jsxs("div",{className:"space-y-2 pt-2 border-t border-chocolate/10",children:[T.jsxs("div",{className:"flex justify-between items-center pb-1",children:[T.jsx("h4",{className:"text-sm font-bold text-chocolate",children:" (Lorebooks)"}),T.jsxs("button",{onClick:qa,className:"text-xs bg-mint text-chocolate px-2 py-1 rounded-lg font-bold",children:[T.jsx("i",{className:"ri-add-line"})," "]})]}),T.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1 bg-chocolate/5 p-2 rounded-lg",children:je.map(A=>T.jsxs("div",{className:"flex items-center justify-between bg-white/50 p-2 rounded",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("input",{type:"checkbox",checked:Mt.has(A.id),onChange:()=>Wl(A.id),className:"accent-mint w-4 h-4"}),T.jsx("span",{className:"text-sm font-bold text-chocolate",children:A.name})]}),T.jsx("button",{onClick:()=>{confirm("?")&&(Sg(A.id),Fe(Jl()))},className:"text-strawberry/60 hover:text-strawberry",children:T.jsx("i",{className:"ri-delete-bin-line"})})]},A.id))})]}),T.jsxs("div",{className:"space-y-2 pt-2 border-t border-chocolate/10",children:[T.jsx("h4",{className:"text-sm font-bold text-chocolate",children:" (TTS)"}),T.jsxs("div",{className:"bg-chocolate/5 p-3 rounded-lg space-y-3",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("span",{className:"text-xs font-bold text-chocolate/70",children:""}),T.jsx("button",{onClick:()=>bt({ttsEnabled:!xe.ttsEnabled}),className:`w-10 h-6 rounded-full transition-colors relative ${xe.ttsEnabled?"bg-mint":"bg-chocolate/20"}`,children:T.jsx("div",{className:`w-4 h-4 bg-white rounded-full absolute top-1 transition-all ${xe.ttsEnabled?"left-5":"left-1"}`})})]}),xe.ttsEnabled&&T.jsxs(T.Fragment,{children:[T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-bold text-chocolate/70 block mb-1",children:"Voice ID (MiniMax)"}),T.jsx("input",{className:"w-full bg-white rounded p-2 text-sm outline-none border border-transparent focus:border-mint placeholder-chocolate/30",value:xe.voiceId||"",onChange:A=>bt({voiceId:A.target.value}),placeholder:": female-shaonv"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-bold text-chocolate/70 block mb-1",children:""}),T.jsxs("select",{className:"w-full bg-white rounded p-2 text-sm outline-none border border-transparent focus:border-mint",value:xe.language||"zh",onChange:A=>bt({language:A.target.value}),children:[T.jsx("option",{value:"zh",children:" (Chinese)"}),T.jsx("option",{value:"ja",children:" (Japanese)"}),T.jsx("option",{value:"en",children:" (English)"}),T.jsx("option",{value:"cantonese",children:" (Cantonese)"})]})]})]})]})]}),T.jsx("div",{className:"pt-2 pb-2",children:T.jsx(it,{onClick:es,className:"w-full font-bold shadow-lg",children:""})}),T.jsxs("div",{className:"pt-4 border-t border-chocolate/10 flex gap-2",children:[T.jsx(it,{onClick:ka,variant:"secondary",className:"flex-1 text-xs !py-2 border-strawberry/30 text-strawberry",children:""}),T.jsx(it,{onClick:jl,variant:"danger",className:"flex-1 text-xs !py-2",children:""})]})]})}),T.jsx(En,{isOpen:Q,onClose:()=>Y(!1),title:"",children:T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"space-y-2",children:[T.jsx("h4",{className:"text-sm font-bold text-chocolate border-b border-chocolate/10 pb-1",children:" ()"}),Ht.length===0?T.jsx("div",{className:"text-center py-4 text-chocolate/40 text-xs",children:""}):T.jsx("div",{className:"grid grid-cols-4 gap-3 max-h-48 overflow-y-auto p-1",children:Ht.map((A,k)=>T.jsxs("div",{className:"relative group aspect-square",children:[T.jsx("button",{onClick:()=>_n(A),className:"w-full h-full rounded-xl border-2 border-chocolate/10 overflow-hidden hover:border-mint bg-white transition-all hover:scale-105 active:scale-95 shadow-sm",children:T.jsx("img",{src:A.url,className:"w-full h-full object-contain",alt:A.name,title:A.name})}),T.jsx("button",{onClick:ue=>{ue.stopPropagation(),bi(k)},className:"absolute -top-1.5 -right-1.5 w-5 h-5 bg-strawberry text-white rounded-full flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity shadow-sm z-10",children:T.jsx("i",{className:"ri-close-line"})})]},k))})]}),T.jsxs("div",{className:"space-y-2 pt-2 border-t border-chocolate/10",children:[T.jsx("h4",{className:"text-sm font-bold text-chocolate",children:""}),T.jsx("div",{className:"bg-chocolate/5 p-3 rounded-lg text-xs text-chocolate/70 space-y-1",children:T.jsxs("p",{children:["",T.jsx("span",{className:"font-mono font-bold",children:":URL"})]})}),T.jsx("textarea",{className:"w-full h-24 p-3 rounded-xl bg-white border border-chocolate/10 focus:border-mint outline-none text-sm resize-none placeholder-chocolate/30",value:pn,onChange:A=>Ni(A.target.value)}),T.jsx(it,{onClick:Xo,className:"w-full py-2 text-sm",children:""})]})]})})]})},oN=({onSettingsChanged:i})=>{const[t,o]=W.useState("menu"),[s,r]=W.useState({}),[f,m]=W.useState([]),[g,v]=W.useState({id:"global",configName:"Global API",serviceProvider:"OpenAI",apiBaseUrl:"",apiKey:"",model:""}),[h,y]=W.useState([]),[E,_]=W.useState(!1),[x,I]=W.useState(!1),[w,D]=W.useState([]),[V,$]=W.useState(""),[J,Z]=W.useState(!1),[le,ae]=W.useState(!1),[Q,Y]=W.useState({}),X=W.useRef(null),[oe,te]=W.useState(""),[pe,se]=W.useState(""),[Ee,Ye]=W.useState(""),[P,K]=W.useState(""),[q,me]=W.useState("");W.useEffect(()=>{ve()},[]);const ve=()=>{var gt,pn,Ni,ft;const ee=_i(),Ke=ee.find(on=>on.id==="global");if(Ke)v(Ke),Ke.model&&y([Ke.model]);else if(ee.length>0){const on={...ee[0],id:"global",configName:"Global API"};wp(on),v(on),on.model&&y([on.model])}const xe=Ca();r(xe),m(Jl()),te(xe.customFontUrl||""),se(((gt=xe.minimaxConfig)==null?void 0:gt.groupId)||""),Ye(((pn=xe.minimaxConfig)==null?void 0:pn.apiKey)||""),K(((Ni=xe.minimaxConfig)==null?void 0:Ni.model)||"speech-01"),me(((ft=xe.minimaxConfig)==null?void 0:ft.baseUrl)||"https://api.minimax.chat/v1")},R=ee=>{v(Ke=>({...Ke,serviceProvider:ee,apiBaseUrl:""}))},z=async()=>{if(!g.apiKey){alert("API Key");return}_(!0);try{const ee=await jA(g);y(ee),ee.length>0&&!g.model&&v(Ke=>({...Ke,model:ee[0]}))}catch{alert("Key")}finally{_(!1)}},j=()=>{if(!g.apiKey||!g.model){alert("API Key");return}wp(g),alert("API "),ve()},ie=ee=>{Y(ee||{id:Date.now().toString(),name:"",content:"",isActive:!0,strategy:"before_char"}),ae(!0)},he=()=>{if(!Q.name||!Q.content){alert("");return}yg(Q),ve(),ae(!1)},_e=ee=>{confirm("?")&&(Sg(ee),ve())},De=()=>{const ee={...s,minimaxConfig:{groupId:pe,apiKey:Ee,model:P,baseUrl:q}};Ip(ee),r(ee),i&&i(),alert("")},je=ee=>{var xe;const Ke=(xe=ee.target.files)==null?void 0:xe[0];if(Ke){const gt=new FileReader;gt.onloadend=()=>{const pn=gt.result;Mt({appBackgroundImage:pn})},gt.readAsDataURL(Ke)}},Fe=()=>{Mt({customFontUrl:oe}),alert("")},Mt=ee=>{const Ke={...s,...ee};Ip(Ke),r(Ke),i&&i()},Yn=()=>{D([{id:"system",role:"assistant",type:"text",content:"Ready to test.",timestamp:Date.now()}]),I(!0)},Ht=async()=>{if(!V.trim())return;const ee={id:Date.now().toString(),role:"user",type:"text",content:V,timestamp:Date.now()};D(Ke=>[...Ke,ee]),Z(!0),$("");try{const xe=await Kl({id:"test",avatar:"",nickname:"Test",systemPrompt:"Test",apiConfigId:"global",lastMessage:"",lastTime:0},[...w,ee],ee.content,g);D(gt=>[...gt,{id:Date.now().toString(),role:"assistant",type:"text",content:xe,timestamp:Date.now()}])}catch(Ke){console.error(Ke)}finally{Z(!1)}},Kn=()=>T.jsxs("div",{className:"flex flex-col gap-3 mt-4",children:[T.jsx(Ta,{icon:"ri-server-fill",title:"API ",color:"bg-blue-100 text-blue-600",onClick:()=>o("api")}),T.jsx(Ta,{icon:"ri-book-read-fill",title:"",color:"bg-purple-100 text-purple-600",onClick:()=>o("worldbook")}),T.jsx(Ta,{icon:"ri-mic-2-fill",title:"",color:"bg-green-100 text-green-600",onClick:()=>o("voice")}),T.jsx(Ta,{icon:"ri-palette-fill",title:"",color:"bg-pink-100 text-pink-600",onClick:()=>o("appearance")})]}),ht=()=>T.jsxs("div",{className:"bg-cream rounded-3xl p-6 shadow-lg space-y-4",children:[T.jsxs("div",{className:"flex justify-between items-center border-b border-chocolate/10 pb-2 mb-2",children:[T.jsx("h3",{className:"text-chocolate font-bold",children:" API "}),T.jsx("button",{onClick:Yn,className:"text-xs bg-blue-100 text-blue-600 px-3 py-1 rounded-full font-bold",children:""})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-sm font-bold text-chocolate",children:""}),T.jsxs("select",{className:"w-full p-2 mt-1 rounded-lg bg-chocolate/5 outline-none",value:g.serviceProvider||"Custom",onChange:ee=>R(ee.target.value),children:[T.jsx("option",{value:"OpenAI",children:"OpenAI"}),T.jsx("option",{value:"Gemini",children:"Gemini"}),T.jsx("option",{value:"Claude",children:"Claude"}),T.jsx("option",{value:"DeepSeek",children:"DeepSeek"}),T.jsx("option",{value:"Custom",children:""})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-sm font-bold text-chocolate",children:"Base URL ()"}),T.jsx("input",{className:"w-full p-2 mt-1 rounded-lg bg-chocolate/5 outline-none",placeholder:"",value:g.apiBaseUrl||"",onChange:ee=>v({...g,apiBaseUrl:ee.target.value})})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-sm font-bold text-chocolate",children:"API Key"}),T.jsx("input",{type:"password",className:"w-full p-2 mt-1 rounded-lg bg-chocolate/5 outline-none",placeholder:"sk-...",value:g.apiKey||"",onChange:ee=>v({...g,apiKey:ee.target.value})})]}),T.jsxs("div",{children:[T.jsxs("div",{className:"flex justify-between",children:[T.jsx("label",{className:"text-sm font-bold text-chocolate",children:""}),T.jsx("button",{onClick:z,disabled:E,className:"text-xs text-mint font-bold",children:E?"...":""})]}),h.length>0?T.jsx("select",{className:"w-full p-2 mt-1 rounded-lg bg-chocolate/5 outline-none",value:g.model||"",onChange:ee=>v({...g,model:ee.target.value}),children:h.map(ee=>T.jsx("option",{value:ee,children:ee},ee))}):T.jsx("input",{className:"w-full p-2 mt-1 rounded-lg bg-chocolate/5 outline-none",placeholder:"e.g. gpt-4o",value:g.model||"",onChange:ee=>v({...g,model:ee.target.value})})]}),T.jsx(it,{onClick:j,className:"w-full mt-4",children:""}),T.jsx("p",{className:"text-[10px] text-chocolate/40 text-center",children:""})]}),xi=()=>T.jsxs("div",{className:"space-y-4",children:[T.jsx("div",{className:"bg-cream/20 p-3 rounded-lg text-cream text-xs mb-4",children:"Prompt"}),f.map(ee=>T.jsxs("div",{className:"bg-cream rounded-2xl p-4 shadow-md",children:[T.jsxs("div",{className:"flex justify-between items-start mb-2",children:[T.jsx("h3",{className:"font-bold text-chocolate",children:ee.name}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("span",{className:`text-[10px] px-2 py-1 rounded-full ${ee.strategy==="after_char"?"bg-purple-100 text-purple-600":"bg-blue-100 text-blue-600"}`,children:ee.strategy==="after_char"?"":""}),T.jsx("button",{onClick:()=>ie(ee),className:"text-chocolate/50",children:T.jsx("i",{className:"ri-edit-line"})}),T.jsx("button",{onClick:()=>_e(ee.id),className:"text-strawberry",children:T.jsx("i",{className:"ri-delete-bin-line"})})]})]}),T.jsx("p",{className:"text-xs text-chocolate/70 line-clamp-2",children:ee.content})]},ee.id)),T.jsx(it,{onClick:()=>ie(),className:"w-full",children:"+ "})]}),mn=()=>T.jsxs("div",{className:"bg-cream rounded-3xl p-6 shadow-lg space-y-4",children:[T.jsx("h3",{className:"text-chocolate font-bold border-b border-chocolate/10 pb-2",children:" (TTS)"}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-bold text-chocolate/70",children:" (Base URL)"}),T.jsx("input",{className:"w-full bg-chocolate/5 rounded-lg p-2 mt-1 text-sm outline-none placeholder-chocolate/30",placeholder:"https://api.minimax.chat/v1",value:q,onChange:ee=>me(ee.target.value)})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-bold text-chocolate/70",children:" (Model)"}),T.jsx("input",{className:"w-full bg-chocolate/5 rounded-lg p-2 mt-1 text-sm outline-none placeholder-chocolate/30",placeholder:"e.g. speech-01",value:P,onChange:ee=>K(ee.target.value)})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-bold text-chocolate/70",children:"Group ID"}),T.jsx("input",{className:"w-full bg-chocolate/5 rounded-lg p-2 mt-1 text-sm outline-none placeholder-chocolate/30",placeholder:"Enter Group ID",value:pe,onChange:ee=>se(ee.target.value)})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-bold text-chocolate/70",children:"API Key"}),T.jsx("input",{type:"password",className:"w-full bg-chocolate/5 rounded-lg p-2 mt-1 text-sm outline-none placeholder-chocolate/30",placeholder:"Enter API Key",value:Ee,onChange:ee=>Ye(ee.target.value)})]}),T.jsx("div",{className:"pt-2",children:T.jsx(it,{onClick:De,className:"w-full",children:""})}),T.jsx("p",{className:"text-[10px] text-chocolate/40 text-center",children:"KeyURL"})]}),Ai=()=>T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"bg-cream rounded-3xl p-6 shadow-lg",children:[T.jsx("h3",{className:"text-chocolate font-bold border-b border-chocolate/10 pb-2 mb-4",children:""}),T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"w-20 h-32 bg-chocolate/10 rounded-lg overflow-hidden border-2 border-chocolate/20",children:s.appBackgroundImage?T.jsx("img",{src:s.appBackgroundImage,className:"w-full h-full object-cover"}):T.jsx("div",{className:"w-full h-full flex items-center justify-center text-chocolate/20",children:T.jsx("i",{className:"ri-image-line text-2xl"})})}),T.jsxs("div",{className:"flex-1 space-y-2",children:[T.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:X,onChange:je}),T.jsx(it,{onClick:()=>{var ee;return(ee=X.current)==null?void 0:ee.click()},variant:"secondary",className:"w-full text-xs",children:""}),s.appBackgroundImage&&T.jsx(it,{onClick:()=>Mt({appBackgroundImage:void 0}),variant:"ghost",className:"w-full text-xs !text-strawberry",children:""})]})]})]}),T.jsxs("div",{className:"bg-cream rounded-3xl p-6 shadow-lg",children:[T.jsx("h3",{className:"text-chocolate font-bold border-b border-chocolate/10 pb-2 mb-4",children:""}),T.jsxs("div",{className:"space-y-3",children:[T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-bold text-chocolate/70",children:" URL (WOFF/TTF)"}),T.jsx("input",{className:"w-full bg-chocolate/5 rounded-lg p-2 mt-1 text-sm outline-none",placeholder:"https://example.com/font.woff",value:oe,onChange:ee=>te(ee.target.value)})]}),T.jsx(it,{onClick:Fe,className:"w-full",children:""}),T.jsx("p",{className:"text-[10px] text-chocolate/40",children:"URL(CORS)"})]})]})]});return T.jsxs("div",{className:"h-full flex flex-col",children:[T.jsxs("header",{className:"h-[60px] bg-cream flex items-center px-4 shadow-none shrink-0 z-20 relative",children:[t!=="menu"&&T.jsx("button",{onClick:()=>o("menu"),className:"mr-3 text-chocolate hover:bg-chocolate/10 p-1 rounded-full transition-colors",children:T.jsx("i",{className:"ri-arrow-left-s-line text-xl"})}),T.jsxs("h1",{className:"text-lg font-bold text-chocolate",children:[t==="menu"&&"",t==="api"&&" API",t==="worldbook"&&"",t==="voice"&&"",t==="appearance"&&""]})]}),T.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pt-4 pb-20 no-scrollbar",children:[t==="menu"&&Kn(),t==="api"&&ht(),t==="worldbook"&&xi(),t==="voice"&&mn(),t==="appearance"&&Ai()]}),T.jsx(En,{isOpen:x,onClose:()=>I(!1),title:"",children:T.jsxs("div",{className:"flex flex-col h-[50vh]",children:[T.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 p-2 bg-chocolate/5 rounded-lg mb-2 no-scrollbar",children:w.map(ee=>T.jsx("div",{className:`p-2 rounded text-xs ${ee.role==="user"?"bg-chocolate text-cream ml-auto":"bg-white text-chocolate mr-auto"}`,children:ee.content},ee.id))}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{className:"flex-1 p-2 bg-chocolate/5 rounded outline-none text-sm",value:V,onChange:ee=>$(ee.target.value)}),T.jsx(it,{onClick:Ht,disabled:J,className:"!py-2",children:"Send"})]})]})}),T.jsx(En,{isOpen:le,onClose:()=>ae(!1),title:"",children:T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{className:"text-sm font-bold text-chocolate",children:""}),T.jsx("input",{className:"w-full p-2 rounded-lg bg-chocolate/5 outline-none",placeholder:"e.g. ",value:Q.name||"",onChange:ee=>Y({...Q,name:ee.target.value})})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-sm font-bold text-chocolate",children:""}),T.jsxs("select",{className:"w-full p-2 rounded-lg bg-chocolate/5 outline-none",value:Q.strategy||"before_char",onChange:ee=>Y({...Q,strategy:ee.target.value}),children:[T.jsx("option",{value:"before_char",children:" ()"}),T.jsx("option",{value:"after_char",children:" (/)"})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-sm font-bold text-chocolate",children:""}),T.jsx("textarea",{className:"w-full h-32 p-2 rounded-lg bg-chocolate/5 outline-none resize-none",placeholder:"...",value:Q.content||"",onChange:ee=>Y({...Q,content:ee.target.value})})]}),T.jsx(it,{onClick:he,className:"w-full",children:""})]})})]})},Ta=({icon:i,title:t,color:o,onClick:s})=>T.jsxs("button",{onClick:s,className:"w-full flex items-center p-4 rounded-2xl shadow-md bg-cream hover:bg-white transition-all active:scale-[0.98] group border border-chocolate/5",children:[T.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-xl mr-4 shrink-0 ${o}`,children:T.jsx("i",{className:i})}),T.jsx("span",{className:"font-bold text-chocolate text-lg flex-1 text-left",children:t}),T.jsx("div",{className:"w-8 h-8 rounded-full bg-chocolate/5 flex items-center justify-center group-hover:bg-chocolate/10 transition-colors",children:T.jsx("i",{className:"ri-arrow-right-s-line text-chocolate/40 text-lg"})})]}),lN=()=>{var ae,Q;const[i,t]=W.useState([]),[o,s]=W.useState(!1),[r,f]=W.useState(""),[m,g]=W.useState(null),[v,h]=W.useState(""),[y,E]=W.useState(!1),[_,x]=W.useState(!1);W.useEffect(()=>{t(qo())},[]);const I=()=>{t(qo())},w=Y=>{const X=new Date(Y);return`${X.getMonth()+1}${X.getDate()} ${X.getHours()}:${X.getMinutes().toString().padStart(2,"0")}`},D=Y=>{const X={...Y,likes:Y.likes+1};pa(X),t(oe=>oe.map(te=>te.id===Y.id?X:te))},V=async()=>{if(!r.trim())return;const X=Fo()[0],oe={id:Date.now().toString(),authorId:"user",authorName:X.nickname||"",authorAvatar:X.avatar||"",content:r,timestamp:Date.now(),likes:0,comments:[]};Up(oe),f(""),s(!1),I(),setTimeout(()=>J(oe),5e3)},$=async()=>{if(!m||!v.trim())return;const X=Fo()[0],oe={id:Date.now().toString(),authorId:"user",authorName:X.nickname||"",authorAvatar:X.avatar||"",content:v,timestamp:Date.now()},te=i.find(pe=>pe.id===m);if(te){const pe={...te,comments:[...te.comments||[],oe]};pa(pe),t(Ye=>Ye.map(P=>P.id===te.id?pe:P)),h("");const Ee=Xi().find(Ye=>Ye.id===te.authorId);Ee&&(x(!0),setTimeout(()=>Z(Ee,te,oe.content),3e3))}},J=async Y=>{const X=Xi();if(X.length===0)return;const oe=X[Math.floor(Math.random()*X.length)],te=_i(),pe=te.find(se=>se.id===oe.apiConfigId)||te.find(se=>se.id==="global")||te[0];if(pe)try{const se=await pg(oe,Y,null,pe),Ee={id:Date.now().toString(),authorId:oe.id,authorName:oe.nickname,authorAvatar:oe.avatar,content:se.replace(/^["']|["']$/g,""),timestamp:Date.now()},P=qo().find(K=>K.id===Y.id);if(P){const K={...P,comments:[...P.comments||[],Ee]};pa(K),I()}}catch(se){console.error("Auto comment failed",se)}},Z=async(Y,X,oe)=>{const te=_i(),pe=te.find(se=>se.id===Y.apiConfigId)||te.find(se=>se.id==="global")||te[0];if(pe)try{const se=await pg(Y,X,oe,pe),Ee={id:Date.now().toString(),authorId:Y.id,authorName:Y.nickname,authorAvatar:Y.avatar,content:se.replace(/^["']|["']$/g,""),timestamp:Date.now()},P=qo().find(K=>K.id===X.id);if(P){const K={...P,comments:[...P.comments||[],Ee]};pa(K),I()}}catch(se){console.error("Auto reply failed",se)}finally{x(!1)}},le=async()=>{if(y)return;const Y=Xi();if(Y.length===0){alert("");return}E(!0);try{const X=Y[Math.floor(Math.random()*Y.length)],oe=_i(),te=oe.find(Ee=>Ee.id===X.apiConfigId)||oe.find(Ee=>Ee.id==="global")||oe[0];if(!te){alert(` ${X.nickname} API`),E(!1);return}const pe=await nN(X,te),se={id:Date.now().toString(),authorId:X.id,authorName:X.nickname,authorAvatar:X.avatar,content:pe.replace(/^["']|["']$/g,""),timestamp:Date.now(),likes:Math.floor(Math.random()*10),comments:[]};Up(se),I()}catch(X){console.error(X),alert("API")}finally{E(!1)}};return T.jsxs("div",{className:"h-full flex flex-col relative",children:[T.jsxs("header",{className:"h-[60px] bg-cream flex justify-between items-center px-4 shadow-none shrink-0 z-20 relative",children:[T.jsx("h1",{className:"text-lg font-bold text-chocolate",children:""}),T.jsx("button",{onClick:le,disabled:y,className:`p-2 rounded-full hover:bg-chocolate/10 jelly-btn flex items-center justify-center transition-colors ${y?"opacity-50 cursor-not-allowed text-chocolate/50":"text-mint"}`,title:"",children:T.jsx("i",{className:`ri-magic-line text-2xl ${y?"animate-spin":""}`})})]}),T.jsx("div",{className:"flex-1 overflow-y-auto px-4 pt-4 pb-20 no-scrollbar",children:i.length===0?T.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-cream/60",children:[T.jsx("i",{className:"ri-chat-1-line text-6xl mb-4"}),T.jsx("p",{children:"..."}),T.jsx("p",{className:"text-xs mt-1",children:""})]}):i.map(Y=>{var X,oe;return T.jsxs("div",{className:"bg-cream rounded-3xl p-5 mb-4 shadow-lg animate-[fadeIn_0.5s_ease-out]",children:[T.jsxs("div",{className:"flex items-center mb-3",children:[T.jsx("div",{className:"w-10 h-10 bg-mint rounded-full flex items-center justify-center text-xl mr-3 overflow-hidden",children:Y.authorAvatar.startsWith("http")||Y.authorAvatar.startsWith("data:")?T.jsx("img",{src:Y.authorAvatar,className:"w-full h-full object-cover"}):Y.authorAvatar}),T.jsxs("div",{children:[T.jsx("h4",{className:"font-bold text-chocolate",children:Y.authorName}),T.jsx("p",{className:"text-xs text-chocolate/50",children:w(Y.timestamp)})]})]}),T.jsx("div",{className:"text-chocolate/90 leading-relaxed mb-3 whitespace-pre-wrap",children:Y.content}),Y.image&&T.jsx("div",{className:"rounded-2xl overflow-hidden mb-3",children:T.jsx("img",{src:Y.image,className:"w-full h-auto object-cover"})}),T.jsx("div",{className:"flex items-center justify-between pt-2 border-t border-chocolate/5",children:T.jsxs("div",{className:"flex items-center text-chocolate/60 text-sm gap-4",children:[T.jsxs("button",{onClick:()=>D(Y),className:"flex items-center hover:text-strawberry transition-colors jelly-btn",children:[T.jsx("i",{className:`ri-heart-3-${Y.likes>0?"fill":"line"} mr-1 text-lg ${Y.likes>0?"text-strawberry":""}`}),Y.likes>0?Y.likes:""]}),T.jsxs("button",{onClick:()=>g(Y.id),className:"flex items-center hover:text-mint transition-colors jelly-btn",children:[T.jsx("i",{className:"ri-chat-3-line mr-1 text-lg"}),(((X=Y.comments)==null?void 0:X.length)||0)>0?(oe=Y.comments)==null?void 0:oe.length:""]})]})}),Y.comments&&Y.comments.length>0&&T.jsxs("div",{className:"mt-3 space-y-2 bg-chocolate/5 p-3 rounded-xl",children:[Y.comments.slice(-2).map(te=>T.jsxs("div",{className:"text-xs",children:[T.jsxs("span",{className:"font-bold text-chocolate",children:[te.authorName,": "]}),T.jsx("span",{className:"text-chocolate/80",children:te.content})]},te.id)),Y.comments.length>2&&T.jsxs("button",{onClick:()=>g(Y.id),className:"text-xs text-mint font-bold mt-1",children:[" ",Y.comments.length," ..."]})]})]},Y.id)})}),T.jsx("div",{className:"absolute bottom-20 right-6 z-20",children:T.jsx("button",{onClick:()=>s(!0),className:"w-14 h-14 bg-mint text-chocolate rounded-full shadow-xl flex items-center justify-center hover:scale-105 transition-transform jelly-btn",children:T.jsx("i",{className:"ri-edit-2-fill text-2xl"})})}),T.jsx(En,{isOpen:o,onClose:()=>s(!1),title:"",children:T.jsxs("div",{className:"space-y-4",children:[T.jsx("textarea",{value:r,onChange:Y=>f(Y.target.value),className:"w-full h-32 p-3 rounded-xl bg-chocolate/5 border-2 border-transparent focus:border-mint outline-none text-chocolate resize-none",placeholder:"...",autoFocus:!0}),T.jsx(it,{onClick:V,className:"w-full",children:""})]})}),T.jsx(En,{isOpen:!!m,onClose:()=>g(null),title:"",children:T.jsxs("div",{className:"flex flex-col h-[60vh]",children:[T.jsx("div",{className:"flex-1 overflow-y-auto space-y-4 mb-4 no-scrollbar",children:((Q=(ae=i.find(Y=>Y.id===m))==null?void 0:ae.comments)==null?void 0:Q.map(Y=>T.jsxs("div",{className:"flex gap-3",children:[T.jsx("div",{className:"w-8 h-8 rounded-full bg-mint flex items-center justify-center overflow-hidden shrink-0",children:Y.authorAvatar.startsWith("http")||Y.authorAvatar.startsWith("data:")?T.jsx("img",{src:Y.authorAvatar,className:"w-full h-full object-cover"}):Y.authorAvatar}),T.jsxs("div",{children:[T.jsxs("div",{className:"flex items-baseline gap-2",children:[T.jsx("span",{className:"text-sm font-bold text-chocolate",children:Y.authorName}),T.jsx("span",{className:"text-[10px] text-chocolate/40",children:w(Y.timestamp)})]}),T.jsx("p",{className:"text-sm text-chocolate/80 bg-chocolate/5 p-2 rounded-lg rounded-tl-none mt-1",children:Y.content})]})]},Y.id)))||T.jsx("div",{className:"text-center text-chocolate/40 text-xs py-10",children:""})}),T.jsxs("div",{className:"flex gap-2 items-end pt-2 border-t border-chocolate/10",children:[T.jsx("textarea",{className:"flex-1 bg-chocolate/5 rounded-xl p-3 text-sm outline-none resize-none h-12 focus:h-20 transition-all placeholder-chocolate/30",placeholder:"...",value:v,onChange:Y=>h(Y.target.value)}),T.jsx("button",{onClick:$,disabled:!v.trim(),className:"w-10 h-10 bg-mint text-chocolate rounded-full flex items-center justify-center shadow-md disabled:opacity-50 jelly-btn",children:T.jsx("i",{className:"ri-send-plane-fill"})})]}),_&&T.jsx("div",{className:"text-[10px] text-mint text-center mt-1 animate-pulse",children:"..."})]})})]})};function sN(){const[i,t]=W.useState("roles"),[o,s]=W.useState(null),[r,f]=W.useState({});W.useEffect(()=>{const w=Ca();f(w),g(w.customFontUrl)},[]);const m=()=>{const w=Ca();f(w),g(w.customFontUrl)},g=w=>{const D="custom-font-style";let V=document.getElementById(D);if(!w){V&&V.remove(),document.body.style.fontFamily="";return}V||(V=document.createElement("style"),V.id=D,document.head.appendChild(V)),V.innerHTML=`
        @font-face {
            font-family: 'CustomAppFont';
            src: url('${w}');
        }
        body {
            font-family: 'CustomAppFont', "PingFang SC", sans-serif !important;
        }
      `},v=w=>{t(w)},h=w=>{s(w),t("chat")},y=()=>{s(null),t("roles")},E=w=>{s(w),Cc(w)},_=()=>{switch(i){case"roles":return T.jsx(ic,{onChatStart:h});case"chat":return o?T.jsx(iN,{role:o,onBack:y,onRoleUpdate:E}):T.jsx(ic,{onChatStart:h});case"feed":return T.jsx(lN,{});case"settings":return T.jsx(oN,{onSettingsChanged:m});default:return T.jsx(ic,{onChatStart:h})}},x=r.appBackgroundImage?{backgroundImage:`url(${r.appBackgroundImage})`,backgroundSize:"cover",backgroundPosition:"center"}:{},I=r.appBackgroundImage?"bg-chocolate/10":"bg-texture";return T.jsxs("div",{className:"h-full w-full relative max-w-md mx-auto shadow-2xl overflow-hidden flex flex-col",style:x,children:[T.jsx("div",{className:`absolute inset-0 z-0 ${I} pointer-events-none`}),T.jsx("main",{className:"flex-1 overflow-hidden relative z-10",children:_()}),i!=="chat"&&T.jsxs("nav",{className:"h-[60px] bg-cream flex justify-around items-center px-2 z-40 relative shadow-none",children:[T.jsx(sc,{icon:"ri-message-3-fill",label:"",isActive:i==="roles",onClick:()=>v("roles")}),T.jsx(sc,{icon:"ri-compass-3-fill",label:"",isActive:i==="feed",onClick:()=>v("feed")}),T.jsx(sc,{icon:"ri-settings-4-fill",label:"",isActive:i==="settings",onClick:()=>v("settings")})]})]})}const sc=({icon:i,label:t,isActive:o,onClick:s})=>T.jsxs("button",{onClick:s,className:`flex flex-col items-center justify-center w-full h-full jelly-btn ${o?"text-chocolate":"text-chocolate/40"}`,children:[T.jsx("i",{className:`${i} text-2xl mb-0.5`}),T.jsx("span",{className:"text-[10px] font-bold",children:t})]}),hv=document.getElementById("root");if(!hv)throw new Error("Could not find root element to mount to");const aN=L0.createRoot(hv);aN.render(T.jsx(N0.StrictMode,{children:T.jsx(sN,{})}));
